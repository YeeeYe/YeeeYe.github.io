<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="DWBBlog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="DWBBlog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DWBBlog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>DWBBlog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DWBBlog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/20/26-自学/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/12/20/26-自学/" itemprop="url">26.自学</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-20T21:52:16+08:00">
                2020-12-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-React生命周期函数的理解"><a href="#1-React生命周期函数的理解" class="headerlink" title="1.React生命周期函数的理解"></a>1.React生命周期函数的理解</h3><h4 id="1-1-React-16-3-之后的生命周期函数"><a href="#1-1-React-16-3-之后的生命周期函数" class="headerlink" title="1.1 React 16.3+之后的生命周期函数"></a>1.1 React 16.3+之后的生命周期函数</h4><h5 id="1-getDerivedStateFromProps"><a href="#1-getDerivedStateFromProps" class="headerlink" title="1.getDerivedStateFromProps"></a>1.getDerivedStateFromProps</h5><p>当前组件的 props 和 state 发生变化的时候会触发该函数</p>
<h5 id="2-componentDidMount"><a href="#2-componentDidMount" class="headerlink" title="2.componentDidMount"></a>2.componentDidMount</h5><p>当组件挂载完毕会执行这个方法(只会执行一次)</p>
<h5 id="3-shouldComponentUpdate"><a href="#3-shouldComponentUpdate" class="headerlink" title="3.shouldComponentUpdate"></a>3.shouldComponentUpdate</h5><p>确定组件是否应该更新。 如果不写默认返回true；如果某些状态改变之后，不想要更新组件，那么我们可以在这个方法中返回false。</p>
<h5 id="4-getSnapshotBeforeUpdate"><a href="#4-getSnapshotBeforeUpdate" class="headerlink" title="4.getSnapshotBeforeUpdate"></a>4.getSnapshotBeforeUpdate</h5><p>在最新的渲染输出提交给 DOM 前将会立即调用，这对于从 DOM 捕获信息（比如：滚动位置）很有用。</p>
<h5 id="5-componentDidUpdate"><a href="#5-componentDidUpdate" class="headerlink" title="5.componentDidUpdate"></a>5.componentDidUpdate</h5><p>组件更新完毕会执行该方法，如果shouldComponentUpdate ()返回 false，则不会触发。</p>
<h5 id="6-componentWillUnmount"><a href="#6-componentWillUnmount" class="headerlink" title="6.componentWillUnmount"></a>6.componentWillUnmount</h5><p>组件卸载的时候回调该方法</p>
<p><img src="/2020/12/20/26-自学/1.jpg" alt="BP"></p>
<h4 id="1-2-React-16-3-之前的生命周期函数"><a href="#1-2-React-16-3-之前的生命周期函数" class="headerlink" title="1.2 React 16.3 之前的生命周期函数"></a>1.2 React 16.3 之前的生命周期函数</h4><h5 id="componentWillMount"><a href="#componentWillMount" class="headerlink" title="componentWillMount:"></a><strong>componentWillMount:</strong></h5><p>在组件将要挂载到页面的时候执行。</p>
<h5 id="componentDidMount"><a href="#componentDidMount" class="headerlink" title="componentDidMount:"></a><strong>componentDidMount:</strong></h5><p>组件已经挂载到页面的时候执行。</p>
<h5 id="componentWillReceiveProps"><a href="#componentWillReceiveProps" class="headerlink" title="componentWillReceiveProps:"></a><strong>componentWillReceiveProps:</strong></h5><p>在组件接收到新属性前调用。 </p>
<h5 id="shouldComponentUpdate"><a href="#shouldComponentUpdate" class="headerlink" title="shouldComponentUpdate:"></a><strong>shouldComponentUpdate:</strong></h5><p> 确定组件是否应该更新。 如果不写默认返回true；如果某些状态改变之后，不想要更新组件，那么我们可以在这个方法中返回false。 </p>
<h5 id="componentWillUpdate"><a href="#componentWillUpdate" class="headerlink" title="componentWillUpdate:"></a><strong>componentWillUpdate:</strong></h5><p> 在组件将要更新的时候调用</p>
<h5 id="componentDidUpdate"><a href="#componentDidUpdate" class="headerlink" title="componentDidUpdate:"></a><strong>componentDidUpdate:</strong></h5><p>组件更新完毕会执行该方法。 如果shouldComponentUpdate()返回false，则不会触发。</p>
<h5 id="componentWillUnmount"><a href="#componentWillUnmount" class="headerlink" title="componentWillUnmount:"></a><strong>componentWillUnmount:</strong></h5><p>组件卸载的时候回调用该方法。</p>
<p><img src="/2020/12/20/26-自学/2.png" alt="BP"></p>
<p>其中注意的是以下的三个方法在 React 16.3 之后的生命周期钩子函数中移除了</p>
<p>componentWillMount()</p>
<p>componentWillReceiveProps()</p>
<p>componentWillUpdate()</p>
<h3 id="2-Redux更新的方法"><a href="#2-Redux更新的方法" class="headerlink" title="2.Redux更新的方法"></a>2.Redux更新的方法</h3><p>Redux 是一种状态管理的技术，多个组件之间共享数据的一种方式</p>
<p>Redux强调三个基本原则：</p>
<ol>
<li>唯一数据源：唯一数据源指的是应用的状态数据应该只存储在唯一的一个Store上。</li>
<li>保持状态只读：保持状态只读，就是说不能去直接修改状态，要修改Store的状态，必须要通过派发一个action对象完成。</li>
<li>状态的修改只能通过纯函数完成：这里所说的纯函数就是把 Reducer，Reducer 描述了 state 状态如何修改</li>
</ol>
<p><img src="/2020/12/20/26-自学/3.png" alt="BP"></p>
<h3 id="3-iframe-优缺点"><a href="#3-iframe-优缺点" class="headerlink" title="3. iframe 优缺点"></a>3. iframe 优缺点</h3><h4 id="3-1-iframe的优点"><a href="#3-1-iframe的优点" class="headerlink" title="3.1 iframe的优点"></a>3.1 iframe的优点</h4><p>1.iframe能够原封不动的把嵌入的网页展现出来，iframe和主页面是并行加载的</p>
<p>2.如果有多个网页引用iframe，那么你只需要修改iframe的内容，就可以实现调用的每一个页面内容的更改，方便快捷。</p>
<p>3.网页如果为了统一风格，头部和版本都是一样的，就可以写成一个页面，用iframe来嵌套，可以增加代码的可重用。</p>
<p>4.如果遇到加载缓慢的第三方内容如图标和广告，这些问题可以由iframe来解决。</p>
<h4 id="3-2-iframe的缺点"><a href="#3-2-iframe的缺点" class="headerlink" title="3.2 iframe的缺点"></a>3.2 iframe的缺点</h4><p>1.会产生很多页面，不容易管理。</p>
<p>2.iframe框架结构有时会让人感到迷惑，如果框架个数多的话，可能会出现上下、左右滚动条，会分散访问者的注意力，用户体验度差。</p>
<p>3.代码复杂，无法被一些搜索引擎索引到，这一点很关键，现在的搜索引擎爬虫还不能很好的处理iframe中的内容，所以使用iframe会不利于搜索引擎优化。</p>
<p>4.很多的移动设备（PDA 手机）无法完全显示框架，设备兼容性差。</p>
<p>5.iframe框架页面会增加服务器的http请求，对于大型网站是不可取的。 分析了这么多，现在基本上都是用Ajax来代替iframe，所以iframe已经渐渐的退出了前端开发。</p>
<p>6.iframe会堵塞主页面的onload事件</p>
<h3 id="4-如何居中div-如何居中一个浮动元素？如何让绝对定位的div居中？"><a href="#4-如何居中div-如何居中一个浮动元素？如何让绝对定位的div居中？" class="headerlink" title="4.如何居中div,如何居中一个浮动元素？如何让绝对定位的div居中？"></a>4.如何居中div,如何居中一个浮动元素？如何让绝对定位的div居中？</h3><ul>
<li><h5 id="水平居中div："><a href="#水平居中div：" class="headerlink" title="水平居中div："></a>水平居中div：</h5></li>
</ul>
<ol>
<li>给div设定一个宽度</li>
<li>设置div  margin:0 auto;</li>
</ol>
<ul>
<li><h5 id="居中浮动的div"><a href="#居中浮动的div" class="headerlink" title="居中浮动的div:"></a>居中浮动的div:</h5></li>
</ul>
<ol>
<li>给div设定一个宽度 500px</li>
<li>margin-left:50%; position:relative; left:-250px;</li>
</ol>
<ul>
<li><h5 id="居中绝对定位的div"><a href="#居中绝对定位的div" class="headerlink" title="居中绝对定位的div:"></a>居中绝对定位的div:</h5></li>
</ul>
<ol>
<li>position:absolute;top:50%;left:50%;transform:translate(-50%，-50%)</li>
</ol>
<ul>
<li><h5 id="使用flex布局来居中："><a href="#使用flex布局来居中：" class="headerlink" title="使用flex布局来居中："></a>使用flex布局来居中：</h5><p>justify-content:center align-items:center</p>
</li>
</ul>
<h3 id="5-css-选择符有哪些？哪些属性可以继承？优先级算法如何计算？内联和important那个优先级高？"><a href="#5-css-选择符有哪些？哪些属性可以继承？优先级算法如何计算？内联和important那个优先级高？" class="headerlink" title="5.css 选择符有哪些？哪些属性可以继承？优先级算法如何计算？内联和important那个优先级高？"></a>5.css 选择符有哪些？哪些属性可以继承？优先级算法如何计算？内联和important那个优先级高？</h3><ul>
<li><h5 id="css选择符："><a href="#css选择符：" class="headerlink" title="css选择符："></a>css选择符：</h5><p>1.id选择器（ # myid）</p>
<p>2.类选择器（.myclassname）</p>
<p>3.标签选择器（div, h1, p）</p>
<p>4.相邻选择器（h1 + p）</p>
<p>5.子选择器（ul &gt; li）</p>
<p>6.后代选择器（li a）</p>
<p>7.通配符选择器（ * ）</p>
<p>8.属性选择器（a[rel = “external”]）</p>
<p>9.伪类选择器（a:hover, li:nth-child）</p>
<p>10.伪元素选择器 (div::before   div::after)</p>
</li>
</ul>
<ul>
<li><h5 id="哪些属性可以继承"><a href="#哪些属性可以继承" class="headerlink" title="哪些属性可以继承"></a>哪些属性可以继承</h5></li>
</ul>
<p>​    * 可继承的样式：  font-size   font-family color  line-height  text开头的  opacity</p>
<p>​    * 不可继承的样式：border padding margin width height ;  </p>
<ul>
<li><h5 id="优先级算法"><a href="#优先级算法" class="headerlink" title="优先级算法"></a>优先级算法</h5></li>
</ul>
<p>​      我们可以给标签的权重为1，class的权重为10，id的权重为100，!important权重无限大来计算css样式的优先级。</p>
<p>​      比如    div  #box  .inner  p 权重</p>
<p>​                 1      100     10       1              总权重112</p>
<p>​                 </p>
<p>​                 div  .content   .inner  p 权重</p>
<p>​                 1      10             10       1        总权重22</p>
<p>​       1.优先级就近原则，同权重情况下样式定义最近者为准;</p>
<p>​       2.载入样式同权重下以最后载入的定位为准;</p>
<p>​       3.!important &gt; 内联  &gt; id &gt; class &gt; tag</p>
<h3 id="6-路由跳转"><a href="#6-路由跳转" class="headerlink" title="6.路由跳转"></a>6.路由跳转</h3><p>1.router-link方式</p>
<p>不带参数：</p>
<router-link :to="{name:'home'}"> 



<p>带参数：params传参数</p>
<p> html 取参 $route.params.id</p>
<p> script 取参 this.$route.params.id</p>
<router-link :to="{name:'home', params: {id:1}}"> 

<p>​    </p>
<p>带参数：query传参数 (类似get,url后面会显示参数)</p>
<p>注意点：如果使用path，name不可以和params共用</p>
<p> html 取参 $route.query.id</p>
<p> script 取参 this.$route.query.id</p>
<router-link :to="{name:'home', query: {id:1}}"> 

<p>​    </p>
<p>​    </p>
<p>2.this.$router.push() 编程式导航</p>
<p>不带参数:</p>
<p>this.$router.push(‘/home’)</p>
<p>this.$router.push({name:’home’})</p>
<p>this.$router.push({path:’/home’})</p>
<p>query传参:</p>
<p>this.$router.push({name:’home’,query: {id:’1’}})</p>
<p>this.$router.push({path:’/home’,query: {id:’1’}})</p>
<p>params传参:</p>
<p>this.$router.push({name:’home’,params: {id:’1’}})</p>
<p>query类似get,跳转之后页面url后面会拼接参数,类似?id=1,非重要性的可以这样传,密码之类还是用params刷新页面id还在;</p>
<p>params类似post,跳转之后页面url后面不会拼接参数,但是刷新页面id会消失。</p>
<h3 id="7-清除浮动的方式"><a href="#7-清除浮动的方式" class="headerlink" title="7.清除浮动的方式"></a>7.清除浮动的方式</h3><ol>
<li>父级div定义伪类:after和zoom和:before</li>
<li>父级div定义overflow:auto</li>
<li>使用空div隔墙(内墙)法：<div style="clear:both;"></div></li>
</ol>
<h3 id="8-Promise-方法"><a href="#8-Promise-方法" class="headerlink" title="8.Promise 方法"></a>8.Promise 方法</h3><p> Promise的all方法提供了并行执行异步操作的能力，并且在所有异步操作执行完后才执行回调。runAsync1(),runAsync2()两个函数是并行执行的，等到它们都执行完后才会进到then里面。</p>
<h3 id="9-Js原型链"><a href="#9-Js原型链" class="headerlink" title="9.Js原型链"></a>9.Js原型链</h3><p>new 操作符具体干了什么呢?其实很简单，就干了三件事情。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="keyword">var</span> obj  = &#123;&#125;;</span><br><span class="line"><span class="number">2</span> obj.__proto__ = Base.prototype;</span><br><span class="line"><span class="number">3</span> Base.call(obj);</span><br></pre></td></tr></table></figure>

<p>第一行，我们创建了一个空对象 obj<br>第二行，我们将这个空对象的  <code>__proto__</code> 成员指向了 Base 函数对象 prototype 成员对象<br>第三行，我们将 Base 函数对象的 this 指针替换成 obj，然后再调用 Base 函数，于是我们就给 obj 对象赋值了一个 id 成员变量，这个成员变量的值是 ”base”，关于call函数的用法。</p>
<p> 在谈原型链之前，我们首先要了解自定义函数与 Function 之间是什么关系，而构造函数、原型和实例之间又存在什么千丝万缕的关系呢？其实，所有的函数都是 Function 的实例。在构造函数上都有一个原型属性 prototype，该属性也是一个对象；那么在原型对象上有一个 constructor 属性，该属性指向的就是构造函数；而实例对象上有一个 <em>proto</em>  属性，该属性也指向原型对象，并且该属性不是标准属性，不可以用在编程中，该属性用于浏览器内部使用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// _proto_</span></span><br><span class="line">在函数里有一个属性prototype</span><br><span class="line">由该函数创建的对象默认会连接到该属性上</span><br><span class="line">    <span class="comment">//prototype 与 _proto_ 的关系</span></span><br><span class="line">_proto_是站在对象角度来说的</span><br><span class="line">prototype 是站在构造函数角度来说的</span><br></pre></td></tr></table></figure>

<h4 id="构造函数、原型和实例之间的关系"><a href="#构造函数、原型和实例之间的关系" class="headerlink" title="构造函数、原型和实例之间的关系"></a>构造函数、原型和实例之间的关系</h4><h5 id="①-Object"><a href="#①-Object" class="headerlink" title="①+Object"></a>①+Object</h5><h5 id="②-Function-Object-Array"><a href="#②-Function-Object-Array" class="headerlink" title=" ②+Function+Object+Array"></a><img src="/2020/12/20/26-自学/4.png" alt="BP"> ②+Function+Object+Array</h5><p><img src="/2020/12/20/26-自学/5.png" alt="BP"></p>
<p><img src="/2020/12/20/26-自学/6.png" alt="BP"></p>
<p><strong>【小结】</strong>套用一句很粗暴的话，所谓原型链就是找妈的一种行为方式，就可以理解为人是人他妈生的，妖是妖他妈生的。原型链的核心其实就只有一个：属性共享和独立的控制，当你的对象实例需要独立的属性，所有做法的本质都是在对象实例里面创建属性。若不考虑太多，你大可以在Person里面直接定义你所需要独立的属性来覆盖掉原型的属性。总之，使用原型继承的时候，要对于原型中的属性要特别注意，因为他们都是牵一发而动全身的存在。现在最常用的方法是组合模式。</p>
<p>1、原型链</p>
<p>​    1）构造函数、原型和实例的关系</p>
<p>​        ①构造函数都有一个属性prototype，这个属性是一个对象（Object的实例）</p>
<p>​        ②原型对象prototype里面有一个constructor属性，该属性指向原型对象所属的构造函数</p>
<p>​        ③实例对象都有一个_proto_属性，该属性也指向构造函数的原型对象，它是一个非标准属性，不可以用于编程，它是用于浏览器自己使用的</p>
<p>​    2）prototype与_proto_的关系</p>
<p>​        ①prototype是构造函数的属性</p>
<p>​        ②_proto_是实例对象的属性</p>
<p>​                    ——这两者都指向同一个对象</p>
<p>​    【总结】i）函数也是对象，对象不一定是函数；</p>
<p>​            ii）对象的本质：无序的键值对集合；键值对当中的值可以是任意数据类型的值</p>
<p>​            iii）对象就是一个容器，这个容器当中放的是（属性和方法）</p>
<p>​    3）属性搜索</p>
<p>​    　　①在访问对象的某个成员的时候会先在对象中找是否存在</p>
<p>​    　　②如果当前对象中没有就在构造函数的原型对象中找</p>
<p>​    　　③如果原型对象中没有找到就到原型对象的原型上找</p>
<p>​    　　④知道Object的原型对象的原型是null为止</p>
<p>2、Function</p>
<p>——所有函数都是Function的实例</p>
<p>​    ①本地对象：独立于宿主环境（浏览器）的对象——包括Object、Array、Date、RegExp、Function、Error、Number、String、Boolean</p>
<p>​    ②内置对象——包括Math、Global（window，在js中就是全局变量），使用的时候不需要new</p>
<p>​    ③宿主对象——包括自定义对象、DOM、BOM</p>
<h3 id="10-JS-数组去重"><a href="#10-JS-数组去重" class="headerlink" title="10. JS 数组去重"></a>10. JS 数组去重</h3><h4 id="10-1-简单的去重方法"><a href="#10-1-简单的去重方法" class="headerlink" title="10.1 简单的去重方法"></a>10.1 简单的去重方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 最简单数组去重法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 新建一新数组，遍历传入数组，值不在新数组就push进该新数组中</span></span><br><span class="line"><span class="comment">* IE8以下不支持数组的indexOf方法</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniq</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> temp = []; <span class="comment">//一个新的临时数组</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; array.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(temp.indexOf(array[i]) == <span class="number">-1</span>)&#123;</span><br><span class="line">            temp.push(array[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> aa = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">5</span>];</span><br><span class="line"><span class="built_in">console</span>.log(uniq(aa));</span><br></pre></td></tr></table></figure>

<h4 id="10-2-对象键值法去重"><a href="#10-2-对象键值法去重" class="headerlink" title="10.2 对象键值法去重"></a>10.2 对象键值法去重</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 速度最快， 占空间最多（空间换时间）</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 该方法执行的速度比其他任何方法都快， 就是占用的内存大一些。</span></span><br><span class="line"><span class="comment">* 现思路：新建一js对象以及新数组，遍历传入数组时，判断值是否为js对象的键，</span></span><br><span class="line"><span class="comment">* 不是的话给对象新增该键并放入新数组。</span></span><br><span class="line"><span class="comment">* 注意点：判断是否为js对象键时，会自动对传入的键执行“toString()”，</span></span><br><span class="line"><span class="comment">* 不同的键可能会被误认为一样，例如n[val]-- n[1]、n["1"]；</span></span><br><span class="line"><span class="comment">* 解决上述问题还是得调用“indexOf”。*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniq</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> temp = &#123;&#125;, r = [], len = array.length, val, type;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        val = array[i];</span><br><span class="line">        type = <span class="keyword">typeof</span> val;</span><br><span class="line">        <span class="keyword">if</span> (!temp[val]) &#123;</span><br><span class="line">            temp[val] = [type];</span><br><span class="line">            r.push(val);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (temp[val].indexOf(type) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            temp[val].push(type);</span><br><span class="line">            r.push(val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> aa = [<span class="number">1</span>,<span class="number">2</span>,<span class="string">"2"</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="string">"a"</span>,<span class="string">"a"</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">5</span>];</span><br><span class="line"><span class="built_in">console</span>.log(uniq(aa));</span><br></pre></td></tr></table></figure>

<h4 id="10-3-排序后相邻去除法"><a href="#10-3-排序后相邻去除法" class="headerlink" title="10.3 排序后相邻去除法"></a>10.3 排序后相邻去除法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 给传入数组排序，排序后相同值相邻，</span></span><br><span class="line"><span class="comment">* 然后遍历时,新数组只加入不与前一值重复的值。</span></span><br><span class="line"><span class="comment">* 会打乱原来数组的顺序</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniq</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line">    array.sort();</span><br><span class="line">    <span class="keyword">var</span> temp=[array[<span class="number">0</span>]];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; array.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>( array[i] !== temp[temp.length<span class="number">-1</span>])&#123;</span><br><span class="line">            temp.push(array[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> aa = [<span class="number">1</span>,<span class="number">2</span>,<span class="string">"2"</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="string">"a"</span>,<span class="string">"a"</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">5</span>];</span><br><span class="line"><span class="built_in">console</span>.log(uniq(aa));</span><br></pre></td></tr></table></figure>

<h4 id="10-4-数组下标法"><a href="#10-4-数组下标法" class="headerlink" title="10.4 数组下标法"></a>10.4 数组下标法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 还是得调用“indexOf”性能跟方法1差不多，</span></span><br><span class="line"><span class="comment">* 实现思路：如果当前数组的第i项在当前数组中第一次出现的位置不是i，</span></span><br><span class="line"><span class="comment">* 那么表示第i项是重复的，忽略掉。否则存入结果数组。</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniq</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> temp = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">        <span class="comment">//如果当前数组的第i项在当前数组中第一次出现的位置是i，才存入数组；否则代表是重复的</span></span><br><span class="line">        <span class="keyword">if</span>(array.indexOf(array[i]) == i)&#123;</span><br><span class="line">            temp.push(array[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> aa = [<span class="number">1</span>,<span class="number">2</span>,<span class="string">"2"</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="string">"a"</span>,<span class="string">"a"</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">5</span>];</span><br><span class="line"><span class="built_in">console</span>.log(uniq(aa));</span><br></pre></td></tr></table></figure>

<h4 id="10-5-优化遍历数组法"><a href="#10-5-优化遍历数组法" class="headerlink" title="10.5 优化遍历数组法"></a>10.5 优化遍历数组法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 思路：获取没重复的最右一值放入新数组</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 推荐的方法</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 方法的实现代码相当酷炫，</span></span><br><span class="line"><span class="comment">* 实现思路：获取没重复的最右一值放入新数组。</span></span><br><span class="line"><span class="comment">* （检测到有重复值时终止当前循环同时进入顶层循环的下一轮判断）*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniq</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> temp = [];</span><br><span class="line">    <span class="keyword">var</span> index = [];</span><br><span class="line">    <span class="keyword">var</span> l = array.length;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; l; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> j = i + <span class="number">1</span>; j &lt; l; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (array[i] === array[j])&#123;</span><br><span class="line">                i++;</span><br><span class="line">                j = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        temp.push(array[i]);</span><br><span class="line">        index.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(index);</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> aa = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">5</span>];</span><br><span class="line"><span class="built_in">console</span>.log(uniq(aa));</span><br></pre></td></tr></table></figure>

<h3 id="11-请描述一下cookies，sessionStorage和localStorage的区别？"><a href="#11-请描述一下cookies，sessionStorage和localStorage的区别？" class="headerlink" title="11. 请描述一下cookies，sessionStorage和localStorage的区别？"></a>11. 请描述一下cookies，sessionStorage和localStorage的区别？</h3><p><img src="/2020/12/20/26-自学/7.png" alt="BP"></p>
<h3 id="12-使用js实现链表数据结构-增-删-该-查-打印"><a href="#12-使用js实现链表数据结构-增-删-该-查-打印" class="headerlink" title="12.使用js实现链表数据结构(增 删 该 查 打印)"></a>12.使用js实现链表数据结构(增 删 该 查 打印)</h3><ul>
<li><p>链表是一种非线性、非顺序的物理结构，是由若干个节点组成。</p>
</li>
<li><p>链表采用的是“见缝插针”的存储方法，不要求内存连续，靠next指针关联起来。</p>
</li>
<li><p>链表的物理存储方式为随机存储，访问方式为顺序访问。</p>
</li>
<li><p>查找节点的时间复杂度为O(n)，插入、删除节点的时间复杂度为O(1)。</p>
</li>
<li><p>链表适用于写操作多，读操作少的场景。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*======定义结构======*/</span></span><br><span class="line"><span class="keyword">var</span> node = <span class="function"><span class="keyword">function</span> (<span class="params">element</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.element = element</span><br><span class="line">	<span class="keyword">this</span>.next = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> linkedList = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.head = <span class="keyword">new</span> node(<span class="string">"head"</span>)</span><br><span class="line">	<span class="keyword">this</span>.find = find</span><br><span class="line">	<span class="keyword">this</span>.insert = insert</span><br><span class="line">	<span class="keyword">this</span>.update = update</span><br><span class="line">	<span class="keyword">this</span>.remove = remove</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*======查找======*/</span></span><br><span class="line"><span class="keyword">var</span> find = <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> currNode = <span class="keyword">this</span>.head</span><br><span class="line">	<span class="keyword">while</span> (currNode.element !== item) &#123;</span><br><span class="line">		currNode = currNode.next</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> currNode</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*======插入======*/</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*newElement:一个新节点，item:链表的目标节点</span></span><br><span class="line"><span class="comment">*1.查找找到目标节点，将新节点的next指向目标节点的下一个节点</span></span><br><span class="line"><span class="comment">*2.将目标节点的next指向这个新节点</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> insert = <span class="function"><span class="keyword">function</span> (<span class="params">newElement, item</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> newNode = <span class="keyword">new</span> node(newElement)</span><br><span class="line">	<span class="keyword">let</span> currNode = <span class="keyword">this</span>.find(item)</span><br><span class="line">	newNode.next = currNode.next</span><br><span class="line">	currNode.next = newNode</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*======修改======*/</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*查找到目标节点，将其element修改</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> update = <span class="function"><span class="keyword">function</span> (<span class="params">item, newItem</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> currNode = <span class="keyword">this</span>.find(item)</span><br><span class="line">	currNode.element = newItem</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*======删除======*/</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*找到匹配节点的前一个节点，将其next指向当前节点的下一个节点，即删除当前节点</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> remove = <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> currNode = <span class="keyword">this</span>.head</span><br><span class="line">	<span class="keyword">while</span> (currNode.next !== <span class="literal">null</span> &amp;&amp; currNode.next.element !== item) &#123;</span><br><span class="line">		currNode = currNode.next</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (currNode.next !== <span class="literal">null</span>) &#123;</span><br><span class="line">		currNode.next = currNode.next.next</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*======测试代码======*/</span></span><br><span class="line"><span class="keyword">var</span> list = <span class="keyword">new</span> linkedList();</span><br><span class="line">list.insert(<span class="string">'first'</span>, <span class="string">'head'</span>)</span><br><span class="line">list.insert(<span class="string">'second'</span>, <span class="string">'first'</span>)</span><br><span class="line">list.insert(<span class="string">'third'</span>, <span class="string">'second'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(list)</span><br><span class="line">list.find(<span class="string">'first'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(list.find(<span class="string">'first'</span>))</span><br><span class="line">list.update(<span class="string">'third'</span>, <span class="string">'three'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(list)</span><br><span class="line">list.remove(<span class="string">'second'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(list)</span><br></pre></td></tr></table></figure>

<h4 id="单链表图解："><a href="#单链表图解：" class="headerlink" title="单链表图解："></a>单链表图解：</h4><p><img src="/2020/12/20/26-自学/8.png" alt="BP"></p>
</li>
</ul>
<h3 id="13-总结-MVC-和-MVVM"><a href="#13-总结-MVC-和-MVVM" class="headerlink" title="13.总结  MVC 和 MVVM"></a>13.总结  MVC 和 MVVM</h3><h4 id="13-1-MVC"><a href="#13-1-MVC" class="headerlink" title="13.1 MVC"></a>13.1 MVC</h4><p>MVC是 Model-View-Controller 的简写。即模型-视图-控制器。M和V指的意思和MVVM中的M和V意思一样。C即 Controller 指的是页面业务逻辑。使用MVC的目的就是将 M 和 V 的代码分离。MVC 是单向通信。也就是View 跟 Model，必须通过Controller来承上启下。MVC 和MVVM的区别并不是 VM完全取代了C，只是在MVC的基础上增加了一层VM，只不过是弱化了C的概念，ViewModel 存在目的在于抽离Controller中展示的业务逻辑，而不是替代Controller，其它视图操作业务等还是应该放在Controller中实现。也就是说MVVM实现的是业务逻辑组件的重用，使开发更高效，结构更清晰，增加代码的复用性。</p>
<p><img src="/2020/12/20/26-自学/9.jpg" alt="BP"></p>
<h4 id="13-2-MVVM"><a href="#13-2-MVVM" class="headerlink" title="13.2 MVVM"></a>13.2 MVVM</h4><p>MVVM即Model-View-ViewModel的简写。即模型-视图-视图模型。模型（Model）指的是后端传递的数据。视图(View)指的是所看到的页面。视图模型(ViewModel)是mvvm模式的核心，它是连接view和model的桥梁。它有两个方向：一是将模型（Model）转化成视图(View)，即将后端传递的数据转化成所看到的页面。实现的方式是：数据绑定。二是将视图(View)转化成模型(Model)，即将所看到的页面转化成后端的数据。实现的方式是：DOM 事件监听。这两个方向都实现的，我们称之为数据的双向绑定。</p>
<p><img src="/2020/12/20/26-自学/10.jpg" alt="BP"></p>
<h4 id="13-3-总结"><a href="#13-3-总结" class="headerlink" title="13.3 总结"></a>13.3 总结</h4><p>MVVM和MVC的区别就在于，MVVM将MVC中的数据解析功能剥离了出来，将这部分的工作交给了VM来做：</p>
<p>在MVC里，View是可以直接访问Model的，所以View里会包含Model信息以及一些业务逻辑。 MVC模型关注的是Model的不变，所以在MVC模型里，Model不依赖于View，但是 View是依赖于Model的。不仅如此，因为有一些业务逻辑在View里实现了，导致要更改View也是比较困难的，至少那些业务逻辑是无法重用的。</p>
<p>MVVM在概念上是真正将页面与数据逻辑分离的模式，它把数据绑定工作放到一个JS里去实现，而这个JS文件的主要功能是完成数据的绑定，即把model绑定到UI的元素上。此外MVVM另一个重要特性双向绑定，它更方便你去同时维护页面上都依赖于某个字段的N个区域，而不用手动更新它们。</p>
<p><img src="/2020/12/20/26-自学/11.png" alt="BP"></p>
<h3 id="14-总结前端性能优化方案，前端兼容性问题"><a href="#14-总结前端性能优化方案，前端兼容性问题" class="headerlink" title="14.总结前端性能优化方案，前端兼容性问题"></a>14.总结前端性能优化方案，前端兼容性问题</h3><ol>
<li>减少 HTTP请求数<ul>
<li>从设计实现层面简化页面</li>
<li>合理设置 HTTP缓存</li>
<li>资源合并与压缩</li>
<li>CSS Sprites（精灵图）</li>
<li>Lazy Load Images（懒加载）</li>
</ul>
</li>
<li>将 js 文件置底<ul>
<li>外链脚本在加载时却会阻塞其他资源，例如在脚本加载完成之前，它后面的图片、样式以及其他脚本都处于阻塞状态，直到脚本加载完成后才会开始加载</li>
</ul>
</li>
<li>将 CSS放在 head 中</li>
<li>在js中尽量减少闭包的使用(闭包不会释放栈内存)</li>
<li>进行js和css文件的合并</li>
<li>减少对DOM的操作（主要是减少DOM的重绘和回流（重排）</li>
<li>避免重定向（301：资源永久转移/302：暂时转移）</li>
<li>交互时，数据尽可能基于json格式进行传送（处理方便，资源偏小）==》相对于XML</li>
<li>尽量减少filter属性滤镜的使用。</li>
<li>基于AJAX的get请求根据需求产生缓存（非304），但不建议使用</li>
<li>css中设置定位后，最好使用z-index改变层级，让盒子不在同一平面上，性能会提高一丢</li>
<li>避免使用iframe</li>
<li>基于script调用js的时候，使用defer或者async来异步加载</li>
<li>使用window.requestAnimationFrame（js的帧动画）代替传统的定时器动画</li>
<li>页面中数据获取采用异步编程和延迟分批加载</li>
</ol>
<p>本文从页面级以及代码级两个粒度对前端优化的各种方式做了一个总结，这些方法基本上都是前端开发人员在开发的过程中可以借鉴和实践的，除此之外，完整的前端优化还应该包括很多其他的途径，例如 CDN、 Gzip、多域名、无 Cookie服务器等等</p>
<h3 id="15-cookie的弊端"><a href="#15-cookie的弊端" class="headerlink" title="15.cookie的弊端"></a>15.cookie的弊端</h3><p>(1) Cookie数量和长度的限制</p>
<p>   1.IE6或更低版本一个站点最多20个cookie</p>
<p>   2.IE7和之后的版本一个站点可以有50个cookie。</p>
<p>   3.Firefox一个站点最多50个cookie</p>
<p>   4.chrome和Safari没有做硬性限制</p>
<p>(2) 安全性问题，因为Cookie是保存在客户端，所以很可能被用户人为篡改。</p>
<p>(3) 长度限制，每个cookie长度不能超过4KB，否则会被截掉。</p>
<p>(4) Cookie只能保存非中文的字符串。</p>
<h3 id="16-Ajax的常用方法"><a href="#16-Ajax的常用方法" class="headerlink" title="16. Ajax的常用方法"></a>16. Ajax的常用方法</h3><p>1.open方法：与服务器建立连接<br>2.send方法：向服务器发送数据<br>3.onreadystatechange：监听服务器响应的回调<br>4.responseText/responseXML：获取服务器响应的数据<br>5.readyState：ajax的状态码，4表示ajax响应已经完成</p>
<h3 id="17-js事件循环"><a href="#17-js事件循环" class="headerlink" title="17. js事件循环"></a>17. js事件循环</h3><p><img src="/2020/12/20/26-自学/12.png" alt="BP"></p>
<p>先执行主线程执行栈的内容（Promise），再执行微队列的内容（.then（）），最后执行宏队列的内容（setTimeout）的内容。如果宏队列里有为队列的任务，再入微队列。</p>
<h4 id="17-1-任务队列"><a href="#17-1-任务队列" class="headerlink" title="17.1 任务队列"></a>17.1 任务队列</h4><ul>
<li><p>JS分为同步任务和异步任务</p>
</li>
<li><p>同步任务都在主线程上执行，形成一个执行栈</p>
</li>
<li><p>主线程之外，事件触发线程管理着一个任务队列（包括 <strong>宏任务队列</strong> 和 <strong>微任务队列</strong>），只要异步任务有了运行结果，就在任务队列之中放置一个事件。</p>
</li>
<li><p>一旦执行栈中的所有同步任务执行完毕（此时JS引擎空闲），系统就会读取任务队列，将可运行的异步任务添加到可执行栈中，开始执行</p>
</li>
</ul>
<h5 id="17-1-1-宏任务"><a href="#17-1-1-宏任务" class="headerlink" title="17.1.1 宏任务"></a>17.1.1 宏任务</h5><p>task主要包含：script(整体代码)、setTimeout、setInterval、I/O、UI交互事件、postMessage、MessageChannel、setImmediate(Node.js 环境)</p>
<h5 id="17-1-2-微任务"><a href="#17-1-2-微任务" class="headerlink" title="17.1.2 微任务"></a>17.1.2 微任务</h5><p>microtask主要包含：Promise.then、MutaionObserver、process.nextTick(Node.js 环境)</p>
<p><img src="/2020/12/20/26-自学/13.png" alt="BP"></p>
<p><img src="/2020/12/20/26-自学/14.png" alt="BP"></p>
<p>我们知道Promise中的异步体现在<code>then</code>和<code>catch</code>中，所以写在Promise中的代码是被当做同步任务立即执行的。</p>
<p><strong>实际上await是一个让出线程的标志。await后面的表达式会先执行一遍，将await后面的代码加入到microtask中，然后就会跳出整个async函数来执行后面的代码。</strong></p>
<h3 id="18-手写Promise"><a href="#18-手写Promise" class="headerlink" title="18.手写Promise"></a>18.手写Promise</h3><ol>
<li>promise里的方法：resolve ， reject</li>
<li>promise的属性：value ，reason</li>
<li>.then()的方法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Promise</span> </span>&#123;</span><br><span class="line">		<span class="keyword">constructor</span>(fn) &#123;</span><br><span class="line">			<span class="keyword">this</span>.state = <span class="string">"pending"</span>;</span><br><span class="line">			<span class="keyword">this</span>.value = <span class="literal">null</span>;</span><br><span class="line">			<span class="keyword">this</span>.reason = <span class="literal">null</span>;</span><br><span class="line">			<span class="keyword">this</span>.then = <span class="function"><span class="keyword">function</span> (<span class="params">onFulfilled, onRejected</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">switch</span> (<span class="keyword">this</span>.state) &#123;</span><br><span class="line">					<span class="keyword">case</span> <span class="string">'fulfilled'</span>:</span><br><span class="line">						onFulfilled(<span class="keyword">this</span>.value)</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					<span class="keyword">case</span> <span class="string">'rejected'</span>:</span><br><span class="line">						onRejected(<span class="keyword">this</span>.reason)</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					</span><br><span class="line">					&#125;</span><br><span class="line">			&#125;;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">let</span> resolve = <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">this</span>.state == <span class="string">'pending'</span>) &#123;</span><br><span class="line">					<span class="keyword">this</span>.state = <span class="string">'fulfilled'</span>;</span><br><span class="line">					<span class="keyword">this</span>.value = value;</span><br><span class="line"></span><br><span class="line">					<span class="comment">//console.log("resolve执行了",this.value)</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">let</span> reject = <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="keyword">this</span>.state == <span class="string">'pending'</span>) &#123;</span><br><span class="line">					<span class="keyword">this</span>.state = <span class="string">'reject'</span>;</span><br><span class="line">					<span class="keyword">this</span>.reason = reason;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//执行fn函数</span></span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				fn(resolve, reject)</span><br><span class="line">			&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">				reject(e)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"22222"</span>)</span><br><span class="line">		resolve(<span class="string">"董文斌"</span>)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Promise.then()接收两个函数作为参数，</span></span><br><span class="line">	<span class="comment">// 第一个函数是Promise成功的回调</span></span><br><span class="line">	<span class="comment">// 第二个函数是失败的回调</span></span><br><span class="line">	p.then(<span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(msg,<span class="string">"AAAAAAAAAAAAAAAAA"</span>)</span><br><span class="line">	&#125;, (err) =&gt; &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(err,<span class="string">"bbbbbbbbbbbbbbbbbbbS"</span>)</span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="19-position常用的属性"><a href="#19-position常用的属性" class="headerlink" title="19.position常用的属性"></a>19.position常用的属性</h3><p>1.absolute:绝对定位，脱标，不保留原空间，相对于 static 定位以外的第一个父元素进行定位。<br>2.relative:相对定位，不脱标，原位置仍占用空间，相对于其正常位置进行定位。<br>3.fixed:绝对定位，脱标，相对于浏览器窗口进行定位。<br>4.static:静态定位，没有定位，元素出现在正常的流中。<br>5.inherit:规定应该从父元素继承 position 属性的值</p>
<h3 id="20-回流"><a href="#20-回流" class="headerlink" title="20.回流"></a>20.回流</h3><p> 文档初次加载时，HTML解析器会解析元素构建DOM树，CSS解析器将样式解析为样式结构体，之后通过DOM树和样式结构体构建渲染树，渲染树具有样式属性。然后遍历渲染树的每个渲染器将器布局到页面，最后浏览器将器绘制到页面。</p>
<p>重绘：当元素的外观或外观可见性（visibility）发生变化时会触发重绘</p>
<p>回流(重排)：render树中的部分或全部因为元素的规模尺寸、布局、隐藏等改变，需要重新计算render树。</p>
<p>​    回流时，浏览器会使渲染树中受影响的部分失效，然后重新构造这部分的render树。完成回流之后浏览器会重新布局、绘制受影响的部分到屏幕中，该过程就是重绘。所以回流必定会引起重绘，但重绘不一定引起回流</p>
<p>​    每个页面至少需要一次回流，就是页面第一次加载时。回流变化涉及到部分页面（或整个页面）的布局。一个元素的回流导致其所有子元素以及DOM中紧随其后的祖先元素和其子元素都发生回流。</p>
<p>是什么导致回流呢？</p>
<p>​    （1） 调整窗口大小—-发生resize事件时</p>
<p>​    （2） 元素位置改变</p>
<p>​    （3） 元素尺寸改变——边距、填充、边框、高度和宽度</p>
<p>​    （4） 内容改变——比如文本字体或图片大小改变而引起的宽度和高度改变</p>
<p>​    （5） 页面渲染初始化</p>
<p>​    （6） 添加或删除可见的DOM元素</p>
<p>聪明的浏览器</p>
<p>​     很多浏览器都会优化repaint和reflow操作，浏览器会维护1个队列，把所有会引起回流、重绘的操作放入这个队列，等队列中的操作到了一定的数量或者到了一定的时间间隔，浏览器就会把flush队列，进行一个批处理。这样就会让多次的回流、重绘变成一次回流重绘。 虽然有了浏览器的优化，但有时候我们写的一些代码可能会强制浏览器提前flush队列，比如设置width，offsetTop，scrollTop,clientTop精确值时，这样浏览器的优化可能就起不到作用了。</p>
<p>避免回流和重绘方法</p>
<p>​     减少回流、重绘其实就是需要减少对render tree的操作，并减少对一些style信息的请求，尽量利用好浏览器的优化策略</p>
<p>   （1） 避免操作DOM，创建一个documentFragment或div，在它上面应用所有DOM操作，最后再把它添加到window.document。也可以在一个display:none的元素上进行操作，最终把它显示出来。因为display:none上的DOM操作不会引发回流和重绘。   </p>
<p>   （2） 让要操作的元素进行”离线处理”，处理完后一起更新，这里所谓的”离线处理”即让元素不存在于render tree中。如读取offsetLeft等属性。</p>
<p>   （3） 尽可能在DOM树的末端改变class ，可以限制回流的范围，使其影响尽可能少的节点。</p>
<p>   （4） 将需要多次回流的元素position属性设为absolute或fixed，这样该元素就会脱离文档流，它的变化不会影响其他元素变化。比如动画效果应用到position属性为absolute或fixed的元素上。</p>
<p>   （5） 避免使用table布局，在布局完全建立之前，table需要很多关口，table是可以影响之前已经进入的DOM元素的显示的元素。即使一些小的变化和会导致table中所有其他节点回流。</p>
<p>   （6） 避免使用css的JavaScript表达式，该规则较过时，但是个好主意。因为每次都需要重新计算文档，或部分文档、回流。</p>
<h3 id="21-React和Vue有哪些不同，说说你对这两个框架的看法？"><a href="#21-React和Vue有哪些不同，说说你对这两个框架的看法？" class="headerlink" title="21.React和Vue有哪些不同，说说你对这两个框架的看法？"></a>21.React和Vue有哪些不同，说说你对这两个框架的看法？</h3><h4 id="1-React和Vue不同点"><a href="#1-React和Vue不同点" class="headerlink" title="1.React和Vue不同点"></a>1.React和Vue不同点</h4><p>1.Vue和React采用的模式不一样</p>
<p>React严格上只针对MVC的view层，数据流向是单项的；Vue则是MVVM模式，需要创建ViewModel，实现了数据的双向绑定</p>
<p>2.组件写法不一样</p>
<p>React推荐的做法是 JSX + inline style, 也就是把HTML和CSS全都写进JavaScript了,即’all in js’; Vue推荐的做法是webpack+vue-loader的单文件组件格式，即html、css、js写在同一个文件，在写html的时候使用的是vue的指令。</p>
<p>3.路由和状态管理解决方案</p>
<p>React提供了一种称为Flux / Redux架构的创新解决方案，它代表单向数据流，是著名MVC架构的替代方案。Vue使用Vuex这个更高级架构，它集成到Vue中并提供无与伦比的体验。</p>
<p>4.建筑工具</p>
<p>React和Vue都有一个非常好的开发环境。只需很少或没有配置，您就可以创建应用程序，使您能够使用最新的实践和模板。在React中，有一个Create React App（CRA），在Vue中，它是vue-cli。</p>
<p>5.监听数据变化的原理不同</p>
<p>React 组件中的 state 对象不可以直接修改，需要使用 setState 方法来更新状态，然后内部会触发 forceUpdate 方法更新页面(forceUpdate是否会执行会参照shouldComponentUpdate方法的返回值或者比较对象的引用地址是否一致)。</p>
<p>Vue组件中的data可以直接修改，Vue是通过数据劫持(Object.defindProperty)+观察者模式来监听数据变化从而更新页面。</p>
<p>6.重新渲染和优化</p>
<p>当组件的状态发生变化时，React的机制会触发整个组件树的重新呈现。您可能需要使用额外的属性(shouldComponentUpdate)来避免不必要地重新渲染子组件。</p>
<p>但Vue提供了优化的重新渲染，Vue会跟踪每一个组件的依赖关系,不需要重新渲染整个组件树。</p>
<p>看法</p>
<p>实际开发中，如果想要简单、快速、灵活的开发中小型SPA单页面应用程序，推荐使用Vue，因为它容易上手。而React适用于大规模应用程序和移动应用程序，它由Facebook团队提供支持，包含许多用例、解决方案、资源和项目。</p>
<h3 id="22-路由的理解，实现的原理是什么？"><a href="#22-路由的理解，实现的原理是什么？" class="headerlink" title="22.路由的理解，实现的原理是什么？"></a>22.路由的理解，实现的原理是什么？</h3><p>前端路由顾名思义就是一个前端不同页面的状态管理器，可以不向后台发送请求直接通过前端技术实现多个页面的效果。vue中的vue-router,react中的react-router。</p>
<p>前端路由主要有两种模式：history模式 hash模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1.hash模式的原理(url带有#号部分)：</span><br><span class="line">    在vue-router.js的2.8版本之前，在路由的hash部分发生了任何变化，都会执行window.onhashchange方法，在这个方法内部我们可以根据当前匹配到的hash去加载对应的组件</span><br><span class="line">    在vue-router.js的2.8版本之后，内部使用window.history.pushState来完成相应的功能</span><br><span class="line">    hash模式的特点：在切换路由的时候，不会向服务器发送请求，但是刷新网页的时候，此时会向服务器发送请求，在向服务器发送请求的时候，hash部分的信息是不会发送到服务器的，所以此时刷新网页没有问题</span><br><span class="line">            </span><br><span class="line">   localhost:8888        ---&gt;加载spa单页面应用程序</span><br><span class="line">   localhost:8888#index  ---&gt;当localhost:8888切换到localhost:8888#index 没有发送请求</span><br><span class="line">   localhost:8888#login  ---&gt;当localhost:8888#index切换到localhost:8888#login 没有发送请求     </span><br><span class="line">   localhost:8888#login  ---&gt;当我们直接刷新浏览器的时候，此时会向服务器发送请求，但是我们请求url的中hash部分不会提交到服务器，所以真正的请求地址是localhost:8888，就相当于此时重新去加载spa单页面应用程序</span><br><span class="line"></span><br><span class="line">2.history模式的原理(url中通过/表示路径)</span><br><span class="line">    内部使用window.history.pushState来处理url的变化，切换对应的组件</span><br><span class="line">    history模式的特点：在切换路由的时候，不会向服务器发送请求，但是当刷新网页的时候，此时会向服务器发送请求，如果后端没有对应的接口与此匹配，此时会报资源找不到的错误</span><br><span class="line">history模式一般情况下不能刷新网页</span><br><span class="line"></span><br><span class="line">    localhost:8888    ---&gt;加载spa单页面应用程序</span><br><span class="line">    localhost:8888/index ---&gt;当localhost:8888切换到localhost:8888/index没有发送请求</span><br><span class="line">    localhost:8888/login ---&gt;当localhost:8888/index切换到localhost:8888/login没有发送请求</span><br><span class="line"></span><br><span class="line">    localhost:8888/login  ---&gt;当我们直接刷新浏览器的时候，此时会向服务器发送请求，请求地址就是localhost:8888/login，所以如果服务器没有对应的/login接口，那么此时会报404错误</span><br></pre></td></tr></table></figure>

<h3 id="23-axios、fetch与ajax有什么区别？"><a href="#23-axios、fetch与ajax有什么区别？" class="headerlink" title="23.axios、fetch与ajax有什么区别？"></a>23.axios、fetch与ajax有什么区别？</h3><h4 id="ajax："><a href="#ajax：" class="headerlink" title="ajax："></a>ajax：</h4><p>JQuery ajax 是对原生XHR的封装，除此以外还增添了对JSONP的支持。经过多年的更新维护，真的已经是非常的方便了，优点无需多言</p>
<h4 id="axios"><a href="#axios" class="headerlink" title="axios:"></a>axios:</h4><p>是一个基于Promise的请求库，用于浏览器和nodejs中，本质上浏览器的axios也是对原生XHR的封装，只不过它是Promise的实现版本，符合最新的ES规范，它本身具有以下特征</p>
<h4 id="fetch"><a href="#fetch" class="headerlink" title="fetch:"></a>fetch:</h4><p>fetch号称是AJAX的替代品，是在ES6出现的，使用了ES6中的promise对象。Fetch是基于promise设计的，Fetch的代码结构比起ajax简单多了，参数有点像jQuery ajax。但是一定记住fetch不是ajax的进一步封装，而是原生js，没有使用XMLHttpRequest对象。</p>
</router-link></router-link></router-link>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/21/27-拓展-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/21/27-拓展-6/" itemprop="url">27.拓展-6</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-21T20:25:28+08:00">
                2020-01-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-严格模式"><a href="#1-严格模式" class="headerlink" title="1.严格模式"></a>1.严格模式</h3><p>use strict 意思是使用严格模式，使用严格模式，一些不规范的语法将不再支持</p>
<p>设立”严格模式”的目的，主要有以下几个：</p>
<p>　　- 消除 Javascript 语法的一些不合理、不严谨之处，减少一些怪异行为;</p>
<p>　　- 消除代码运行的一些不安全之处，保证代码运行的安全；</p>
<p>　　- 提高编译器效率，增加运行速度；</p>
<p>　　- 为未来新版本的 Javascript 做好铺垫。</p>
<p>进入”严格模式”的标志，是下面这行语句：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">　　"use strict"</span>;</span><br></pre></td></tr></table></figure>

<p>严格模式的一些特点：</p>
<ul>
<li><p>使调试更加容易。那些被忽略或默默失败了的代码错误，会产生错误或抛出异常，因此尽早提醒你代码中的问题，你才能更快地指引到它们的源代码。(实时显示错误代码，方便调试)</p>
</li>
<li><p>防止意外的全局变量（不支持隐式全局变量）。</p>
</li>
<li><p>禁止this关键字指向全局对象。在严格模式下，普通函数中的this默认是undefined，不再指向window；</p>
</li>
<li><p>对象不能有重名的属性，函数不能有重名的参数</p>
</li>
<li><p>使eval() 更安全。在严格模式下，新增了eval作用域。</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line">   <span class="keyword">var</span> webName = <span class="string">"蚂蚁部落"</span>;</span><br><span class="line"><span class="built_in">eval</span>(<span class="string">"var webName ='softwhy.com'; </span></span><br><span class="line"><span class="string">   console.log(webName)"</span>); <span class="comment">//softwhy.com</span></span><br><span class="line">   <span class="built_in">console</span>.info(webName); <span class="comment">//蚂蚁部落</span></span><br></pre></td></tr></table></figure>


<ul>
<li><p>严格模式下，函数的caller、arguments等信息都不可以获取</p>
</li>
<li><p>严格模式下，不支持8进制表示法</p>
</li>
<li><p>严格模式新增了一些保留字：implements, interface, let, package, private, protected, public, static, yield</p>
</li>
<li><p>严格模式下无法删除变量。只有configurable设置为true的对象属性，才能被删除。</p>
</li>
</ul>
<p>友情链接：<a href="http://www.ruanyifeng.com/blog/2013/01/javascript_strict_mode.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2013/01/javascript_strict_mode.html</a></p>
<h3 id="2-Js内存管理"><a href="#2-Js内存管理" class="headerlink" title="2.  Js内存管理"></a>2.  Js内存管理</h3><pre><code>js 内存是由 GC 自动管理的</code></pre><h4 id="2-1-内存生命周期："><a href="#2-1-内存生命周期：" class="headerlink" title="2.1 内存生命周期："></a>2.1 内存生命周期：</h4><ol>
<li><p>分配你所需要的内存</p>
</li>
<li><p>使用分配到的内存（读、写）</p>
</li>
<li><p>不需要时将其释放\归还</p>
<p><img src="/2020/01/21/27-拓展-6/1.png" alt="BP"></p>
</li>
</ol>
<p>js中垃圾收集机制原理：垃圾收集器会按照固定的时间间隔（或代码执行中预定的收集时间）， 周期性地执行这一操作：找出那些不再继续使用的变量，然后释放其占用的内存。</p>
<h4 id="2-2-引用计数法"><a href="#2-2-引用计数法" class="headerlink" title="2.2 引用计数法"></a>2.2 引用计数法</h4><h5 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h5><p>这是最初级的垃圾收集算法。此算法把“对象是否不再需要”简化定义为“对象有没有其他对象引用到它”。如果没有引用指向该对象（零引用），对象将被垃圾回收机制回收。</p>
<p>当JavaScript代码生成一个新的内存驻留项时（比如一个对象或函数），系统就会为这个项留出一块内存空间。因为这个对象可能会被传递给很多函数，并且会被指定给很多变量，所以很多代码都会指向这个对象的内存空间。JavaScript会跟踪这些指针，当最后一个指针废弃不用时，这个对象占用的内存会被释放。</p>
<h5 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h5><p>​    -内存泄漏问题(内存泄漏是指程序中己动态分配的堆内存由于某种原因程序未释放或无法释放，造成系统内存的浪费，导致程序运行速度减慢甚至系统崩溃等严重后果)</p>
<p>​    -循环引用问题</p>
<h4 id="2-3-标记清除法"><a href="#2-3-标记清除法" class="headerlink" title="2.3 标记清除法"></a>2.3 标记清除法</h4><h5 id="原理：-1"><a href="#原理：-1" class="headerlink" title="原理："></a>原理：</h5><p>这个算法把“对象是否不再需要”简化定义为“对象是否可以获得”。</p>
<h5 id="缺点：-1"><a href="#缺点：-1" class="headerlink" title="缺点："></a>缺点：</h5><p>那些无法从根对象查询到的对象都将被清除。</p>
<h4 id="2-4-步骤组成："><a href="#2-4-步骤组成：" class="headerlink" title="2.4 步骤组成："></a>2.4 步骤组成：</h4><ul>
<li><p>​    垃圾回收器构建”roots”列表。Roots通常是代码中保留引用的全局变量。在JavaScript中，”window”对象可以作为 root 全局变量示例。</p>
</li>
<li><p>​    所有的”roots”被检查并标记为active（即不是垃圾）。所有的children也被递归检查。从”root”能够到达的一切都不被认为是垃圾。</p>
</li>
<li><p>​    所有为不被标记为active的内存可以被认为是垃圾了。收集器限制可以释放这些内存并将其返回到操作系统。</p>
</li>
</ul>
<h3 id="3-渲染进程包含的线程"><a href="#3-渲染进程包含的线程" class="headerlink" title="3. 渲染进程包含的线程"></a>3. 渲染进程包含的线程</h3><h5 id="1-GUI渲染线程"><a href="#1-GUI渲染线程" class="headerlink" title="1. GUI渲染线程"></a>1. GUI渲染线程</h5><p> - 负责渲染浏览器界面，解析HTML，CSS，构建DOM树和RenderObject树，布局和绘制等。</p>
<p> - 当界面需要重绘（Repaint）或由于某种操作引发回流(reflow)时，该线程就会执行</p>
<p> - 注意，GUI渲染线程与JS引擎线程是互斥的，当JS引擎执行时GUI线程会被挂起（相当于被冻结了），GUI更新会被保存在一个队列中等到JS引擎空闲时立即被执行。</p>
<h5 id="2-JS引擎线程"><a href="#2-JS引擎线程" class="headerlink" title="2. JS引擎线程"></a>2. JS引擎线程</h5><p> - 也称为JS内核，负责处理Javascript脚本程序。（例如V8引擎）</p>
<p> - JS引擎线程负责解析Javascript脚本，运行代码。</p>
<p> - JS引擎一直等待着任务队列中任务的到来，然后加以处理，一个Tab页（renderer进程）中无论什么时候都只有一个JS线程在运行JS程序</p>
<p> - 同样注意，GUI渲染线程与JS引擎线程是互斥的，所以如果JS执行的时间过长，这样就会造成页面的渲染不连贯，导致页面渲染加载阻塞。</p>
<h5 id="3-事件触发线程"><a href="#3-事件触发线程" class="headerlink" title="3. 事件触发线程"></a>3. 事件触发线程</h5><p> - 用来控制事件循环（可以理解，JS引擎自己都忙不过来，需要浏览器另开线程协助）</p>
<p> - 当JS引擎执行代码块如setTimeOut时（也可是鼠标点击、AJAX异步请求等），会将对应任务添加到事件线程中</p>
<p> - 当对应的事件符合触发条件被触发时，该线程会把事件添加到待处理队列的队尾，等待JS引擎的处理</p>
<p> - 注意，由于JS的单线程关系，所以这些待处理队列中的事件都得排队等待JS引擎处理（当JS引擎空闲时才会去执行）</p>
<h5 id="4-定时触发器线程"><a href="#4-定时触发器线程" class="headerlink" title="4. 定时触发器线程"></a>4. 定时触发器线程</h5><p> - 浏览器定时计数器并不是由JavaScript引擎计数的（因为JavaScript引擎是单线程的, 如果处于阻塞线程状态就会影响记计时的准确）</p>
<p> - 因此通过单独线程来计时并触发定时（计时完毕后，添加到事件队列中，等待JS引擎空闲后执行）</p>
<p> - 注意，W3C在HTML标准中规定，规定要求setTimeout中低于4ms的时间间隔算为4ms。</p>
<h5 id="5-异步http请求线程"><a href="#5-异步http请求线程" class="headerlink" title="5. 异步http请求线程"></a>5. 异步http请求线程</h5><p> - 在XMLHttpRequest在连接后是通过浏览器新开一个线程请求</p>
<p> - 将检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件，将这个回调再放入事件队列中。再由JavaScript引擎执行。</p>
<h3 id="4-http协议的缓存"><a href="#4-http协议的缓存" class="headerlink" title="4. http协议的缓存"></a>4. http协议的缓存</h3><h4 id="4-1-缓存的类型"><a href="#4-1-缓存的类型" class="headerlink" title="4.1 缓存的类型"></a>4.1 缓存的类型</h4><ol>
<li><p>页面缓存</p>
<p>页面缓存是将动态页面直接生成静态的页面放在服务器端，用户调取相同页面时，静态页面将直接下载到客户端，不再需要通过程序的运行和数据库的访问，大大节约了服务器的负载。每次访问页面时，会检测相应的缓存页面是否存在，若不存在，则连接数据库得到数据渲染页面并生成缓存页面文件，这样下次访问的页面文件就发挥作用了。</p>
</li>
<li><p>浏览器缓存</p>
<p>浏览器缓存机制，主要就是 HTTP 协议的缓存机制(如 Expires;Cache-control等),还包括非HTTP协议定义的缓存机制，如使用HTML Meta标签。</p>
</li>
<li><p>数据缓存</p>
<p>数据缓存是最灵活的一种缓存。但是需要在代码中额外的步骤才能使用。当所有用户都在发布信息的时候，用户发布信息后想立即看到这些数据，就需要数据缓存来实现。</p>
<p>目前的实现分为两种方式：<br> 1.内容缓存：将缓存数据存放在服务器的内存空间中。<br> 2.文件缓存：缓存数据存放在服务器的硬盘空间中</p>
</li>
<li><p>数据缓存</p>
<p>数据库的缓存一般由数据库提供，可以对表建立高速缓存。数据库中，用户可能多次执行相同的查询语句，为了提高查询效率，数据库会在内存划分一个专门的区域，用来存放用户最近执行的查询，这块区域就是缓存。</p>
</li>
<li><p>反向代理缓存</p>
<p>就像代理服务器缓存和浏览器缓存一样，我们同样可以讲内容缓存在反向代理服务器上，所有缓存机制的实现仍然采用HTTP/1.1协议。</p>
</li>
</ol>
<h4 id="4-2-程序的运行具有局部性特征"><a href="#4-2-程序的运行具有局部性特征" class="headerlink" title="4.2 程序的运行具有局部性特征"></a>4.2 程序的运行具有局部性特征</h4><p> 时间局部性：一个数据被访问过之后，可能很快会被再次访问到；<br> 空间局部性：一个数据被访问时，其周边的数据也有可能被访问到</p>
<h4 id="4-3-缓存应用特点"><a href="#4-3-缓存应用特点" class="headerlink" title="4.3 缓存应用特点"></a>4.3 缓存应用特点</h4><p> 提高cache缓存命中，<br> 增强热区局部性；<br> 改善提高时效性：<br> 在缓存空间耗尽时使用LRU（最近最少使用算法）；<br> 过期：缓存清理</p>
<h3 id="5-闭包"><a href="#5-闭包" class="headerlink" title="5. 闭包"></a>5. 闭包</h3><h4 id="5-1-概念："><a href="#5-1-概念：" class="headerlink" title="5.1 概念："></a>5.1 概念：</h4><p>定义在一个函数内部的函数，静态保存所有了父级作用域的内部函数。</p>
<h4 id="5-2-用途："><a href="#5-2-用途：" class="headerlink" title="5.2 用途："></a>5.2 用途：</h4><ol>
<li><p>缓存，延长变量的作用域链</p>
</li>
<li><p>面向对象中的对象</p>
</li>
<li><p>实现封装，防止变量跑到外层作用域中，发生命名冲突</p>
</li>
</ol>
<h4 id="5-3-危害："><a href="#5-3-危害：" class="headerlink" title="5.3 危害："></a>5.3 危害：</h4><ol>
<li><p>闭包有一个非常严重的问题，那就是内存浪费问题，这个内存浪费不仅仅因为它常驻内存，更重要的是，对闭包的使用不当的话会内存泄漏。解决方法是，在退出函数之前，将不使用的局部变量全部删除。</p>
</li>
<li><p>性能问题，使用闭包时，会涉及到跨作用域访问，由于闭包内部变量优先级高于外部变量，所以多查找作用域链中的一个层次，就会在一定程度上影响查找速度。</p>
</li>
</ol>
<h3 id="6-多页页面通信"><a href="#6-多页页面通信" class="headerlink" title="6.  多页页面通信"></a>6.  多页页面通信</h3><p>·         localStorage</p>
<p>·         cookie</p>
<p>·         postMessage API支持两个页面跨域；只能传递字符串数据；参考window.open；</p>
<p>·         url传参</p>
<h3 id="7-箭头函数和普通函数"><a href="#7-箭头函数和普通函数" class="headerlink" title="7.  箭头函数和普通函数"></a>7.  箭头函数和普通函数</h3><p>- 普通function的提升在变量提升之前，箭头函数没有函数提升</p>
<p>- 箭头函数没有this,super，函数体内部的this对象就是定义的时候所在的对象而不是使用时所在的对象</p>
<p>- 箭头函数没有arguments对象，如果要用，可以使用rest参数</p>
<p>- 箭头函数不能作为构造函数，不能被new</p>
<p>- 箭头函数没有原型（prototype）</p>
<p>- 不能通过call、bind、apply方法修改箭头函数中的this</p>
<p>- 不可以使用yield命令，因此箭头函数不能做Generator函数</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/13/25-Angular的使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/13/25-Angular的使用/" itemprop="url">25.Angular的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-13T00:14:17+08:00">
                2019-12-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-Angular"><a href="#1-Angular" class="headerlink" title="1.  Angular"></a>1.  Angular</h2><p>Angular、React、Vue并称前端三大框架。</p>
<p>Vue 数据变动 —&gt;页面变动   ： 数据劫持+发布订阅模式</p>
<p>React 数据变动  –&gt;页面变动 :  setDate()    触发forceUpate</p>
<p>Angular  数据变动 –&gt;页面变动 ： 脏检查</p>
<h2 id="2-Angular脚手架的使用"><a href="#2-Angular脚手架的使用" class="headerlink" title="2. Angular脚手架的使用"></a>2. Angular脚手架的使用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>确保本地环境   node\python</span><br><span class="line"><span class="number">2.</span> npm install -g @angular/cli</span><br><span class="line"><span class="number">3.</span> ng <span class="keyword">new</span>  项目名字   </span><br><span class="line">  最好项目名字+项目路径不要有中文</span><br><span class="line"><span class="number">4.</span> ng serve --port <span class="number">4201</span>    <span class="comment">//进入项目，启动项目</span></span><br></pre></td></tr></table></figure>

<p><img src="/2019/12/13/25-Angular的使用/1.png" alt="BP"></p>
<h2 id="3-组件的创建"><a href="#3-组件的创建" class="headerlink" title="3.  组件的创建"></a>3.  组件的创建</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ng generate component foo</span><br><span class="line">ng generate component /home/login</span><br><span class="line"></span><br><span class="line">在app.component.html中使用上面创建的组件</span><br></pre></td></tr></table></figure>

<h2 id="4-插值表达式"><a href="#4-插值表达式" class="headerlink" title="4.  插值表达式"></a>4.  插值表达式</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;login works!&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;p&gt;login &#123;&#123;message&#125;&#125;&lt;/</span>p&gt;</span><br><span class="line">&lt;p [innerHTML]=<span class="string">"message"</span>&gt;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;p [innerHTML]="'message'"&gt;&lt;/</span>p&gt;</span><br><span class="line"></span><br><span class="line">&lt;img src=<span class="string">"&#123;&#123; heroImageUrl &#125;&#125;"</span> alt=<span class="string">""</span>&gt;</span><br><span class="line">&lt;img [src]=<span class="string">"heroImageUrl"</span> alt=<span class="string">""</span>&gt;</span><br><span class="line">&lt;img bind-src=<span class="string">"heroImageUrl"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;button [disabled]=<span class="string">"isButtonDisabled"</span>&gt;Button&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;p&gt;&#123;&#123;name.split('').reverse().join("-")&#125;&#125;&lt;/</span>p&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-常用指令"><a href="#5-常用指令" class="headerlink" title="5.  常用指令"></a>5.  常用指令</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-<span class="number">-1.</span>通过ngFor来遍历数组，可以通过<span class="keyword">let</span> i=index来获取数组中的序号--&gt;</span><br><span class="line">&lt;p&gt;Heroes:&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;ul&gt;</span></span><br><span class="line"><span class="regexp">    &lt;li [id]="'list-' + hero" *ngFor="let hero of heroes;let i=index"&gt;</span></span><br><span class="line"><span class="regexp">        &#123;&#123;i&#125;&#125;----&gt; &#123;&#123;hero&#125;&#125;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;!--2.通过ngIf来做条件判断--&gt;</span></span><br><span class="line"><span class="regexp">&lt;div *ngIf="heroes.length&gt;3; else templateName"&gt;有很多英雄&lt;/</span>div&gt;</span><br><span class="line">&lt;ng-template #templateName&gt;没有很多英雄&lt;<span class="regexp">/ng-template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;!--3.通过isSpecial变量来控制div是否有hidden样式：添加class来实现的--&gt;</span></span><br><span class="line"><span class="regexp">&lt;div [class.hidden]="!isSpecial"&gt;Show with class&lt;/</span>div&gt;</span><br><span class="line">&lt;div [<span class="keyword">class</span>.hidden]=<span class="string">"isSpecial"</span>&gt;Hide <span class="keyword">with</span> <span class="keyword">class</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;!--4.通过isSpecial变量来控制div的style的display样式：添加行内样式来实现的--&gt;</span></span><br><span class="line"><span class="regexp">&lt;div [style.display]="isSpecial?'block':'none'"&gt;Show with class&lt;/</span>div&gt;</span><br><span class="line">&lt;div [style.display]=<span class="string">"isSpecial?'none':'block'"</span>&gt;Hide <span class="keyword">with</span> <span class="keyword">class</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;!--5.通过ngSwitch来控制多个条件下显示的内容--&gt;</span></span><br><span class="line"><span class="regexp">&lt;div [ngSwitch]="currentHero"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div *ngSwitchCase="'Windstorm'"&gt;Windstorm&lt;/</span>div&gt;</span><br><span class="line">    &lt;div *ngSwitchCase=<span class="string">"'Bombasto'"</span>&gt;Bombasto&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div *ngSwitchCase="'Magneta'"&gt;Magneta&lt;/</span>div&gt;</span><br><span class="line">    &lt;div *ngSwitchDefault&gt;Tornado&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure>

<h2 id="6-自定义指令"><a href="#6-自定义指令" class="headerlink" title="6.  自定义指令"></a>6.  自定义指令</h2><p>当angular给我们提供的指令不够用的时候，不能满足我们需求的时候就需要自定义指令了。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ng generate directive highlight</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; Directive, ElementRef &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Directive</span>(&#123;</span><br><span class="line">  selector: <span class="string">'[appHighlight]'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> HighlightDirective &#123;</span><br><span class="line">  <span class="comment">//el: 绑定指令的那个页面元素</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">el: ElementRef</span>) &#123;</span><br><span class="line">    el.nativeElement.style.backgroundColor = <span class="string">'yellow'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">使用自定义指令：</span><br><span class="line"> &lt;p appHighlight&gt;Highlight me!&lt;<span class="regexp">/p&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="7-事件处理"><a href="#7-事件处理" class="headerlink" title="7  事件处理"></a>7  事件处理</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!---</span><br><span class="line"><span class="number">1.</span>绑定属性  &lt;img src=<span class="string">"img"</span>&gt;&lt;<span class="regexp">/img&gt;   &lt;p bind-src="img"&gt;&lt;/</span>p&gt;</span><br><span class="line"><span class="number">2.</span>绑定事件  &lt;p (click)=<span class="string">"save()"</span>&gt;&lt;<span class="regexp">/p&gt;    &lt;p on-click="save()"&gt;&lt;/</span>p&gt;</span><br><span class="line"><span class="number">3.</span>js表达式  &lt;p&gt;&#123;&#123; msg &#125;&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">4.*ngFor</span></span><br><span class="line"><span class="regexp"> *ngIf</span></span><br><span class="line"><span class="regexp"> &lt;p [ngSwitch]=""&gt;</span></span><br><span class="line"><span class="regexp">    &lt;li *ngSwitchCase="xx"&gt;&lt;/</span>li&gt;</span><br><span class="line"> &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">--&gt;</span></span><br><span class="line"><span class="regexp">foo页面中的&#123;&#123;message&#125;&#125;</span></span><br><span class="line"><span class="regexp">&lt;button (click)="onSave()"&gt;Save&lt;/</span>button&gt;</span><br><span class="line">&lt;button (click)=<span class="string">"onSave2($event)"</span>&gt;On Save&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;button (click)="onSave3($event,'heloworld')"&gt;On Save&lt;/</span>button&gt;</span><br><span class="line">&lt;button (click)=<span class="string">"message = '哈哈哈'"</span>&gt;内联事件处理&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;button on-click="onSave()"&gt;On Save&lt;/</span>button&gt;</span><br></pre></td></tr></table></figure>

<h2 id="8-双向绑定"><a href="#8-双向绑定" class="headerlink" title="8.  双向绑定"></a>8.  双向绑定</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>	需要在app.module.ts文件中引入FormsModule</span><br><span class="line"><span class="comment">//引入双向绑定的模块</span></span><br><span class="line"><span class="keyword">import</span> &#123; FormsModule &#125; <span class="keyword">from</span> <span class="string">'@angular/forms'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//声明App依赖的模块</span></span><br><span class="line">  imports: [</span><br><span class="line">    BrowserModule,</span><br><span class="line">    AppRoutingModule,</span><br><span class="line">    FormsModule</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>	在需要双向绑定的表单元素中使用[(ngModel)]指令</span><br><span class="line">&lt;input <span class="keyword">type</span>=<span class="string">"text"</span> [(ngModel)]=<span class="string">"message"</span>&gt;</span><br></pre></td></tr></table></figure>



<h2 id="9-class和style的绑定"><a href="#9-class和style的绑定" class="headerlink" title="9.class和style的绑定"></a>9.class和style的绑定</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-<span class="number">-1.</span>样式的绑定--&gt;</span><br><span class="line">&lt;p <span class="keyword">class</span>=<span class="string">"big bold red"</span>&gt;p文字&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;!--[class]需要绑定一个变量或者字符串--&gt;</span></span><br><span class="line"><span class="regexp">&lt;p [class]="'big'"&gt;p文字2&lt;/</span>p&gt;</span><br><span class="line">&lt;p [<span class="keyword">class</span>]=<span class="string">"['big','bold']"</span>&gt;p文字<span class="number">3</span>&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;div [class.big]="true"&gt;The class binding is special&lt;/</span>div&gt;</span><br><span class="line"></span><br><span class="line">&lt;p [ngClass]=<span class="string">"&#123;'red':true,'bold':true&#125;"</span>&gt;p文字<span class="number">4</span>&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;!--2.style绑定--&gt;</span></span><br><span class="line"><span class="regexp">&lt;button [style.background-color]="true ? 'cyan': 'grey'" &gt;Save&lt;/</span>button&gt;</span><br><span class="line">&lt;button [style.backgroundColor]=<span class="string">"true ? 'cyan': 'grey'"</span> &gt;Save&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;button [style.font-size.em]="true ? 3 : 1" &gt;Big&lt;/</span>button&gt;</span><br><span class="line">&lt;button [style.font-size.%]=<span class="string">"true ? 150 : 50"</span> &gt;Small&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;div [ngStyle]="&#123;'color':'red',backgroundColor:'yellow'&#125;"&gt;这是div&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure>



<h2 id="10-过滤器的使用"><a href="#10-过滤器的使用" class="headerlink" title="10.  过滤器的使用"></a>10.  过滤器的使用</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Angular内置的一些过滤器</span></span><br><span class="line"></span><br><span class="line">&lt;!--过滤器--&gt;</span><br><span class="line">&lt;!-<span class="number">-1.</span>处理时间的过滤器--&gt;</span><br><span class="line">&lt;h1&gt;&#123;&#123;currentTime | date:<span class="string">'yyyy-MM-dd HH:mm:ss'</span>&#125;&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;!--2.处理货币符号的过滤器--&gt;</span></span><br><span class="line"><span class="regexp">&lt;h1&gt;&#123;&#123;123 | currency &#125;&#125;&lt;/</span>h1&gt; </span><br><span class="line">&lt;h1&gt;&#123;&#123;<span class="number">123</span> | currency:<span class="string">'￥'</span> &#125;&#125;&lt;<span class="regexp">/h1&gt; </span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;!--3.把对象转换为json字符串--&gt;</span></span><br><span class="line"><span class="regexp">&lt;h1&gt;&#123;&#123;&#123;name:'jack'&#125; | json&#125;&#125;&lt;/</span>h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-<span class="number">-4.</span>将小数四舍五入，默认保留<span class="number">3</span>位小数--&gt;</span><br><span class="line">&lt;h1&gt;&#123;&#123;<span class="string">'123.134545'</span>| <span class="built_in">number</span>&#125;&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;!--5.转换为大小写的过滤器--&gt;</span></span><br><span class="line"><span class="regexp">&lt;h1&gt;&#123;&#123; 'Hello' | uppercase  &#125;&#125; &lt;/</span>h1&gt;</span><br><span class="line">&lt;h1&gt;&#123;&#123;<span class="string">'Hello'</span> | lowercase&#125;&#125; &lt;<span class="regexp">/h1&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="11-自定义过滤器"><a href="#11-自定义过滤器" class="headerlink" title="11.  自定义过滤器"></a>11.  自定义过滤器</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>	使用如下命令生成一个过滤器</span><br><span class="line">ng generate pipe msgformat</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>	重写msgformat.pipe.ts文件</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> MsgformatPipe <span class="keyword">implements</span> PipeTransform &#123;</span><br><span class="line">  <span class="comment">//value就是要过滤的内容</span></span><br><span class="line">  transform(value: <span class="built_in">string</span>, ...args: unknown[]): unknown &#123;</span><br><span class="line">    <span class="keyword">return</span> value.split(<span class="string">""</span>).reverse().join(<span class="string">""</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>	在指定页面中使用自定义的过滤器</span><br><span class="line">&lt;!--使用自定义过滤器--&gt;</span><br><span class="line">&lt;h1&gt;&#123;&#123;<span class="string">'zhangsan'</span> | msgformat&#125;&#125;&lt;<span class="regexp">/h1&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="12-路由的使用"><a href="#12-路由的使用" class="headerlink" title="12.  路由的使用"></a>12.  路由的使用</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>	在app.module.ts文件中引入路由模块</span><br><span class="line"><span class="comment">//引入路由模块</span></span><br><span class="line"><span class="keyword">import</span> &#123; RouterModule, Routes &#125; <span class="keyword">from</span> <span class="string">'@angular/router'</span>;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>	在app.module.ts文件中写路由配置</span><br><span class="line"><span class="comment">//声明路由</span></span><br><span class="line"><span class="keyword">const</span> appRoutes: Routes = [</span><br><span class="line">  &#123; path: <span class="string">'foo'</span>, component: FooComponent &#125;,</span><br><span class="line">  <span class="comment">//路由路径、组件和路由数据</span></span><br><span class="line">  &#123; path: <span class="string">'login/:id'</span>, component: LoginComponent ,data: &#123; title: <span class="string">'login信息'</span> &#125;&#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>	把路由配置信息放到imports中</span><br><span class="line"><span class="comment">//声明App依赖的模块</span></span><br><span class="line">  imports: [</span><br><span class="line">    RouterModule.forRoot(</span><br><span class="line">      appRoutes</span><br><span class="line">    ),</span><br><span class="line">    BrowserModule,</span><br><span class="line">    AppRoutingModule,</span><br><span class="line">    FormsModule</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>	在app.component.html中切换路由</span><br><span class="line"></span><br><span class="line">&lt;a routerLink=<span class="string">"/foo"</span> routerLinkActive=<span class="string">"active"</span>&gt;来到foo&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">&lt;a routerLink="/</span>login/<span class="number">5</span><span class="string">" [queryParams]="</span>&#123;name: <span class="string">'zhangsan'</span>&#125;<span class="string">" routerLinkActive="</span>active<span class="string">"&gt;来到login&lt;/a&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;!-- router-outlet类似于vue中的router-view ：作用是用来呈现匹配到的路由的组件信息 --&gt;</span></span><br><span class="line"><span class="string">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="13-http服务的使用步骤"><a href="#13-http服务的使用步骤" class="headerlink" title="13.  http服务的使用步骤"></a>13.  http服务的使用步骤</h2><p>服务就是针对某个单一或系统功能的封装，Angular中典型的服务有http服务和日志服务</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>	在app.module.ts文件中引入HttpClientModule，并且加入到imports里面</span><br><span class="line"><span class="comment">//HttpClientModule</span></span><br><span class="line"><span class="keyword">import</span> &#123;HttpClientModule&#125; <span class="keyword">from</span> <span class="string">'@angular/common/http'</span>;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//声明App依赖的模块</span></span><br><span class="line">  imports: [</span><br><span class="line">    RouterModule.forRoot(</span><br><span class="line">      appRoutes</span><br><span class="line">    ),</span><br><span class="line">    BrowserModule,</span><br><span class="line">    AppRoutingModule,</span><br><span class="line">    FormsModule,</span><br><span class="line">    HttpClientModule</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>	在需要使用http服务的组件中引入HttpClient，并且通过依赖注入把HttpClient对象注入到组件实例中</span><br><span class="line"><span class="keyword">import</span> &#123; HttpClient &#125; <span class="keyword">from</span> <span class="string">'@angular/common/http'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在构造函数中依赖注入当前激活的路由的信息</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="keyword">private</span> http: HttpClient</span></span><br><span class="line"><span class="params">  </span>) &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>	在组件的ngOnInit方法里面发送请求</span><br><span class="line">ngOnInit(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="comment">// 发送get请求</span></span><br><span class="line">    <span class="keyword">this</span>.http.get(<span class="string">'/api/homead'</span>).subscribe(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//请求错误</span></span><br><span class="line">    err =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Something went wrong!'</span>); </span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>	当协议、域名、端口有任何一个不一致的时候会构成跨域请求，此时需要设置代理</span><br><span class="line"><span class="number">4.1</span>	在项目根目录下创建proxy.conf.json文件</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"/api"</span>: &#123;</span><br><span class="line">        <span class="string">"target"</span>: <span class="string">"http://localhost:3001/"</span>,</span><br><span class="line">        <span class="string">"changeOrigin"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">"logLevel"</span>: <span class="string">"debug"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">4.2</span>	修改package.json中scripts中的 start配置</span><br><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"ng"</span>: <span class="string">"ng"</span>,</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"ng serve --proxy-config proxy.conf.json"</span>,</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"ng build"</span>,</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"ng test"</span>,</span><br><span class="line">    <span class="string">"lint"</span>: <span class="string">"ng lint"</span>,</span><br><span class="line">    <span class="string">"e2e"</span>: <span class="string">"ng e2e"</span></span><br><span class="line">  &#125;,</span><br><span class="line"><span class="number">4.3</span> 重启项目</span><br></pre></td></tr></table></figure>



<h2 id="14-TS变量的声明"><a href="#14-TS变量的声明" class="headerlink" title="14.  TS变量的声明"></a>14.  TS变量的声明</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> nickname: <span class="built_in">string</span> = <span class="string">'张三'</span>;</span><br><span class="line"><span class="keyword">let</span> isDone: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> age: <span class="built_in">number</span> = <span class="number">37</span>;</span><br><span class="line"><span class="comment">//模板字符串</span></span><br><span class="line"><span class="keyword">let</span> sentence: <span class="built_in">string</span> = <span class="string">`Hello, my nickname is <span class="subst">$&#123; nickname &#125;</span>.</span></span><br><span class="line"><span class="string">I'll be <span class="subst">$&#123; age + <span class="number">1</span> &#125;</span> years old next month.`</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//声明一个list变量，他是number类型的数组</span></span><br><span class="line">    <span class="keyword">let</span> list: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//第二种方式是使用数组泛型，Array&lt;元素类型&gt;：</span></span><br><span class="line">    <span class="keyword">let</span> list: <span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">    <span class="keyword">let</span> list2: <span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="15-TS元组类型"><a href="#15-TS元组类型" class="headerlink" title="15.  TS元组类型"></a>15.  TS元组类型</h2><p>元组类型允许表示一个已知元素数量和类型的数组，各元素的类型不必相同</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x: [ <span class="built_in">number</span>,<span class="built_in">string</span>];</span><br><span class="line">x = [<span class="number">1</span>, <span class="string">'abc'</span>];</span><br></pre></td></tr></table></figure>



<h2 id="16-Any类型"><a href="#16-Any类型" class="headerlink" title="16.  Any类型"></a>16.  Any类型</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//any类型</span></span><br><span class="line"><span class="keyword">let</span> notSure: <span class="built_in">any</span> = <span class="number">4</span>;</span><br><span class="line">notSure = <span class="string">"maybe a string instead"</span>;</span><br><span class="line">notSure = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>



<h2 id="17-Void类型"><a href="#17-Void类型" class="headerlink" title="17. Void类型"></a>17. Void类型</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//void类型 ： 没有返回值，此时会返回undefined</span></span><br><span class="line"><span class="comment">//function 函数名(函数参数): 函数返回值&#123; &#125;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">warnUser</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  alert(<span class="string">"This is my warning message"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//当我们声明一个变量是void类型的时候，他的值只能是undefined</span></span><br><span class="line"><span class="keyword">let</span> unusable: <span class="built_in">void</span>;</span><br><span class="line">unusable = <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure>



<h2 id="18-展开运算符和解构赋值"><a href="#18-展开运算符和解构赋值" class="headerlink" title="18. 展开运算符和解构赋值"></a>18. 展开运算符和解构赋值</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> input = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> [first, second] = input;</span><br><span class="line"><span class="built_in">console</span>.log(first); <span class="comment">// outputs 1</span></span><br><span class="line"><span class="built_in">console</span>.log(second); <span class="comment">// outputs 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通过解构赋值交换两个变量</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">[a, b] = [b, a];</span><br><span class="line"><span class="built_in">console</span>.log(a, b)</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数参数解构：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ff</span>(<span class="params">[first, second]: [<span class="built_in">number</span>, <span class="built_in">number</span>]</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(first)</span><br><span class="line">    <span class="built_in">console</span>.log(second)</span><br><span class="line">&#125;</span><br><span class="line">ff([<span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">//结构剩余参数</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> [first, ...rest] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">    <span class="built_in">console</span>.log(first) <span class="comment">// 1</span></span><br><span class="line">    <span class="built_in">console</span>.log(rest) <span class="comment">// [2, 3, 4]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//对象的解构赋值</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> o = &#123;</span><br><span class="line">        a: <span class="string">"foo"</span>,</span><br><span class="line">        b: <span class="number">12</span>,</span><br><span class="line">        c: <span class="string">"bar"</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//let &#123; a, b, c &#125; = o;</span></span><br><span class="line">    <span class="keyword">let</span> &#123; a, ...passthrough &#125; = o;</span><br><span class="line">    <span class="built_in">console</span>.log(a, passthrough)</span><br><span class="line">    <span class="comment">//解构赋值的时候给变量取别名</span></span><br><span class="line">    <span class="keyword">let</span> &#123; a:a1 &#125; = o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//展开运算符</span></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">let</span> arr3 = [...arr1, ...arr2];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj1 = &#123; a: <span class="number">1</span>, b: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> obj2 = &#123; c: <span class="number">3</span> &#125;</span><br><span class="line"><span class="keyword">let</span> obj3 = &#123; ...obj1, ...obj2 &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(arr3,obj3)</span><br></pre></td></tr></table></figure>



<h2 id="19-函数类型"><a href="#19-函数类型" class="headerlink" title="19. 函数类型"></a>19. 函数类型</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.函数声明：function 函数名字(参数1,参数2,参数3):函数返回值&#123;函数体&#125;</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x + y</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">23</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.函数可选参数</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x: <span class="built_in">number</span>, y?: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x + <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(add(<span class="number">1</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.函数默认参数</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span> = 20</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x + y</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(add(<span class="number">10</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.剩余参数:一般情况下是所有参数的最后一个</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a: <span class="built_in">number</span>, ...args: <span class="built_in">number</span>[]</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> ret: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">        args.forEach((item: <span class="built_in">number</span>): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">            ret += item</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//5.箭头函数</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//let 变量 = (参数1，参数2):返回值 =&gt; &#123; return xx ;&#125;</span></span><br><span class="line">    <span class="keyword">let</span> add = (x: <span class="built_in">number</span>, y: <span class="built_in">number</span>): <span class="function"><span class="params">number</span> =&gt;</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="20-类和继承和成员变量修饰符"><a href="#20-类和继承和成员变量修饰符" class="headerlink" title="20.类和继承和成员变量修饰符"></a>20.类和继承和成员变量修饰符</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//基本示例</span></span><br><span class="line"><span class="keyword">class</span> Person &#123;</span><br><span class="line">    <span class="comment">//成员变量如果不写修饰符，默认就是public，此时可以在任何地方访问</span></span><br><span class="line">    <span class="keyword">public</span> name: <span class="built_in">string</span>;</span><br><span class="line">    age: <span class="built_in">number</span>;</span><br><span class="line">    <span class="comment">//加private修饰的变量是私有变量，只能在当前类内部使用</span></span><br><span class="line">    <span class="keyword">private</span> money: <span class="built_in">number</span> = <span class="number">1000000</span>;</span><br><span class="line">    <span class="comment">//加protected修饰的变量可以在本类以及本类的子类中访问</span></span><br><span class="line">    <span class="keyword">protected</span> house: <span class="built_in">string</span> = <span class="string">"希尔顿酒店"</span>;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//构造函数</span></span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span>, age: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sayHello() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> zs: Person = <span class="keyword">new</span> Person(<span class="string">'张三'</span>, <span class="number">18</span>);</span><br><span class="line"><span class="built_in">console</span>.log(zs);</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义一个学生类继承Person类</span></span><br><span class="line"><span class="keyword">class</span> Student <span class="keyword">extends</span> Person &#123; </span><br><span class="line">    num: <span class="built_in">number</span>;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">num: <span class="built_in">number</span>,name:<span class="built_in">string</span>,age:<span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="comment">//当有继承关系的时候，一定要先调用super初始化父类的信息 </span></span><br><span class="line">        <span class="keyword">super</span>(name,age);</span><br><span class="line">        <span class="comment">//再初始化子类的信息</span></span><br><span class="line">        <span class="keyword">this</span>.num = num;</span><br><span class="line">    &#125;</span><br><span class="line">    printMsg() &#123; </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.house)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s: Student = <span class="keyword">new</span> Student(<span class="number">100</span>, <span class="string">"张三"</span>, <span class="number">18</span>);</span><br><span class="line">s.sayHello()</span><br><span class="line">s.printMsg();</span><br><span class="line"><span class="built_in">console</span>.log(s.name)</span><br><span class="line"></span><br><span class="line"><span class="comment">//子类继承父类之后就自动拥有父类非私有的成员信息</span></span><br></pre></td></tr></table></figure>



<h2 id="21-set和get方法"><a href="#21-set和get方法" class="headerlink" title="21. set和get方法"></a>21. set和get方法</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> Person &#123;</span><br><span class="line">    <span class="comment">//声明一个成员变量，他的名字是_name</span></span><br><span class="line">    <span class="keyword">private</span> _name: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>._name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通过set和get方法间接来访问_name</span></span><br><span class="line">    <span class="keyword">set</span> name(value: <span class="built_in">string</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>._name = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> name() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p: Person = <span class="keyword">new</span> Person(<span class="string">"张三"</span>);</span><br><span class="line"><span class="comment">//注意：这里面不是直接去访问name成员变量，而是去访问get name()&#123;&#125;方法来间接访问成员变量_name</span></span><br><span class="line"><span class="built_in">console</span>.log(p.name);</span><br><span class="line"><span class="comment">//注意：这里面不是直接给name成员变量赋值，而是去访问set name(value:string)&#123;...&#125;方法间接给_name成员变量赋值</span></span><br><span class="line">p.name = <span class="string">"哈哈"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(p.name)</span><br><span class="line"><span class="comment">//搞清楚：_name才是真正的成员变量，p.name和p.name="xx"是调用对应的set和get方法</span></span><br></pre></td></tr></table></figure>



<h2 id="22-静态变量和静态方法"><a href="#22-静态变量和静态方法" class="headerlink" title="22. 静态变量和静态方法"></a>22. 静态变量和静态方法</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> Person &#123;</span><br><span class="line">    <span class="comment">//成员变量 拥有者是对象，所以我们需要new Person()之后才能访问name信息</span></span><br><span class="line">    name = <span class="string">"zhangsan"</span>;</span><br><span class="line">    <span class="comment">//加static修饰叫静态变量 拥有者是类，不是对象</span></span><br><span class="line">    <span class="keyword">static</span> country = <span class="string">"中国"</span>;</span><br><span class="line">    <span class="comment">//加static修饰的方法叫静态方法 拥有者是类，不是对象</span></span><br><span class="line">    <span class="keyword">static</span> sayhello() &#123; </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"hello"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">constructor</span> (<span class="params"></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> Person();  </span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> Person(); </span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Person.country)  <span class="comment">//静态变量，直接通过类型来访问</span></span><br><span class="line"><span class="comment">// console.log(p1.country) //错误</span></span><br><span class="line"><span class="built_in">console</span>.log(p1.name)</span><br><span class="line"><span class="built_in">console</span>.log(Person.name)</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/10/24-next-js/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/10/24-next-js/" itemprop="url">24.next.js</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-10T13:47:09+08:00">
                2019-12-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-next-js"><a href="#1-next-js" class="headerlink" title="1.next.js"></a>1.next.js</h2><ol>
<li><p>安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save react react-dom next</span><br></pre></td></tr></table></figure>
</li>
<li><p>在项目根目录下添加文件夹<strong>pages</strong>（一定要命名为pages，这是next的强制约定，不然会导致找不到页面），然后在package.json文件里面添加script用于启动项目：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"next"</span>,</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"next build"</span>,</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"next start"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在pages文件夹下创建index.js文件，文件内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Index = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;Hello next.js&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Index</span><br></pre></td></tr></table></figure>
</li>
<li><p>前端路由</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> About = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;p&gt;This is About page&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> About;</span><br></pre></td></tr></table></figure>
</li>
<li><p>路由的跳转</p>
<p>next.js使用next/link实现页面之间的跳转，用法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Link <span class="keyword">from</span> <span class="string">'next/link'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Index = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Link href=<span class="string">"/about"</span>&gt;</span><br><span class="line">      &lt;a&gt;About Page&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Link&gt;</span><br><span class="line">    &lt;p&gt;Hello next.js&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Index</span><br></pre></td></tr></table></figure>
</li>
<li><p>解释路由跳转的原理：</p>
<p>官方文档说用前端路由跳转是不会有网络请求的，实际会有一个对about.js文件的请求，而这个请求来自于页面内动态插入的script标签。但是about.js只会请求一次，之后再访问是不会请求的，毕竟相同的script标签是不会重复插入的。</p>
</li>
<li><p>Link标签不支持添加style和className等属性，如果要给链接增加样式，需要在子元素上添加：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link href=<span class="string">"/about"</span>&gt;</span><br><span class="line">    &lt;a className=<span class="string">"about-link"</span> style=&#123;&#123;<span class="attr">color</span>:<span class="string">'#ff0000'</span>&#125;&#125;&gt;Go about page&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>Link&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="1-Layout"><a href="#1-Layout" class="headerlink" title="1.Layout"></a>1.Layout</h4><p>所谓的layout就是就是给不同的页面添加相同的header，footer，navbar等通用的部分，同时又不需要写重复的代码。在next.js中可以通过共享某些组件实现layout。</p>
<p>我们先增加一个公共的header组件，放在根目录的components文件夹下面（页面级的组件放pages中，公共组件放components中）：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Link <span class="keyword">from</span> <span class="string">'next/link'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> linkStyle = &#123;</span><br><span class="line">    marginRight: <span class="number">15</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Header = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Link href=<span class="string">"/"</span>&gt;</span><br><span class="line">            &lt;a style=&#123;linkStyle&#125;&gt;Home&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Link&gt;</span><br><span class="line">        &lt;Link href=<span class="string">"/about"</span>&gt;</span><br><span class="line">            &lt;a style=&#123;linkStyle&#125;&gt;About&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Link&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Header;</span></span><br></pre></td></tr></table></figure>

<p>然后在index和about页面中引入header组件，这样就实现了公共的layout的header：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Header <span class="keyword">from</span> <span class="string">'../components/Header'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Index = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Header /&gt;</span><br><span class="line">        &lt;p&gt;Hello next.js&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Index;</span><br></pre></td></tr></table></figure>

<p>如果要增加footer也可以按照header的方法实现。<br>除了引入多个header、footer组件，我们可以实现一个整体的Layout组件，避免引入多个组件的麻烦，同样在components中添加一个Layout.js文件，内容如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Header <span class="keyword">from</span> <span class="string">'./Header'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> layoutStyle = &#123;</span><br><span class="line">    margin: <span class="number">20</span>,</span><br><span class="line">    padding: <span class="number">20</span>,</span><br><span class="line">    border: <span class="string">'1px solid #DDD'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Layout = <span class="function">(<span class="params">props</span>) =&gt;</span> (</span><br><span class="line">    &lt;div style=&#123;layoutStyle&#125;&gt;</span><br><span class="line">        &lt;Header /&gt;</span><br><span class="line">        &#123;props.children&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Layout</span></span><br></pre></td></tr></table></figure>

<p>这样我们只需要在页面中引入Layout组件就可以达到布局的目的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/Layout'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Index = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">        &lt;p&gt;Hello next.js&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Layout&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Index;</span><br></pre></td></tr></table></figure>

<h4 id="2-页面间传值"><a href="#2-页面间传值" class="headerlink" title="2.页面间传值"></a>2.页面间传值</h4><p>next中的页面间传值方式和传统网页一样也可以用url参数实现，我们来做一个简单的博客应用：</p>
<p>首先将index.js的内容替换成如下来展示博客列表：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Link <span class="keyword">from</span> <span class="string">'next/link'</span>;</span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/Layout'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> PostLink = <span class="function">(<span class="params">props</span>) =&gt;</span> (</span><br><span class="line">    &lt;li&gt;</span><br><span class="line">        &lt;Link href=&#123;<span class="string">`/post?title=<span class="subst">$&#123;props.title&#125;</span>`</span>&#125;&gt;</span><br><span class="line">            &lt;a&gt;&#123;props.title&#125;&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Link&gt;</span><br><span class="line">    &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default () =&gt; (</span></span><br><span class="line"><span class="regexp">    &lt;Layout&gt;</span></span><br><span class="line"><span class="regexp">        &lt;h1&gt;My Blog&lt;/</span>h1&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;PostLink title=<span class="string">"Hello next.js"</span> /&gt;</span><br><span class="line">            &lt;PostLink title=<span class="string">"next.js is awesome"</span> /&gt;</span><br><span class="line">            &lt;PostLink title=<span class="string">"Deploy apps with Zeit"</span> /&gt;</span><br><span class="line">        &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Layout&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>通过在Link的href中添加<code>title</code>参数就可以实现传值。</p>
<p>现在我们再添加博客的详情页<code>post.js</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; withRouter &#125; <span class="keyword">from</span> <span class="string">'next/router'</span>;</span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/Layout'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Post = withRouter(<span class="function">(<span class="params">props</span>) =&gt;</span> (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">        &lt;h1&gt;&#123;props.router.query.title&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;p&gt;This is the blog post content.&lt;/</span>p&gt;</span><br><span class="line">    &lt;<span class="regexp">/Layout&gt;</span></span><br><span class="line"><span class="regexp">));</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Post;</span></span><br></pre></td></tr></table></figure>

<p>上面代码通过 withRouter 将 next 的 router 作为一个 prop 注入到 component 中，实现对 url 参数的访问。</p>
<p>通过 props.router.query.title 进行取到传递的值</p>
<p>使用query string可以实现页面间的传值，但是会导致页面的url不太简洁美观，尤其当要传输的值多了之后。所以next.js提供了Route Masking这个特性用于路由的美化。</p>
<h4 id="3-路由伪装（Route-Masking）"><a href="#3-路由伪装（Route-Masking）" class="headerlink" title="3.路由伪装（Route Masking）"></a>3.路由伪装（Route Masking）</h4><p>这项特性的官方名字叫Route Masking，没有找到官方的中文名，所以就根据字面意思暂且翻译成路由伪装。所谓的路由伪装即让浏览器地址栏显示的url和页面实际访问的url不一样。实现路由伪装的方法也很简单，通过 Link 组件的 as 属性告诉浏览器 href 对应显示为什么 url 就可以了，index.js 代码修改如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Link <span class="keyword">from</span> <span class="string">'next/link'</span>;</span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/Layout'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> PostLink = <span class="function">(<span class="params">props</span>) =&gt;</span> (</span><br><span class="line">    &lt;li&gt;</span><br><span class="line">        &lt;Link <span class="keyword">as</span>=&#123;<span class="string">`/p/<span class="subst">$&#123;props.id&#125;</span>`</span>&#125; href=&#123;<span class="string">`/post?title=<span class="subst">$&#123;props.title&#125;</span>`</span>&#125;&gt;</span><br><span class="line">            &lt;a&gt;&#123;props.title&#125;&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Link&gt;</span><br><span class="line">    &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default () =&gt; (</span></span><br><span class="line"><span class="regexp">    &lt;Layout&gt;</span></span><br><span class="line"><span class="regexp">        &lt;h1&gt;My Blog&lt;/</span>h1&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;PostLink id=<span class="string">"hello-nextjs"</span> title=<span class="string">"Hello next.js"</span> /&gt;</span><br><span class="line">            &lt;PostLink id=<span class="string">"learn-nextjs"</span> title=<span class="string">"next.js is awesome"</span> /&gt;</span><br><span class="line">            &lt;PostLink id=<span class="string">"deploy-nextjs"</span> title=<span class="string">"Deploy apps with Zeit"</span> /&gt;</span><br><span class="line">        &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Layout&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>这是因为刷新页面会直接向服务器请求这个url，而服务端并没有该url对应的页面，所以报错。为了解决这个问题，需要用到next.js提供的自定义服务接口（custom server API）。</p>
<h2 id="2-自定义服务接口"><a href="#2-自定义服务接口" class="headerlink" title="2.自定义服务接口"></a>2.自定义服务接口</h2><p>自定义服务接口前我们需要创建服务器，安装Express:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save express</span><br></pre></td></tr></table></figure>

<p>在项目根目录下创建server.js 文件，内容如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">const</span> next = <span class="built_in">require</span>(<span class="string">'next'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dev = process.env.NODE_ENV !== <span class="string">'production'</span>;</span><br><span class="line"><span class="keyword">const</span> app = next(&#123; dev &#125;);</span><br><span class="line"><span class="keyword">const</span> handle = app.getRequestHandler();</span><br><span class="line"></span><br><span class="line">app.prepare()</span><br><span class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> server = express();</span><br><span class="line">        server.get(<span class="string">'*'</span>, (req, res) =&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> handle(req, res);</span><br><span class="line">        &#125;);</span><br><span class="line">        server.listen(<span class="number">3000</span>, (err) =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'&gt; Ready on http://localhost:3000'</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">ex</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(ex.stack);</span><br><span class="line">        process.exit(<span class="number">1</span>);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<p>然后将package.json里面的dev script改为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"node server.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行<code>npm run dev</code>后项目和之前一样可以运行，接下来我们需要添加路由将被伪装过的url和真实的url匹配起来，在server.js中添加：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="keyword">const</span> server = express();</span><br><span class="line">server.get(<span class="string">'/p/:id'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> actualPage = <span class="string">'/post'</span>;</span><br><span class="line">    <span class="keyword">const</span> queryParams = &#123; <span class="attr">title</span>: req.params.id &#125;;</span><br><span class="line">    app.render(req, res, actualPage, queryParams);</span><br><span class="line">&#125;);</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>这样我们就把被伪装过的url和真实的url映射起来，并且query参数也进行了映射。重启项目之后就可以刷新详情页而不会报错了。但是有一个小问题，前端路由打开的页面和后端路由打开的页面title不一样，这是因为后端路由传过去的是id，而前端路由页面显示的是title。这个问题在实际项目中可以避免，因为在实际项目中我们一般会通过id获取到title，然后再展示。作为Demo我们偷个小懒，直接将id作为后端路由页面的title。</p>
<p>之前我们的展示数据都是静态的，接下来我们实现从远程服务获取数据并展示。★★</p>
<h2 id="3-远程数据获取"><a href="#3-远程数据获取" class="headerlink" title="3.远程数据获取"></a>3.远程数据获取</h2><p>next.js提供了一个标准的获取远程数据的接口:getInitialProps，通过getInitialProps我们可以获取到远程数据并赋值给页面的props。getInitialProps即可以用在服务端也可以用在前端。接下来我们写个小Demo展示它的用法。我们打算从TVMaze API 获取到一些电视节目的信息并展示到我的网站上。首先，我们安装isomorphic-unfetch，它是基于fetch实现的一个网络请求库：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save isomorphic-unfetch</span><br></pre></td></tr></table></figure>

<p>然后我们修改index.js如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Link <span class="keyword">from</span> <span class="string">'next/link'</span>;</span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'../components/Layout'</span>;</span><br><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">'isomorphic-unfetch'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Index = <span class="function">(<span class="params">props</span>) =&gt;</span> (</span><br><span class="line">    &lt;Layout&gt;</span><br><span class="line">        &lt;h1&gt;Marvel TV Shows&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">            &#123;props.shows.map((&#123; show &#125;) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">                return (</span></span><br><span class="line"><span class="regexp">                    &lt;li key=&#123;show.id&#125;&gt;</span></span><br><span class="line"><span class="regexp">                        &lt;Link as=&#123;`/</span>p/$&#123;show.id&#125;<span class="string">`&#125; href=&#123;`</span>/post?id=$&#123;show.id&#125;<span class="string">`&#125;&gt;</span></span><br><span class="line"><span class="string">                            &lt;a&gt;&#123;show.name&#125;&lt;/a&gt;</span></span><br><span class="line"><span class="string">                        &lt;/Link&gt;</span></span><br><span class="line"><span class="string">                    &lt;/li&gt;</span></span><br><span class="line"><span class="string">                );</span></span><br><span class="line"><span class="string">            &#125;)&#125;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/Layout&gt;</span></span><br><span class="line"><span class="string">);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Index.getInitialProps = async function () &#123;</span></span><br><span class="line"><span class="string">    const res = await fetch('https://api.tvmaze.com/search/shows?q=marvel');</span></span><br><span class="line"><span class="string">    const data = await res.json();</span></span><br><span class="line"><span class="string">    return &#123;</span></span><br><span class="line"><span class="string">        shows: data</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export default Index;</span></span><br></pre></td></tr></table></figure>

<p>以上代码的逻辑应该很清晰了，我们在<code>getInitialProps</code>中获取到电视节目的数据并返回，这样在Index的props就可以获取到节目数据，再遍历渲染成节目列表。</p>
<h2 id="4-增加样式"><a href="#4-增加样式" class="headerlink" title="4.增加样式"></a>4.增加样式</h2><p>到目前为止，咱们做的网页都太平淡了，所以接下来咱们给网站增加一些样式，让它变得漂亮。</p>
<p>对于React应用，有多种方式可以增加样式。主要分为两种：</p>
<ol>
<li>使用传统CSS文件（包括SASS，PostCSS等）</li>
<li>在JS文件中插入CSS</li>
</ol>
<p>使用传统CSS文件在实际使用中会用到挺多的问题，所以next.js推荐使用第二种方式。next.js内部默认使用styled-jsx框架向js文件中插入CSS。这种方式引入的样式在不同组件之间不会相互影响，甚至父子组件之间都不会相互影响。</p>
<h3 id="1-styled-jsx"><a href="#1-styled-jsx" class="headerlink" title="1.styled-jsx"></a>1.styled-jsx</h3><p>接下来，我们看一下如何使用styled-jsx。将index.js的内容替换如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">import Link from 'next/link';</span><br><span class="line">import Layout from '../components/Layout';</span><br><span class="line">import fetch from 'isomorphic-unfetch';</span><br><span class="line"></span><br><span class="line">const Index = (props) =&gt; (</span><br><span class="line">    &lt;<span class="selector-tag">Layout</span>&gt;</span><br><span class="line">        &lt;h1&gt;Marvel TV Shows&lt;/h1&gt;</span><br><span class="line">        &lt;<span class="selector-tag">ul</span>&gt;</span><br><span class="line">            &#123;props.shows.map((&#123; show &#125;) =&gt; &#123;</span><br><span class="line">                <span class="selector-tag">return</span> (</span><br><span class="line">                    &lt;li key=&#123;show.id&#125;&gt;</span><br><span class="line">                        &lt;Link as=&#123;`/p/$&#123;show.id&#125;`&#125; href=&#123;`/post?id=$&#123;show.id&#125;`&#125;&gt;</span><br><span class="line">                            &lt;a className="show-link"&gt;&#123;show.name&#125;&lt;/a&gt;</span><br><span class="line">                        &lt;/Link&gt;</span><br><span class="line">                    &lt;/li&gt;</span><br><span class="line">                );</span><br><span class="line">            &#125;)&#125;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">        &lt;<span class="selector-tag">style</span> <span class="selector-tag">jsx</span>&gt;</span><br><span class="line">        &#123;`</span><br><span class="line">            *&#123;</span><br><span class="line">                <span class="attribute">margin</span>:<span class="number">0</span>;</span><br><span class="line">                <span class="attribute">padding</span>:<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="selector-tag">h1</span>,<span class="selector-tag">a</span>&#123;</span><br><span class="line">                <span class="attribute">font-family</span>:<span class="string">'Arial'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="selector-tag">h1</span>&#123;</span><br><span class="line">                <span class="attribute">margin-top</span>:<span class="number">20px</span>;</span><br><span class="line">                <span class="attribute">background-color</span>:<span class="number">#EF141F</span>;</span><br><span class="line">                <span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line">                <span class="attribute">font-size</span>:<span class="number">50px</span>;</span><br><span class="line">                <span class="attribute">line-height</span>:<span class="number">66px</span>;</span><br><span class="line">                <span class="attribute">text-transform</span>: uppercase;</span><br><span class="line">                <span class="attribute">text-align</span>:center;</span><br><span class="line">            &#125;    </span><br><span class="line">            <span class="selector-tag">ul</span>&#123;</span><br><span class="line">                <span class="attribute">margin-top</span>:<span class="number">20px</span>;</span><br><span class="line">                <span class="attribute">padding</span>:<span class="number">20px</span>;</span><br><span class="line">                <span class="attribute">background-color</span>:<span class="number">#000</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="selector-tag">li</span>&#123;</span><br><span class="line">                <span class="attribute">list-style</span>:none;</span><br><span class="line">                <span class="attribute">margin</span>:<span class="number">5px</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="selector-tag">a</span>&#123;</span><br><span class="line">                <span class="attribute">text-decoration</span>:none;</span><br><span class="line">                <span class="attribute">color</span>:<span class="number">#B4B5B4</span>;</span><br><span class="line">                <span class="attribute">font-size</span>:<span class="number">24px</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">                <span class="attribute">opacity</span>:<span class="number">0.6</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        `&#125;</span><br><span class="line">        &lt;/style&gt;</span><br><span class="line">    &lt;/Layout&gt;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">Index.getInitialProps = async function () &#123;</span><br><span class="line">    const res = await fetch('https://api.tvmaze.com/search/shows?q=marvel');</span><br><span class="line">    const data = await res.json();</span><br><span class="line">    console.log(`Show data fetched. Count: $&#123;data.length&#125;`);</span><br><span class="line">    <span class="selector-tag">return</span> &#123;</span><br><span class="line">        <span class="attribute">shows</span>: data</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">export</span> <span class="selector-tag">default</span> <span class="selector-tag">Index</span>;</span><br></pre></td></tr></table></figure>

<p>增加了一点样式之后比之前好看了一点点。我们发现导航栏的样式并没有变。因为Header是一个独立的的component，component之间的样式不会相互影响。如果需要为导航增加样式，需要修改Header.js：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Link <span class="keyword">from</span> <span class="string">'next/link'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Header = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Link href=<span class="string">"/"</span>&gt;</span><br><span class="line">            &lt;a&gt;Home&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Link&gt;</span><br><span class="line">        &lt;Link href=<span class="string">"/about"</span>&gt;</span><br><span class="line">            &lt;a&gt;About&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Link&gt;</span><br><span class="line">        &lt;style jsx&gt;</span><br><span class="line">            &#123;<span class="string">`</span></span><br><span class="line"><span class="string">                a&#123;</span></span><br><span class="line"><span class="string">                    color:#EF141F;</span></span><br><span class="line"><span class="string">                    font-size:26px;</span></span><br><span class="line"><span class="string">                    line-height:40px;</span></span><br><span class="line"><span class="string">                    text-decoration:none;</span></span><br><span class="line"><span class="string">                    padding:0 10px;</span></span><br><span class="line"><span class="string">                    text-transform:uppercase;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">                a:hover&#123;</span></span><br><span class="line"><span class="string">                    opacity:0.8;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            `</span>&#125;</span><br><span class="line">        &lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Header;</span><br></pre></td></tr></table></figure>

<h3 id="2-全局样式"><a href="#2-全局样式" class="headerlink" title="2.全局样式"></a>2.全局样式</h3><p>当我们需要添加一些全局的样式，比如 rest.css 或者鼠标悬浮在 a 标签上时出现下划线，这时候我们只需要在<code>style-jsx</code>标签上增加 <code>global</code>关键词就行了，我们修改Layout.js如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import Header from './Header';</span><br><span class="line"></span><br><span class="line">const layoutStyle = &#123;</span><br><span class="line">    <span class="selector-tag">margin</span>: 20,</span><br><span class="line">    <span class="selector-tag">padding</span>: 20,</span><br><span class="line">    border: '1px solid #DDD'</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const Layout = (props) =&gt; (</span><br><span class="line">    &lt;div style=&#123;layoutStyle&#125;&gt;</span><br><span class="line">        &lt;Header /&gt;</span><br><span class="line">        &#123;props.children&#125;</span><br><span class="line">        &lt;<span class="selector-tag">style</span> <span class="selector-tag">jsx</span> <span class="selector-tag">global</span>&gt;</span><br><span class="line">            &#123;`</span><br><span class="line">                <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">                    <span class="attribute">text-decoration</span>:underline;</span><br><span class="line">                &#125;</span><br><span class="line">            `&#125;</span><br><span class="line">        &lt;/style&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">export</span> <span class="selector-tag">default</span> <span class="selector-tag">Layout</span></span><br></pre></td></tr></table></figure>

<p>这样鼠标悬浮在所有的a标签上时会出现下划线</p>
<h2 id="5-部署项目"><a href="#5-部署项目" class="headerlink" title="5.部署项目"></a>5.部署项目</h2><h3 id="部署next-js应用"><a href="#部署next-js应用" class="headerlink" title="部署next.js应用"></a>部署next.js应用</h3><h4 id="Build"><a href="#Build" class="headerlink" title="Build"></a>Build</h4><p>部署之前我们首先需要能为生产环境build项目，在package.json中添加script：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"build"</span>: <span class="string">"next build"</span></span><br></pre></td></tr></table></figure>

<p>接下来我们需要能启动项目来serve我们build的内容，在package.json中添加script：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"start"</span>: <span class="string">"next start"</span></span><br></pre></td></tr></table></figure>

<p>然后依次执行：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br><span class="line">npm run start</span><br></pre></td></tr></table></figure>

<p>build完成的内容会生成到<code>.next</code>文件夹内，<code>npm run start</code>之后，我们访问的实际上就是<code>.next</code>文件夹的内容。</p>
<p>运行多个实例<br>如果我们需要进行横向扩展（ Horizontal Scale）以提高网站的访问速度，我们需要运行多个网站的实例。首先，我们修改package.json的start script：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;start&quot;: &quot;next start -p $PORT&quot;</span><br></pre></td></tr></table></figure>

<p>如果是windows系统：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;start&quot;: &quot;next start -p %PORT%&quot;</span><br></pre></td></tr></table></figure>

<p>然后运行build: npm run build，然后打开两个命令行并定位到项目根目录，分别运行：</p>
<p>然后运行build: npm run build，然后打开两个命令行并定位到项目根目录，分别运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PORT=8000 npm start</span><br><span class="line">PORT=9000 npm start</span><br></pre></td></tr></table></figure>

<p>运行完成后打开localhost:8000和localhost:9000都可以正常访问：</p>
<h4 id="部署并使用自定义服务"><a href="#部署并使用自定义服务" class="headerlink" title="部署并使用自定义服务"></a>部署并使用自定义服务</h4><p>我们将start script修改为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;start&quot;: &quot;NODE_ENV=production node server.js&quot;</span><br></pre></td></tr></table></figure>

<p>这样我们就解决了自定义服务的部署。重启项目后刷新详情页也能够正常访问了。</p>
<p>到此为止，我们就了解了next.js的基本使用方法，如果有疑问可以查看next.js官方文档，也可以给我留言讨论。</p>
<p>本文Demo源码：Github 源码<br>next.js官网：<a href="https://nextjs.org/" target="_blank" rel="noopener">https://nextjs.org/</a><br>next.js官方教程：<a href="https://nextjs.org/learn" target="_blank" rel="noopener">https://nextjs.org/learn</a><br>next.js Github：<a href="https://github.com/zeit/next.js" target="_blank" rel="noopener">https://github.com/zeit/next.js</a><br>————————————————<br>版权声明：本文为CSDN博主「MudOnTire」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/mudontire/article/details/80980910" target="_blank" rel="noopener">https://blog.csdn.net/mudontire/article/details/80980910</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/07/23-react-native/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/07/23-react-native/" itemprop="url">23.react-native</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-07T16:39:12+08:00">
                2019-12-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-App开发模式介绍"><a href="#1-App开发模式介绍" class="headerlink" title="1.App开发模式介绍"></a>1.App开发模式介绍</h2><p>Web App ： 用html+css+js写的网页程序</p>
<p>混合式App开发：（HybirdApp）就是使用前端已有的技术，HTML + CSS + JS ，然后再搭配一些相关的打包编译技术，就能够开发出一个手机App，安装到手机中进行使用。</p>
<p>原生(native app)App：使用IOS、Android 官方提供的工具、开发平台、配套语言进行手机App开发的方式</p>
<p><img src="/2019/12/07/23-react-native/1.png" alt="BP"></p>
<p><img src="/2019/12/07/23-react-native/2.png" alt="BP"></p>
<h2 id="2-hybird开发技术选型"><a href="#2-hybird开发技术选型" class="headerlink" title="2.hybird开发技术选型"></a>2.hybird开发技术选型</h2><p>Vue.js 和 Weex</p>
<p>React.js 和 React-Native </p>
<p>Angular.js 和 Ionic</p>
<p>Html5+ ：把html+css+js开发web应用打包成apk</p>
<img src="/2019/12/07/23-react-native/3.png" alt="BP" style="zoom: 150%;">

<h2 id="3-安卓环境配置"><a href="#3-安卓环境配置" class="headerlink" title="3.安卓环境配置"></a>3.安卓环境配置</h2><h5 id="1-安装java-jdk"><a href="#1-安装java-jdk" class="headerlink" title="1.安装java jdk"></a>1.安装java jdk</h5><p>​    A) 修改环境变量，新增<code>JAVA_HOME</code>的系统环境变量，值为<code>C:\Program Files (x86)\Java\jdk1.8.0_112</code>，也就是安装JDK的根目录</p>
<p>   B) 修改系统环境变量<code>Path</code>，在<code>Path</code>之后新增<code>%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;</code></p>
<p>   C) 新建<strong>系统环境变量</strong><code>CLASSPATH</code>，值为<code>.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;</code></p>
<p>   D) 保存所有的系统环境变量，同时退出系统环境变量配置窗口，然后运行cmd命令行工具，输入<code>javac</code>，如果能出现javac的命令选项，就表示配置成功！</p>
<p>注意：在win10 的环境下可以将相对路径换成绝对路径</p>
<p>classpath：</p>
<p><img src="/2019/12/07/23-react-native/4.png" alt="BP"></p>
<p>path：</p>
<p><img src="/2019/12/07/23-react-native/5.png" alt="BP"></p>
<h5 id="2-安装Node-js"><a href="#2-安装Node-js" class="headerlink" title="2.安装Node.js"></a>2.安装Node.js</h5><h5 id="3-安装Git环境"><a href="#3-安装Git环境" class="headerlink" title="3.安装Git环境"></a>3.安装Git环境</h5><h5 id="4-安装python2环境"><a href="#4-安装python2环境" class="headerlink" title="4.安装python2环境"></a>4.安装python2环境</h5><h5 id="5-将android压缩包解压之后放到c盘根目录"><a href="#5-将android压缩包解压之后放到c盘根目录" class="headerlink" title="5.将android压缩包解压之后放到c盘根目录"></a>5.将android压缩包解压之后放到c盘根目录</h5><p>A) 在系统环境变量中新建<code>ANDROID_HOME</code>，值为android SDK Manager的安装路径<code>C:\android</code></p>
<p>B) 紧接着，在Path中新增<code>;%ANDROID_HOME%\tools;%ANDROID_HOME%\platform-tools;</code></p>
<p>注意：win10 如上图path的最后的写法</p>
<h5 id="6-（非必须）模拟器"><a href="#6-（非必须）模拟器" class="headerlink" title="6.（非必须）模拟器"></a>6.（非必须）模拟器</h5><p>A) 将C:\android\platform-tools\adb.exe拷贝一份，重命名为nox_adb.exe，替换掉D:\Program Files\Nox\bin下的nox_adb.exe文件</p>
<p>B) 打开夜神模拟器</p>
<p>C) 连接夜神模拟器  adb connect 127.0.0.1:62001   /  adb disconnect 127.0.0.1:62001</p>
<p>D) 查看安卓连接设备  adb devices</p>
<p>E) 配置夜神模拟器  375*667   dpi:163</p>
<h5 id="7-安装yarn和react-native-cli"><a href="#7-安装yarn和react-native-cli" class="headerlink" title="7.安装yarn和react-native-cli"></a>7.安装yarn和react-native-cli</h5><p>npm install -g yarn react-native-cli</p>
<p>设置下载源：</p>
<p>yarn config set registry <a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a> –global </p>
<p>yarn config set disturl <a href="https://npm.taobao.org/dist" target="_blank" rel="noopener">https://npm.taobao.org/dist</a> –global</p>
<h5 id="8-react-native-init"><a href="#8-react-native-init" class="headerlink" title="8.react-native-init"></a>8.react-native-init</h5><p>通过react-native-init命令创建一个App (注意项目不要放在中文路径下)</p>
<h5 id="9-react-native-run-android"><a href="#9-react-native-run-android" class="headerlink" title="9.react-native run-android"></a>9.react-native run-android</h5><p>进入testRN目录，通过npx<br>react-native run-android命令来运行项目</p>
<h5 id="10-问题"><a href="#10-问题" class="headerlink" title="10.问题"></a>10.问题</h5><p><img src="/2019/12/07/23-react-native/6.png" alt="BP"></p>
<p>A)       在android/app/src/main下新建assets文件夹</p>
<p>B)       在项目根目录下输入如下命令：</p>
<p>react-native bundle –platform android –dev false –entry-file index.js –bundle-output android/app/src/main/assets/index.android.bundle –assets-dest android/app/src/main/res</p>
<p><img src="/2019/12/07/23-react-native/7.png" alt="BP"></p>
<p>C)      重新使用 react-native run-android 来启动项目</p>
<h5 id="11-热更新解决端口被占用的问题"><a href="#11-热更新解决端口被占用的问题" class="headerlink" title="11.热更新解决端口被占用的问题"></a>11.热更新解决端口被占用的问题</h5><p>A) netstat -ano | findstr “8081”</p>
<p>B) tasklist|findstr “pid”   如果结果显示 java.exe，则说明8081端口被占用了</p>
<p>C) react-native  run-android 把项目安装到夜神模拟器</p>
<p>D)关闭以下窗口，然后通过react-native start –port  9999 重新打开服务端口</p>
<p><img src="/2019/12/07/23-react-native/8.png" alt="BP"></p>
<p>E) 打开夜神模拟器，打开app，摇一摇</p>
<p><img src="/2019/12/07/23-react-native/9.png" alt="BP"></p>
<p>F) 打开夜神模拟器，摇一摇</p>
<p><img src="/2019/12/07/23-react-native/10.png" alt="BP"></p>
<h2 id="4-RN基础组件"><a href="#4-RN基础组件" class="headerlink" title="4.RN基础组件"></a>4.RN基础组件</h2><p>View     —&gt;视图    </p>
<p>Text      —&gt;文本</p>
<p>Image    —&gt;图片</p>
<p>TextInput —&gt;文本输入框</p>
<p>ScrollView —&gt;滚动视图</p>
<p>StyleSheet —&gt;创建样式 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Sample React Native App</span></span><br><span class="line"><span class="comment"> * https://github.com/facebook/react-native</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @format</span></span><br><span class="line"><span class="comment"> * @flow</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 1.首先在开头导入所需要的组件的名称</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  SafeAreaView,</span><br><span class="line">  StyleSheet,</span><br><span class="line">  ScrollView,</span><br><span class="line">  View,</span><br><span class="line">  Text,</span><br><span class="line">  StatusBar,</span><br><span class="line">  Image,</span><br><span class="line">  TextInput</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.在App中定义所有的函数和变量的值</span></span><br><span class="line"><span class="keyword">const</span> App: <span class="function"><span class="params">()</span> =&gt;</span> React$Node = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [value, onChangeText] = React.useState(<span class="string">'Useless Placeholder'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> pic = &#123;</span><br><span class="line">    uri: <span class="string">'https://upload.wikimedia.org/wikipedia/commons/d/de/Bananavarieties.jpg'</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.在return中返回需要映射的组件</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;ScrollView&gt;</span><br><span class="line">          &lt;Text&gt;这是View&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">          &lt;View style=&#123;styles.box&#125;&gt;&lt;/</span>View&gt;</span><br><span class="line">          &lt;View style=&#123;&#123;<span class="attr">width</span>:<span class="number">100</span>,<span class="attr">height</span>:<span class="number">100</span>,<span class="attr">backgroundColor</span>:<span class="string">'blue'</span>&#125;&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">          &lt;Image source=&#123;pic&#125; style=&#123;&#123; <span class="attr">width</span>: <span class="number">193</span>, <span class="attr">height</span>: <span class="number">110</span> &#125;&#125; /&gt;</span><br><span class="line">          &lt;Image source=&#123;<span class="built_in">require</span>(<span class="string">'./images/1.png'</span>)&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Image</span>&gt;</span></span></span><br><span class="line">          &lt;TextInput</span><br><span class="line">            style=&#123;&#123; <span class="attr">height</span>: <span class="number">40</span>, <span class="attr">borderColor</span>: <span class="string">'red'</span>, <span class="attr">borderWidth</span>: <span class="number">1</span> &#125;&#125;</span><br><span class="line">            onChangeText=&#123;text =&gt; onChangeText(text)&#125;</span><br><span class="line">            value=&#123;value&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">      &lt;<span class="regexp">/ScrollView&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = StyleSheet.create(&#123;</span><br><span class="line">  box:&#123;</span><br><span class="line">    width:<span class="number">300</span>,</span><br><span class="line">    height:<span class="number">200</span>,</span><br><span class="line">    borderColor:<span class="string">'yellow'</span>,</span><br><span class="line">    borderWidth:<span class="number">2</span>,</span><br><span class="line">    borderStyle:<span class="string">"solid"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h2 id="5-交互组件"><a href="#5-交互组件" class="headerlink" title="5.交互组件"></a>5.交互组件</h2><p>Button —&gt;按钮</p>
<p>Picker  —&gt;选择视图</p>
<p>Switch —&gt;开关</p>
<p>Slider  —&gt;滑块</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">          onPress=&#123;onPressLearnMore&#125;</span><br><span class="line">          title=<span class="string">"Learn More"</span></span><br><span class="line">          color=<span class="string">"#841584"</span></span><br><span class="line">        /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Picker</span><br><span class="line">          selectedValue=&#123;language&#125;</span><br><span class="line">          style=&#123;&#123; <span class="attr">height</span>: <span class="number">50</span>, <span class="attr">width</span>: <span class="number">100</span> &#125;&#125;</span><br><span class="line">          onValueChange=&#123;(itemValue, itemIndex) =&gt;</span><br><span class="line">            onChangeLanaguage(itemValue)</span><br><span class="line">          &#125;&gt;</span><br><span class="line">          &lt;Picker.Item label=<span class="string">"Java"</span> value=<span class="string">"java"</span> /&gt;</span><br><span class="line">          &lt;Picker.Item label=<span class="string">"JavaScript"</span> value=<span class="string">"js"</span> /&gt;</span><br><span class="line">        &lt;<span class="regexp">/Picker&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        &lt;Slider maximumValue=&#123;100&#125; minimumValue=&#123;0&#125; onValueChange=&#123;(value) =&gt; console.log(value)&#125; step=&#123;2&#125; value=&#123;50&#125;&gt;&lt;/</span>Slider&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Switch value=&#123;switchStatus&#125; onValueChange=&#123;(value) =&gt; &#123; onChangeswitchStatus(value) &#125;&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [switchStatus, onChangeswitchStatus] = React.useState(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">const</span> [language, onChangeLanaguage] = React.useState(<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> onPressLearnMore = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"xxx"</span>)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-列表组件"><a href="#6-列表组件" class="headerlink" title="6.   列表组件"></a>6.   列表组件</h2><p>FlatList  : 列表</p>
<p>Section  ：分组列表</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;SectionList</span><br><span class="line">        renderItem=&#123;(&#123; item, index, section &#125;) =&gt; <span class="xml"><span class="tag">&lt;<span class="name">Text</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span>&#125;</span><br><span class="line">        sections=&#123;[</span><br><span class="line">          &#123; <span class="attr">title</span>: <span class="string">'Title1'</span>, <span class="attr">data</span>: [<span class="string">'item1'</span>, <span class="string">'item2'</span>], <span class="attr">renderItem</span>: overrideRenderItem &#125;,</span><br><span class="line">          &#123; <span class="attr">title</span>: <span class="string">'Title2'</span>, <span class="attr">data</span>: [<span class="string">'item3'</span>, <span class="string">'item4'</span>], <span class="attr">renderItem</span>: overrideRenderItem2 &#125;,</span><br><span class="line">          &#123; <span class="attr">title</span>: <span class="string">'Title3'</span>, <span class="attr">data</span>: [<span class="string">'item5'</span>, <span class="string">'item6'</span>] &#125;,</span><br><span class="line">        ]&#125;</span><br><span class="line">      /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;FlatList</span><br><span class="line">        data=&#123;[&#123; <span class="attr">key</span>: <span class="string">'a'</span> &#125;, &#123; <span class="attr">key</span>: <span class="string">'b'</span> &#125;, &#123; <span class="attr">key</span>: <span class="string">'a'</span> &#125;, &#123; <span class="attr">key</span>: <span class="string">'b'</span> &#125;]&#125;</span><br><span class="line">        renderItem=&#123;(&#123; item &#125;) =&gt; <span class="xml"><span class="tag">&lt;<span class="name">Text</span>&gt;</span>&#123;item.key&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span>&#125;</span><br><span class="line">        ItemSeparatorComponent=&#123;() =&gt; <span class="xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">height:</span> <span class="attr">1</span>, <span class="attr">width:</span> '<span class="attr">100</span>%', <span class="attr">backgroundColor:</span> "<span class="attr">red</span>" &#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span>&#125;</span><br><span class="line">        ListHeaderComponent=&#123;() =&gt; <span class="xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span><span class="tag">&lt;<span class="name">Text</span>&gt;</span>列表头<span class="tag">&lt;/<span class="name">Text</span>&gt;</span><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span>&#125;</span><br><span class="line">        ListFooterComponent=&#123;() =&gt; <span class="xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span><span class="tag">&lt;<span class="name">Text</span>&gt;</span>列表尾<span class="tag">&lt;/<span class="name">Text</span>&gt;</span><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span>&#125;</span><br><span class="line">        numColumns=&#123;<span class="number">2</span>&#125;</span><br><span class="line">        columnWrapperStyle=&#123;&#123; <span class="attr">borderWidth</span>: <span class="number">1</span>, <span class="attr">borderColor</span>: <span class="string">'blue'</span>, <span class="attr">paddingLeft</span>: <span class="number">20</span> &#125;&#125;  <span class="comment">//指定每一行容器的样式(设置多列的情况下)</span></span><br><span class="line">        getItemLayout=&#123;(data, index) =&gt; (</span><br><span class="line">          &#123; <span class="attr">length</span>: <span class="number">100</span>, <span class="attr">offset</span>: (<span class="number">100</span> + <span class="number">2</span>) * index, index &#125;</span><br><span class="line">        )&#125;   <span class="comment">//当行高固定的时候可以使用这个属性来优化性能</span></span><br><span class="line">        refreshing=&#123;<span class="literal">false</span>&#125;     <span class="comment">//当前是否正在刷新</span></span><br><span class="line">        onEndReachedThreshold=&#123;<span class="number">0</span>&#125;  <span class="comment">//到距离底部0的时候触发onEndReached方法</span></span><br><span class="line">        onEndReached=&#123;() =&gt; &#123; <span class="built_in">console</span>.log(<span class="string">"拉到底部了"</span>) &#125;&#125;</span><br><span class="line">      /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="keyword">const</span> overrideRenderItem = <span class="function">(<span class="params">&#123; item, index, section: &#123; title, data &#125; &#125;</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> '<span class="attr">red</span>' &#125;&#125; <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>Override1&#123;item&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line">  <span class="keyword">const</span> overrideRenderItem2 = <span class="function">(<span class="params">&#123; item, index, section: &#123; title, data &#125; &#125;</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> '<span class="attr">blue</span>' &#125;&#125; <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>Override2&#123;item&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="7-其他组件"><a href="#7-其他组件" class="headerlink" title="7.其他组件"></a>7.其他组件</h2><p>ActivityIndicator     —&gt; 提示的Activity</p>
<p>Alert              —&gt;提示弹框</p>
<p>Modal             —&gt;模态页面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button onPress=&#123;showModal&#125; title=<span class="string">"弹出Modal"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line">      &lt;Button onPress=&#123;showAlert&#125; title=<span class="string">"弹出Alert"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">      &lt;Modal</span><br><span class="line">        animationType=<span class="string">'slide'</span>           <span class="comment">// 从底部滑入</span></span><br><span class="line">        transparent=&#123;<span class="literal">false</span>&#125;             <span class="comment">// 不透明</span></span><br><span class="line">        visible=&#123;showmodal&#125;    <span class="comment">// 根据isModal决定是否显示</span></span><br><span class="line">        onRequestClose=&#123;() =&gt; &#123; <span class="built_in">console</span>.log(<span class="string">"onRequestClose"</span>) &#125;&#125;  <span class="comment">// android必须实现</span></span><br><span class="line">      &gt;</span><br><span class="line">        &lt;View style=&#123;styles.modalViewStyle&#125;&gt;</span><br><span class="line">          &#123;<span class="comment">/* 关闭页面 */</span>&#125;</span><br><span class="line">          &lt;TouchableOpacity</span><br><span class="line">            onPress=&#123;() =&gt; &#123;</span><br><span class="line">              onChangeShowmodal(<span class="literal">false</span>)</span><br><span class="line">            &#125;&#125;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;Text&gt;关闭页面&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>TouchableOpacity&gt;</span><br><span class="line">        &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>Modal&gt;</span><br><span class="line"></span><br><span class="line">      &lt;ActivityIndicator animating=&#123;<span class="literal">true</span>&#125; color=<span class="string">"blue"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">ActivityIndicator</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">showAlert = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    Alert.alert(</span><br><span class="line">      <span class="string">'Alert Title'</span>,</span><br><span class="line">      <span class="string">'My Alert Msg'</span>,</span><br><span class="line">      [</span><br><span class="line">        &#123; <span class="attr">text</span>: <span class="string">'Ask me later'</span>, <span class="attr">onPress</span>: <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Ask me later pressed'</span>) &#125;,</span><br><span class="line">        &#123; <span class="attr">text</span>: <span class="string">'Cancel'</span>, <span class="attr">onPress</span>: <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Cancel Pressed'</span>), <span class="attr">style</span>: <span class="string">'cancel'</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">text</span>: <span class="string">'OK'</span>, <span class="attr">onPress</span>: <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'OK Pressed'</span>) &#125;,</span><br><span class="line">      ],</span><br><span class="line">      &#123; <span class="attr">cancelable</span>: <span class="literal">false</span> &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  showModal = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    onChangeShowmodal(<span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">const</span> [showModal1,onChangeShowmodal] = React.useState(<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>

<p>Animated的使用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [fadeInOpacity, onChangeFadeInOpacity] = React.useState(<span class="keyword">new</span> Animated.Value(<span class="number">0</span>))</span><br><span class="line">  React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    Animated.timing(fadeInOpacity, &#123;</span><br><span class="line">      toValue: <span class="number">1</span>, <span class="comment">// 目标值</span></span><br><span class="line">      duration: <span class="number">2500</span>, <span class="comment">// 动画时间</span></span><br><span class="line">    &#125;).start();</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line"> &lt;Animated.View                       <span class="comment">// 使用专门的可动画化的View组件</span></span><br><span class="line">        style=&#123;&#123;</span><br><span class="line">          opacity: fadeInOpacity          <span class="comment">// 将透明度指定为动画变量值</span></span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;Text&gt;测试透明度动画&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>Animated.View&gt;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/04/22-react项目练手/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/04/22-react项目练手/" itemprop="url">22.react项目练手</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-04T23:06:14+08:00">
                2019-12-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-小问题"><a href="#1-小问题" class="headerlink" title="1.小问题"></a>1.小问题</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Intervention] Unable to preventDefault inside passive event listener due to target being treated <span class="keyword">as</span> passive. See &lt;URL&gt;</span><br><span class="line">    </span><br><span class="line">由于目标被当作被动事件监听器，无法防止被动事件监听器中的默认值。看到&lt; URL &gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">body&#123;</span><br><span class="line">   touch-action: none;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-路由使用"><a href="#2-路由使用" class="headerlink" title="2.路由使用"></a>2.路由使用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; withRouter &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.props.history.push(<span class="string">"/"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withRouter (RTab);</span><br><span class="line"></span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line">      &lt;RNav&gt;<span class="xml"><span class="tag">&lt;/<span class="name">RNav</span>&gt;</span></span></span><br><span class="line">      &lt;RouterMap&gt;<span class="xml"><span class="tag">&lt;/<span class="name">RouterMap</span>&gt;</span></span></span><br><span class="line">      &lt;Button type=<span class="string">'primary'</span>&gt;按钮&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;RTab&gt;&lt;/</span>RTab&gt;  </span><br><span class="line">&lt;<span class="regexp">/HashRouter&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-路由传值"><a href="#3-路由传值" class="headerlink" title="3.路由传值"></a>3.路由传值</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  1. 导入get的方法</span></span><br><span class="line"><span class="keyword">import</span> &#123;fetchget,fetchpost&#125; <span class="keyword">from</span> <span class="string">'../../untils/myfetch.js'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 获取数据</span></span><br><span class="line"><span class="keyword">async</span> componentDidMount() &#123;</span><br><span class="line">        <span class="comment">// 获取广告数据</span></span><br><span class="line">        <span class="keyword">const</span> result =<span class="keyword">await</span> fetchget(<span class="string">'/api/homead'</span>)</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            ads: result</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 传值</span></span><br><span class="line"> &lt;Ad ads=&#123;<span class="keyword">this</span>.state.ads&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Ad</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 渲染到页面上</span></span><br><span class="line">&lt;div className=<span class="string">"ad-container clear-fix"</span>&gt;</span><br><span class="line">      &#123;<span class="keyword">this</span>.props.ads.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span> <span class="attr">className</span>=<span class="string">"ad-item float-left"</span>&gt;</span></span></span><br><span class="line">               &lt;a href=&#123;item.link&#125; target="_blank"&gt;</span><br><span class="line">                     &lt;img src=&#123;require(item.img+'')&#125; alt=&#123;item.title&#125;/&gt;</span><br><span class="line">               &lt;/a&gt;</span><br><span class="line"><span class="xml">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">     &#125;)&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>拓展 </p>
<ol>
<li>根据 ads 的长度进行判断是否加载</li>
<li>导入 ActivityIndicator 组件</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ActivityIndicator&#125; <span class="keyword">from</span> <span class="string">'antd-mobile'</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">         <span class="comment">//传递数据给子组件</span></span><br><span class="line">         <span class="keyword">this</span>.state.ads.length</span><br><span class="line">          ? <span class="xml"><span class="tag">&lt;<span class="name">Ad</span> <span class="attr">ads</span>=<span class="string">&#123;this.state.ads&#125;/</span>&gt;</span></span></span><br><span class="line">         : &lt;ActivityIndicator text="loading..."/&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/02/21-Flux和Redux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/02/21-Flux和Redux/" itemprop="url">21.Flux和Redux</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-02T20:52:25+08:00">
                2019-12-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-react-virtualized"><a href="#1-react-virtualized" class="headerlink" title="1.react-virtualized"></a>1.react-virtualized</h2><p>是一个react中的虚拟化的库，使用它来做列表、Grid可以提高性能，减少dom操作。</p>
<ul>
<li><p>Grid：用于优化构建任意网状的结构，传入一个二维的数组，渲染出类似棋盘的结构。</p>
</li>
<li><p>List：List是基于Grid来实现的，但是是一个维的列表，而不是网状。</p>
</li>
<li><p>Collection：类似于瀑布流的形式，同样可以水平和垂直方向滚动。</p>
</li>
</ul>
<h2 id="2-Flux"><a href="#2-Flux" class="headerlink" title="2.Flux"></a>2.Flux</h2><p>Flux 是一种架构思想，专门解决软件的结构问题。它跟MVC 架构是同一类东西，但是更加简单和清晰</p>
<p>Flux把应用分为4个部分:</p>
<ol>
<li><p>View  :  视图</p>
</li>
<li><p>Action  ：动作</p>
</li>
<li><p>Dispatcher ：派发器，用来接收Action</p>
</li>
<li><p>Store ： 数据层</p>
</li>
</ol>
<p>Flux最大特点：数据单向流动</p>
<h2 id="3-Redux"><a href="#3-Redux" class="headerlink" title="3.Redux"></a>3.Redux</h2><p>我们把Flux看做一个框架的理念的话，Redux是Flux的一种实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Redux在此基础上强调三个基本原则：</span><br><span class="line"><span class="number">1.</span>唯一数据源 ：唯一数据源指的是应用的状态数据应该只存储在唯一的一个Store上。</span><br><span class="line"><span class="number">2.</span>保持状态只读 ： 保持状态只读，就是说不能去直接修改状态，要修改Store的状态，必须要通过派发一个action对象完成。</span><br><span class="line"><span class="number">3.</span>数据改变只能通过纯函数完成 ：这里所说的纯函数就是把Reducer，Reducer描述了state状态如何修改。Redux这个名字的前三个字母Red代表的就是Reducer，其实Redux名字的含义就是Reducer+Flux。</span><br></pre></td></tr></table></figure>

<p><img src="/2019/12/02/21-Flux和Redux/1.png" alt="BP"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.安装redux   yarn add redux</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.引入createStore，用来创建一个Store对象</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.创建actions。action是改变state的唯一途径，返回一个普通的javascript对象，</span></span><br><span class="line"><span class="comment">//它描述了一个行为且是改变state的唯一途径。</span></span><br><span class="line"><span class="comment">//这个行为我们需要通过dispatch函数来触发action，从而改变对应的state。</span></span><br><span class="line"><span class="comment">//action必须带有type指明具体的行为名称，且能附带上额外的信息。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addFn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">type</span>:<span class="string">'ADD'</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">minusFn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">type</span>:<span class="string">'MINUS'</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">4.创建reducer</span></span><br><span class="line"><span class="comment">    这是一个 reducer，形式为 (state, action) =&gt; state 的纯函数。</span></span><br><span class="line"><span class="comment">    该reducer可以接收action，描述如何通过action把state转变成下一个state。</span></span><br><span class="line"><span class="comment">    state的形式取决于你，可以是基本类型、数组、对象、甚至是Immutable.js 生成的数据结构。</span></span><br><span class="line"><span class="comment">    惟一的要点是当state变化时需要返回全新的对象，而不是修改传入的参数。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">counter</span>(<span class="params">state = <span class="number">0</span>, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'ADD'</span>:</span><br><span class="line">          <span class="keyword">return</span> state + <span class="number">1</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'MINUS'</span>:</span><br><span class="line">          <span class="keyword">return</span> state - <span class="number">1</span></span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">          <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//5.创建一个store。store对象的API 有 &#123; subscribe, dispatch, getState &#125;。</span></span><br><span class="line"><span class="keyword">let</span> store = createStore(counter)</span><br><span class="line"></span><br><span class="line"><span class="comment">//6.订阅更新，监听state的变化</span></span><br><span class="line">store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(store.getState(),<span class="string">"xxxx"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//7.通过dispatch来触发action修改state</span></span><br><span class="line">store.dispatch(addFn())</span><br><span class="line">store.dispatch(addFn())</span><br><span class="line">store.dispatch(minusFn())</span><br></pre></td></tr></table></figure>

<h3 id="3-1-异步处理"><a href="#3-1-异步处理" class="headerlink" title="3.1 异步处理"></a>3.1 异步处理</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">异步处理：</span><br><span class="line"><span class="number">1.</span>	yarn add redux-thunk </span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>	<span class="keyword">const</span> store=createStore(couter ,applyMiddleware(thunk))</span><br><span class="line">    <span class="keyword">import</span> &#123; createStore,applyMiddleware &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>	声明异步action</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addAsynFn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">dispatch</span>=&gt;</span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            dispatch(addFn())</span><br><span class="line">        &#125;,<span class="number">2000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>react-redux是在react中使用redux的一个插件，使用它可以方便快捷的在react中用redux。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//react-redux的使用步骤</span></span><br><span class="line"><span class="comment">//1.安装 yarn add react-redux</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.react-redux 给我们提供了两个接口：一个Provider，一个是connect</span></span><br><span class="line"><span class="comment">//2.1 Provider组件的作用：在子组件中快速获取到store对象</span></span><br><span class="line"><span class="comment">//2.2 connect组件的作用：连接React组件与Redux store。连接操作不会改变原来的组件类,反而返回一个新的已与Redux store连接的组件类。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.在index.js中引入Provider组件，并且作为项目根组件包裹App组件，然后传入store</span></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span><span class="tag">&lt;<span class="name">App</span>/&gt;</span><span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.在需要视同redux的组件中引入connect组件，然后使用connect将当前组件和redux的store关联</span></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br><span class="line"><span class="keyword">import</span> &#123; addFn, minusFn, addAsynFn &#125; <span class="keyword">from</span> <span class="string">'./actions/index'</span></span><br><span class="line"><span class="comment">//会将store中state的数据映射到组件的props中</span></span><br><span class="line"><span class="keyword">const</span> mapStatetoProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">num</span>: state &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//会将actions映射到组件的props中 </span></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = &#123; addFn, minusFn, addAsynFn &#125;</span><br><span class="line"><span class="comment">//使用connect返回一个已经把App和store联系起来的一个组件</span></span><br><span class="line">App = connect(mapStatetoProps, mapDispatchToProps)(App)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//5.在组件的页面中就可以使用store了</span></span><br><span class="line">        <span class="keyword">const</span> num = <span class="keyword">this</span>.props.num</span><br><span class="line">        <span class="keyword">const</span> addFn = <span class="keyword">this</span>.props.addFn</span><br><span class="line">        <span class="keyword">const</span> minusFn = <span class="keyword">this</span>.props.minusFn</span><br><span class="line">        <span class="keyword">const</span> addAsynFn = <span class="keyword">this</span>.props.addAsynFn</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div className=<span class="string">"App"</span>&gt;</span><br><span class="line">                &lt;h1&gt;你好吗？&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">                &#123;&lt;p&gt;现在的总数是：&#123;num&#125;&lt;/</span>p&gt;&#125;</span><br><span class="line">                &#123;&lt;button onClick=&#123;addFn&#125;&gt;加<span class="number">1</span>&lt;<span class="regexp">/button&gt;&#125;</span></span><br><span class="line"><span class="regexp">                &#123;&lt;button onClick=&#123;minusFn&#125;&gt;减1&lt;/</span>button&gt;&#125;</span><br><span class="line">                &#123;&lt;button onClick=&#123;addAsynFn&#125;&gt;异步加<span class="number">1</span>&lt;<span class="regexp">/button&gt;&#125; </span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        );</span><br></pre></td></tr></table></figure>

<p>合并多个reducers</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.使用combineReducers合并多个reducer</span></span><br><span class="line"><span class="keyword">import</span> &#123;combineReducers&#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;counter&#125; <span class="keyword">from</span> <span class="string">'./counter'</span>;  </span><br><span class="line"><span class="keyword">import</span> &#123;location&#125; <span class="keyword">from</span> <span class="string">'./location'</span>;  </span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> combineReducers(&#123;counter,location&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.在index.js中引入合并后的reducer，并且使用合并后的reducer创建store</span></span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducers/index'</span></span><br><span class="line"><span class="keyword">let</span> store = createStore(reducer,applyMiddleware(thunk))</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.在页面使用store的时候需要从state中获取对应的数据</span></span><br><span class="line"><span class="keyword">const</span> mapStatetoProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">num</span>:state.counter,<span class="attr">location</span>:state.location&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-redux的不可变数据"><a href="#4-redux的不可变数据" class="headerlink" title="4.redux的不可变数据"></a>4.redux的不可变数据</h2><p>在redux中整个应用共用一个state。如何判断state更新呢？Redux采用不可变数据。</p>
<p>我们在判断数据是否相同时，并不需要深入判断数据对象的值是否相同，只需要浅比较即可，也就是判断是否为同一个数据对象地址，因为不可变数据对象在数据变化时均会重新创建一个新的数据对象，数据对象的地址不会相同。这也就是为什么在Reactjs，Redux中才有不可变数据对象。</p>
<h2 id="5-fetch的使用"><a href="#5-fetch的使用" class="headerlink" title="5.fetch的使用"></a>5.fetch的使用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安装  yarn add whatwg-fetch es6-promise</span></span><br><span class="line"></span><br><span class="line">fetch(<span class="string">'/api/home'</span>, &#123;</span><br><span class="line">            credentials: <span class="string">"include"</span>,</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            fetch不管在同域还是在跨域的情况下，默认都不携带cookie的，所以那些需要权限验证的请求就无法正常获取到数据，这时候需要配置credentials项，有一下三个选项可添：</span></span><br><span class="line"><span class="comment">             omit： 默认值，忽略cookie的发送</span></span><br><span class="line"><span class="comment">             same-origin： 表示cookie只能同域发送，不能跨域发送</span></span><br><span class="line"><span class="comment">             include： 表示既可以同域发送，也可以跨域发送</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">        &#125;)</span><br><span class="line">            .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">//有三种方式解析获取到的数据：</span></span><br><span class="line">                <span class="comment">//1  json数据       用reponse.json()来解析</span></span><br><span class="line">                <span class="comment">//2  xml格式文件    用response.text()来解析</span></span><br><span class="line">                <span class="comment">//3  图片文件       用response.blob()来解析</span></span><br><span class="line">                <span class="keyword">return</span> response.json();</span><br><span class="line">            &#125;)</span><br><span class="line">            .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(data);</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> handleRequestPOST = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//post请求需要提交的数据</span></span><br><span class="line">        fetch(<span class="string">'/api/submit'</span>, &#123;</span><br><span class="line">            method: <span class="string">'post'</span>,   <span class="comment">//请求方式</span></span><br><span class="line">            credentials: <span class="string">"include"</span>,</span><br><span class="line">            headers: &#123;</span><br><span class="line">                <span class="comment">//post请求格式</span></span><br><span class="line">                <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//post请求发送的数据需要是这样的</span></span><br><span class="line">            body: <span class="string">"name=zhangsan&amp;content=宝宝不开心"</span></span><br><span class="line">        &#125;)</span><br><span class="line">            .then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">            .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(data);</span><br><span class="line">            &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'error is'</span>, error));</span><br></pre></td></tr></table></figure>

<p>代理的配置：</p>
<ol>
<li><p>yarn add http-proxy-middleware</p>
</li>
<li><p>在src目录下创建setupProxy.js</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">"http-proxy-middleware"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">app</span>) </span>&#123;</span><br><span class="line">  app.use(</span><br><span class="line">    proxy(<span class="string">"/api/*"</span>, &#123;</span><br><span class="line">      target: <span class="string">"http://localhost:9999/"</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line"><span class="comment">//   app.use(</span></span><br><span class="line"><span class="comment">//     proxy("/fans/**", &#123;</span></span><br><span class="line"><span class="comment">//       target: "https://easy-mock.com/mock/5c0f31837214cf627b8d43f0/",</span></span><br><span class="line"><span class="comment">//       changeOrigin: true</span></span><br><span class="line"><span class="comment">//     &#125;)</span></span><br><span class="line"><span class="comment">//   );</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="5-1-fetch的封装"><a href="#5-1-fetch的封装" class="headerlink" title="5.1 fetch的封装"></a>5.1 fetch的封装</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'whatwg-fetch'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'es6-promise'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//导出get请求</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchget</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = fetch(url, &#123;</span><br><span class="line">        credentials: <span class="string">'include'</span>,</span><br><span class="line">        headers: &#123;</span><br><span class="line">            <span class="string">'Accept'</span>: <span class="string">'application/json, text/plain, */*'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> result.then(<span class="function"><span class="params">response</span> =&gt;</span> response.json());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发送 post 请求</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchpost</span>(<span class="params">url, paramsObj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = fetch(url, &#123;</span><br><span class="line">        method: <span class="string">'POST'</span>,</span><br><span class="line">        credentials: <span class="string">'include'</span>,</span><br><span class="line">        headers: &#123;</span><br><span class="line">            <span class="string">'Accept'</span>: <span class="string">'application/json, text/plain, */*'</span>,</span><br><span class="line">            <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        body: obj2params(paramsObj)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> result.then(<span class="function"><span class="params">response</span> =&gt;</span> response.json());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将对象拼接成 key1=val1&amp;key2=val2&amp;key3=val3 的字符串形式</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">obj2params</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">var</span> item;</span><br><span class="line">    <span class="keyword">for</span> (item <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        result += <span class="string">'&amp;'</span> + item + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(obj[item]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        result = result.slice(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/29/20-creat-react-app/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/29/20-creat-react-app/" itemprop="url">20.creat-react-app</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-29T16:14:38+08:00">
                2019-11-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-React-dev-tools"><a href="#1-React-dev-tools" class="headerlink" title="1.   React dev tools"></a>1.   React dev tools</h2><p>将资料中的react-developer-tools-3.6.0 拖入到浏览器的扩展程序中</p>
<p> <img src="/2019/11/29/20-creat-react-app/1.png" alt="BP"></p>
<h2 id="2-creat-react-app创建项目"><a href="#2-creat-react-app创建项目" class="headerlink" title="2.  creat-react-app创建项目"></a>2.  creat-react-app创建项目</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 全局安装</span><br><span class="line">npm install -g create-react-app</span><br><span class="line"></span><br><span class="line"># 构建一个my-app的项目</span><br><span class="line">npx create-react-app my-app</span><br><span class="line"></span><br><span class="line"># 运行项目</span><br><span class="line">yarn start  /npm run start</span><br></pre></td></tr></table></figure>

<p><img src="/2019/11/29/20-creat-react-app/2.png" alt="BP"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># react-scripts主要设计原理是将配置好的如 `Webpack，Babel，ESLint` ，合并到 `react-scripts` 这npm包中，用户就可以开箱即用</span><br><span class="line"></span><br><span class="line">yarn run eject  #反编译将react-scripts包反编辑成源代码(配置文件)</span><br><span class="line">npm install    #反编译之后要重新安装项目的依赖，否则项目运行不起来</span><br><span class="line">yarn start     #重新启动app</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改yarn和npm的源 ★</span></span><br><span class="line">yarn config <span class="keyword">set</span> registry https://registry.npm.taobao.org/</span><br><span class="line">npm config <span class="keyword">set</span> registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<h2 id="3-creat-react-app基本配置"><a href="#3-creat-react-app基本配置" class="headerlink" title="3.   creat-react-app基本配置"></a>3.   creat-react-app基本配置</h2><ol>
<li><p>开启模块化 ：</p>
<p>只要给文件名命名为  xx.module.css   xx.module.scss  xx.module.less</p>
</li>
<li><p>开启sass：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add node-sass</span><br></pre></td></tr></table></figure>

<p>然后创建button.scss或者button.module.scss，此时就可以使用scss文件了</p>
</li>
<li><p>在scss文件中引入其他文件</p>
<p>~代表nodel_modules</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">import</span> <span class="string">'../styles/common.scss'</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">'~bootstrap/dist/css/bootstrap.css'</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>开启less </p>
<p>Yarn add less less-loader</p>
<p>   修改webpack.config.js  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//找到如下代码</span></span><br><span class="line"><span class="keyword">const</span> cssRegex = <span class="regexp">/\.css$/</span>;</span><br><span class="line"><span class="keyword">const</span> cssModuleRegex = <span class="regexp">/\.module\.css$/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改为如下代码</span></span><br><span class="line"><span class="keyword">const</span> cssRegex = <span class="regexp">/\.(css|less)$/</span>;</span><br><span class="line"><span class="keyword">const</span> cssModuleRegex = <span class="regexp">/\.module\.(css|less)$/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//找到这段代码</span></span><br><span class="line">test: cssRegex,</span><br><span class="line">exclude: cssModuleRegex,</span><br><span class="line">use: getStyleLoaders(&#123;</span><br><span class="line">    importLoaders: <span class="number">1</span>,</span><br><span class="line">    sourceMap: isEnvProduction &amp;&amp; shouldUseSourceMap,</span><br><span class="line">&#125;),</span><br><span class="line"><span class="comment">// Don't consider CSS imports dead code even if the</span></span><br><span class="line"><span class="comment">// containing package claims to have no side effects.</span></span><br><span class="line"><span class="comment">// Remove this when webpack adds a warning or an error for this.</span></span><br><span class="line"><span class="comment">// See https://github.com/webpack/webpack/issues/6571</span></span><br><span class="line">sideEffects: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改为如下代码</span></span><br><span class="line">test: cssRegex,</span><br><span class="line">exclude: cssModuleRegex,</span><br><span class="line">use: getStyleLoaders(&#123;</span><br><span class="line">    importLoaders: <span class="number">2</span>,</span><br><span class="line">    sourceMap: isEnvProduction &amp;&amp; shouldUseSourceMap,</span><br><span class="line">  &#125;,</span><br><span class="line">    <span class="string">'less-loader'</span></span><br><span class="line">),</span><br><span class="line"><span class="comment">// Don't consider CSS imports dead code even if the</span></span><br><span class="line"><span class="comment">// containing package claims to have no side effects.</span></span><br><span class="line"><span class="comment">// Remove this when webpack adds a warning or an error for this.</span></span><br><span class="line"><span class="comment">// See https://github.com/webpack/webpack/issues/6571</span></span><br><span class="line">sideEffects: <span class="literal">true</span>,</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置@路径</p>
<p>修改webpack.config.js:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">alias: &#123;</span><br><span class="line">        <span class="comment">// Support React Native Web</span></span><br><span class="line">        <span class="comment">// https://www.smashingmagazine.com/2016/08/a-glimpse-into-the-future-with-react-native-for-web/</span></span><br><span class="line">        <span class="string">'react-native'</span>: <span class="string">'react-native-web'</span>,</span><br><span class="line">        <span class="comment">// Allows for better profiling with ReactDevTools</span></span><br><span class="line">        ...(isEnvProductionProfile &amp;&amp; &#123;</span><br><span class="line">          <span class="string">'react-dom$'</span>: <span class="string">'react-dom/profiling'</span>,</span><br><span class="line">          <span class="string">'scheduler/tracing'</span>: <span class="string">'scheduler/tracing-profiling'</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">        ...(modules.webpackAliases || &#123;&#125;),</span><br><span class="line">        <span class="string">'@'</span>:path.join(__dirname, <span class="string">'..'</span>, <span class="string">"src"</span>) ★</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>环境变量的使用</p>
<ul>
<li><p>在项目根目录下创建.env文件，去写环境变量。注意：如果是自定义环境变量，需要以REACT_APP_开头</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">REACT_APP_WEBSITE_NAME=myapp</span><br><span class="line">REACT_APP_PUBLIC_URL=localhost:3000</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用环境变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在js代码中使用环境变量</span></span><br><span class="line">  <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">'production'</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"development"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#123;<span class="comment">/*在组件中使用环境变量*/</span>&#125;</span><br><span class="line">      &lt;small&gt;You are running <span class="keyword">this</span> application <span class="keyword">in</span> &lt;b&gt;&#123;process.env.NODE_ENV&#125;&lt;<span class="regexp">/b&gt; mode.&lt;/</span>small&gt;</span><br><span class="line">      &lt;input type=<span class="string">"text"</span> defaultValue=&#123;process.env.REACT_APP_WEBSITE_NAME&#125; /&gt;</span><br><span class="line">    &lt;!--在html页面中使用环境变量--&gt;</span><br><span class="line">    &lt;title&gt;%REACT_APP_WEBSITE_NAME%<span class="xml"><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>图片的使用</p>
<ul>
<li><p>在属性或者行业样式中使用图片</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Logo <span class="keyword">from</span> <span class="string">'./assets/jjf.jpeg'</span></span><br><span class="line">&lt;img src=&#123;Logo&#125; alt=<span class="string">"Logo"</span> /&gt;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在css样式中使用图片  不需要引入,可以直接使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.logoDiv&#123;</span><br><span class="line">  width: <span class="number">100</span>px;</span><br><span class="line">  height: <span class="number">100</span>px;</span><br><span class="line">  background-image: url(<span class="string">'./assets/jjf.jpeg'</span>);</span><br><span class="line">  background-position: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>字体图标的使用</p>
<ul>
<li><p>npm install font-awesome</p>
</li>
<li><p>引入样式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'font-awesome/css/font-awesome.css'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用样式</p>
<p>具体使用参照官网：<a href="http://www.fontawesome.com.cn/faicons/" target="_blank" rel="noopener">http://www.fontawesome.com.cn/faicons/</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-address-book"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>reactstrap的使用</p>
<p> reactstrap：是一个基于boostrap的react组件库</p>
<p>yarn add reactstrap [<a href="mailto:bootstrap@4.0.0" target="_blank" rel="noopener">bootstrap@4.0.0</a>]</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'bootstrap/dist/css/bootstrap.css'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Alert &#125; <span class="keyword">from</span> <span class="string">'reactstrap'</span>;</span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/*使用reactstrap组件 */</span>&#125;</span><br><span class="line">      &lt;Alert color=<span class="string">"primary"</span>&gt;</span><br><span class="line">        This is a primary alert — check it out!</span><br><span class="line">      &lt;<span class="regexp">/Alert&gt;</span></span><br></pre></td></tr></table></figure>

<p>具体用法：参照 <a href="http://reactstrap.github.io/components/modals/" target="_blank" rel="noopener">http://reactstrap.github.io/components/modals/</a></p>
</li>
</ol>
<h2 id="4-AntDesign的使用"><a href="#4-AntDesign的使用" class="headerlink" title="4.   AntDesign的使用"></a>4.   AntDesign的使用</h2><ol>
<li><p>安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add antd</span><br></pre></td></tr></table></figure>
</li>
<li><p>按需加载</p>
<p>a.      yarn add babel-plugin-import –dev</p>
<p>b.     修改webpack.config.dev.js，将babelrc改成true</p>
<p>c.      删除package.json中babel的配置</p>
<p>d.     在项目根目录下创建一个 .babelrc文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"presets"</span>: [</span><br><span class="line">        <span class="string">"react-app"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"plugins"</span>: [</span><br><span class="line">        [</span><br><span class="line">            <span class="string">"import"</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"libraryName"</span>: <span class="string">"antd"</span>,</span><br><span class="line">                <span class="string">"style"</span>: <span class="string">"css"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用antd</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; DatePicker &#125; <span class="keyword">from</span> <span class="string">'antd'</span>;</span><br></pre></td></tr></table></figure>

<p>然后在页面中使用对应的组件就可以了</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/27/19.react-spring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/27/19.react-spring/" itemprop="url">19.react-spring</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-27T22:31:39+08:00">
                2019-11-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-react-spring基本使用"><a href="#1-react-spring基本使用" class="headerlink" title="1.  react-spring基本使用"></a>1.  react-spring基本使用</h1><p>1.安装动画库   </p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">npm</span> install react-spring</span><br></pre></td></tr></table></figure>

<p>2.引入动画库  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useSpring, animated, config &#125; from &apos;react-spring&apos;</span><br></pre></td></tr></table></figure>

<p>3.声明改变透明度的动画  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">const</span> opacityAnimation = useSpring(&#123;</span><br><span class="line">        <span class="keyword">from</span>: &#123; <span class="attr">opacity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">        to: &#123; <span class="attr">opacity</span>: <span class="number">1</span> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"> &#123;<span class="comment">/*把要动画的元素通过animated来修饰*/</span>&#125;</span><br><span class="line">&lt;animated.div style=&#123;opacityAnimation&#125;&gt;Demo1&lt;<span class="regexp">/animated.div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/当我们要对组件进行动画的时候，我们需要使用animated方法把组件包裹起来，然后直接使用包裹后的组件名字</span></span><br><span class="line"><span class="regexp">const AnimatedDonut4 = animated(Donut4)</span></span><br><span class="line"><span class="regexp">return (</span></span><br><span class="line"><span class="regexp">        &lt;AnimatedDonut4&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>AnimatedDonut4&gt;</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<h1 id="2-动画的配置"><a href="#2-动画的配置" class="headerlink" title="2.  动画的配置"></a>2.  动画的配置</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//4.声明改变颜色的动画</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        config的一些配置参数：</span></span><br><span class="line"><span class="comment">            mass：影响速度以及过渡的效果。</span></span><br><span class="line"><span class="comment">            tension：影响整体速度。</span></span><br><span class="line"><span class="comment">            friction：控制阻力及其减速的速度。</span></span><br><span class="line"><span class="comment">            clamp：是否应该瞬间过渡。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        config.default  &#123; mass: 1, tension: 170, friction: 26 &#125;</span></span><br><span class="line"><span class="comment">        config.gentle   &#123; mass: 1, tension: 120, friction: 14 &#125;</span></span><br><span class="line"><span class="comment">        config.wobbly   &#123; mass: 1, tension: 180, friction: 12 &#125;</span></span><br><span class="line"><span class="comment">        config.stiff    &#123; mass: 1, tension: 210, friction: 20 &#125;</span></span><br><span class="line"><span class="comment">        config.slow     &#123; mass: 1, tension: 280, friction: 60 &#125;</span></span><br><span class="line"><span class="comment">        config.molasses &#123; mass: 1, tension: 280, friction: 120 &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">const</span> colorAnimation = useSpring(&#123;</span><br><span class="line">        <span class="keyword">from</span>: &#123; <span class="attr">color</span>: <span class="string">'blue'</span> &#125;,</span><br><span class="line">        color: <span class="string">'red'</span>,  <span class="comment">//默认情况下 to可以省略</span></span><br><span class="line">        config: config.slow, <span class="comment">//动画的配置</span></span><br><span class="line">        config: &#123; <span class="attr">duration</span>: <span class="number">2000</span>,<span class="attr">tension</span>: <span class="number">210</span> &#125;,</span><br><span class="line">        delay: <span class="number">2000</span>, <span class="comment">//动画的延迟时间</span></span><br><span class="line">        reset:<span class="literal">true</span>,  <span class="comment">//从from状态过渡到to状态的时候有动画</span></span><br><span class="line">        reverse: <span class="literal">true</span>, <span class="comment">//反转from和to的状态(reverse要生效，一定要先设置reset为true)</span></span><br><span class="line">        <span class="comment">//动画开始的时候调用</span></span><br><span class="line">        onStart:<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"onStart"</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//动画停止的时候调用</span></span><br><span class="line">        onRest:<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"onRest"</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//每一帧动画都会调用onFrame，即使动画没有开始也会调用，会将动画的属性值作为参数入参</span></span><br><span class="line">        onFrame:<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"onFrame"</span>,value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h1 id="3-添加多个动画属性和动画状态"><a href="#3-添加多个动画属性和动画状态" class="headerlink" title="3.  添加多个动画属性和动画状态"></a>3.  添加多个动画属性和动画状态</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//5.创建多个属性的动画</span></span><br><span class="line">    <span class="keyword">const</span> multiAnimation = useSpring(&#123;</span><br><span class="line">        <span class="keyword">from</span>: &#123; <span class="attr">opacity</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">'red'</span> &#125;,</span><br><span class="line">        to: [</span><br><span class="line">            &#123; <span class="attr">opacity</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">'#ffaaee'</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">opacity</span>: <span class="number">0.1</span>, <span class="attr">color</span>: <span class="string">'red'</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">opacity</span>: <span class="number">.5</span>, <span class="attr">color</span>: <span class="string">'#008000'</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">opacity</span>: <span class="number">.8</span>, <span class="attr">color</span>: <span class="string">'black'</span> &#125;</span><br><span class="line">        ],</span><br><span class="line">        config: &#123; <span class="attr">duration</span>: <span class="number">2000</span> &#125;,</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>



<p>//通过async和await来控制多个动画状态</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> animation = useSpring(&#123;</span><br><span class="line">        <span class="keyword">from</span>: &#123; <span class="attr">left</span>: <span class="string">'0%'</span>, <span class="attr">top</span>: <span class="string">'0%'</span>, <span class="attr">width</span>: <span class="string">'0%'</span>, <span class="attr">height</span>: <span class="string">'0%'</span>, <span class="attr">background</span>: <span class="string">'lightgreen'</span> &#125;,</span><br><span class="line">to: <span class="keyword">async</span> (next, cancel) =&gt; &#123;</span><br><span class="line">     <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">await</span> next(&#123; <span class="attr">left</span>: <span class="string">'0%'</span>, <span class="attr">top</span>: <span class="string">'0%'</span>, <span class="attr">width</span>: <span class="string">'100%'</span>, <span class="attr">height</span>: <span class="string">'100%'</span>,<span class="attr">background</span>: <span class="string">'lightblue'</span> &#125;)</span><br><span class="line"><span class="keyword">await</span> next(&#123; <span class="attr">height</span>: <span class="string">'50%'</span>, <span class="attr">background</span>: <span class="string">'lightgreen'</span> &#125;)</span><br><span class="line"><span class="keyword">await</span> next(&#123; <span class="attr">width</span>: <span class="string">'50%'</span>, <span class="attr">left</span>: <span class="string">'50%'</span>, <span class="attr">background</span>: <span class="string">'lightgoldenrodyellow'</span> &#125;)</span><br><span class="line"><span class="keyword">await</span> next(&#123; <span class="attr">top</span>: <span class="string">'0%'</span>, <span class="attr">height</span>: <span class="string">'100%'</span>, <span class="attr">background</span>: <span class="string">'lightpink'</span> &#125;)</span><br><span class="line"><span class="keyword">await</span> next(&#123; <span class="attr">top</span>: <span class="string">'50%'</span>, <span class="attr">height</span>: <span class="string">'50%'</span>, <span class="attr">background</span>: <span class="string">'lightsalmon'</span> &#125;)</span><br><span class="line"><span class="keyword">await</span> next(&#123; <span class="attr">width</span>: <span class="string">'100%'</span>, <span class="attr">left</span>: <span class="string">'0%'</span>, <span class="attr">background</span>: <span class="string">'lightcoral'</span> &#125;)</span><br><span class="line"><span class="keyword">await</span> next(&#123; <span class="attr">width</span>: <span class="string">'50%'</span>, <span class="attr">background</span>: <span class="string">'lightseagreen'</span> &#125;)</span><br><span class="line"><span class="keyword">await</span> next(&#123; <span class="attr">top</span>: <span class="string">'0%'</span>, <span class="attr">height</span>: <span class="string">'100%'</span>, <span class="attr">background</span>: <span class="string">'lightskyblue'</span> &#125;)</span><br><span class="line"><span class="keyword">await</span> next(&#123; <span class="attr">width</span>: <span class="string">'100%'</span>, <span class="attr">background</span>: <span class="string">'lightslategrey'</span> &#125;)</span><br><span class="line"> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h1 id="4-interpolate的使用"><a href="#4-interpolate的使用" class="headerlink" title="4.  interpolate的使用"></a>4.  interpolate的使用</h1><p>interpolate方法可以用来在动画执行的过程中，根据给定的起始、最终值，计算动画的每一步需要的值。</p>
<p>interpolate还有一个作用可以让我们模拟css的关键帧。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; o, xyz, color &#125; = useSpring(&#123;</span><br><span class="line">        <span class="keyword">from</span>: &#123; <span class="attr">o</span>: <span class="number">0</span>, <span class="attr">xyz</span>: [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], <span class="attr">color</span>: <span class="string">'red'</span> &#125;,</span><br><span class="line">        to: &#123; <span class="attr">o</span>: <span class="number">1</span>, <span class="attr">xyz</span>: [<span class="number">10</span>, <span class="number">20</span>, <span class="number">5</span>], <span class="attr">color</span>: <span class="string">'green'</span> &#125;,</span><br><span class="line">        config: &#123; <span class="attr">duration</span>: <span class="number">2000</span> &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;animated.div style=&#123;&#123;</span><br><span class="line">            color,</span><br><span class="line">            opacity: o.interpolate(<span class="function"><span class="params">v</span> =&gt;</span> v),</span><br><span class="line">            transform: xyz.interpolate(<span class="function">(<span class="params">x, y, z</span>) =&gt;</span> &#123; <span class="keyword">return</span> <span class="string">`translate3d(<span class="subst">$&#123;x&#125;</span>px,<span class="subst">$&#123;y&#125;</span>px,<span class="subst">$&#123;z&#125;</span>px)`</span> &#125;),</span><br><span class="line">            <span class="comment">//直接调用interpolate方法可以合并多个值，这边border使用多个值来设定样式</span></span><br><span class="line">            <span class="comment">//第一个参数是要合并的值；第二个参数是一个箭头函数，用来返回指定样式</span></span><br><span class="line">            border: interpolate([o, color], (o, color) =&gt; &#123; <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;o * <span class="number">10</span>&#125;</span>px solid <span class="subst">$&#123;color&#125;</span>`</span> &#125;),</span><br><span class="line">            <span class="comment">//interpolate还可以来做关键帧动画，range对应动画的阶段，output对应每一个动画阶段的输出值*</span></span><br><span class="line">            padding: o.interpolate(&#123; <span class="attr">range</span>: [<span class="number">0</span>, <span class="number">0.5</span>, <span class="number">1</span>], <span class="attr">output</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">10</span>] &#125;).interpolate(<span class="function"><span class="params">o</span> =&gt;</span> <span class="string">`<span class="subst">$&#123;o&#125;</span>%`</span>),</span><br><span class="line">            borderColor: o.interpolate(&#123; <span class="attr">range</span>: [<span class="number">0</span>, <span class="number">1</span>], <span class="attr">output</span>: [<span class="string">'pink'</span>, <span class="string">'yellow'</span>] &#125;),</span><br><span class="line">            <span class="comment">//interpolate在做关键帧动画的时候，可以省略range和output</span></span><br><span class="line">            opacity: o.interpolate([<span class="number">0.1</span>, <span class="number">0.2</span>, <span class="number">0.6</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">0.1</span>, <span class="number">0.5</span>, <span class="number">1</span>])</span><br><span class="line">        &#125;&#125;&gt;&#123;<span class="comment">/*如果要把动画属性渲染到页面，此时只能有一个元素*/</span>&#125;</span><br><span class="line">            &#123;o.interpolate(<span class="function"><span class="params">v</span> =&gt;</span> v.toFixed(<span class="number">2</span>))&#125;</span><br><span class="line">        &lt;<span class="regexp">/animated.div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br></pre></td></tr></table></figure>

<p>注意点：interpolate只能被动画属性调用，普通字段是不可以调用interpolate方法</p>
<h1 id="5-使用state来控制动画"><a href="#5-使用state来控制动画" class="headerlink" title="5.   使用state来控制动画"></a>5.   使用state来控制动画</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//hook：允许我们在函数组件中使用state</span></span><br><span class="line">    <span class="keyword">const</span> [flag, setFlag] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这边所创建的animation的opacity的变化是通过一个flag的state来控制的</span></span><br><span class="line">    <span class="keyword">const</span> animation = useSpring(&#123;</span><br><span class="line">        <span class="keyword">from</span>: &#123; <span class="attr">opacity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">        to: &#123; <span class="attr">opacity</span>: flag ? <span class="number">1</span> : <span class="number">0</span> &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;button onClick=&#123;()=&gt;&#123;setFlag(!flag)&#125;&#125;&gt;点我切换透明度&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;animated.div onMouseOver=&#123;()=&gt;&#123;setFlag(true)&#125;&#125; onMouseOut=&#123;()=&gt;&#123;setFlag(false)&#125;&#125; style=&#123;animation&#125;&gt;透明度变了&lt;/</span>animated.div&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="6-通过useSpring入参箭头函数来控制动画"><a href="#6-通过useSpring入参箭头函数来控制动画" class="headerlink" title="6. 通过useSpring入参箭头函数来控制动画"></a>6. 通过useSpring入参箭头函数来控制动画</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.useSpring()接收箭头函数，此时会返回一个数组</span></span><br><span class="line">    <span class="comment">//通过解构赋值获取到useSpring()函数返回的结果  animation表示动画属性，set可以用来修改动画属性，stop可以用来停止动画</span></span><br><span class="line">    <span class="keyword">const</span> [animation, <span class="keyword">set</span>, stop] = useSpring(() =&gt; (&#123; opacity: <span class="number">0</span> &#125;))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;animated.div style=&#123;animation&#125; onMouseOver=&#123;()=&gt;&#123;<span class="keyword">set</span>(&#123;opacity: <span class="number">1</span>&#125;)&#125;&#125; onMouseOut=&#123;()=&gt;&#123;<span class="keyword">set</span>(&#123;opacity: <span class="number">0</span>&#125;)&#125;&#125;&gt;移入移出动画&lt;<span class="regexp">/animated.div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<h1 id="7-useSprings动画"><a href="#7-useSprings动画" class="headerlink" title="7.   useSprings动画"></a>7.   useSprings动画</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">useSprings可以用来创建一组Spring，每个Spring都有自己的配置。</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> items = [<span class="number">0.2</span>, <span class="number">0.4</span>, <span class="number">0.6</span>, <span class="number">0.8</span>, <span class="number">1.0</span>];</span><br><span class="line">    <span class="comment">//创建5个spring</span></span><br><span class="line">    <span class="comment">//第一个spring的opacity=0.2</span></span><br><span class="line">    <span class="comment">//第二个spring的opacity=0.4</span></span><br><span class="line">    <span class="comment">//第三个spring的opacity=0.6</span></span><br><span class="line">    <span class="comment">//第四个spring的opacity=0.8</span></span><br><span class="line">    <span class="comment">//第五个spring的opacity=1.0</span></span><br><span class="line">    <span class="keyword">const</span> springs = useSprings(<span class="number">5</span>, items.map(<span class="function"><span class="params">item</span> =&gt;</span> (&#123; <span class="attr">opacity</span>: item,<span class="attr">from</span>:&#123;<span class="attr">opacity</span>:<span class="number">0</span>&#125; &#125;)));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        springs.map(<span class="function">(<span class="params">props,idx</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">animated.div</span> <span class="attr">key</span>=<span class="string">&#123;idx&#125;</span> <span class="attr">style</span>=<span class="string">&#123;props&#125;</span>&gt;</span>item springs<span class="tag">&lt;/<span class="name">animated.div</span>&gt;</span></span>)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<h1 id="8-useTrail动画"><a href="#8-useTrail动画" class="headerlink" title="8.   useTrail动画"></a>8.   useTrail动画</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//useTrail可以用来创建一组Spring，每个Spring都有相同的配置，每个Spring跟随前一个Spring，在交叉的动画中使用</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//这种写法可以</span></span><br><span class="line">    <span class="comment">//const trail = useTrail(5, &#123;opacity: 1&#125;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//这种写法也可以</span></span><br><span class="line">    <span class="comment">//创建5个spring，每个spring的配置都是一样的</span></span><br><span class="line">    <span class="keyword">const</span> [trail, <span class="keyword">set</span>, stop] = useTrail(5, () =&gt; (&#123; opacity: <span class="number">1</span> &#125;))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;trail.map((p, idx) =&gt; <span class="tag">&lt;<span class="name">animated.div</span> <span class="attr">key</span>=<span class="string">&#123;idx&#125;</span> <span class="attr">style</span>=<span class="string">&#123;p&#125;</span> &gt;</span>哈哈<span class="tag">&lt;/<span class="name">animated.div</span>&gt;</span>)&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; set(&#123; opacity: 0 &#125;) &#125;&#125;&gt;点我改变透明度<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<h1 id="9-useTransition动画"><a href="#9-useTransition动画" class="headerlink" title="9.   useTransition动画"></a>9.   useTransition动画</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">useTransition 可以进行过渡动画 (显示-&gt;隐藏)</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.useTransition 可以对一组元素进行过渡动画</span></span><br><span class="line">    <span class="keyword">const</span> [items, setItems] = useState([&#123; <span class="attr">text</span>: <span class="string">'zhangsan'</span>, <span class="attr">key</span>: <span class="number">1</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">'lisi'</span>, <span class="attr">key</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">text</span>: <span class="string">'wangwu'</span>, <span class="attr">key</span>: <span class="number">3</span> &#125;])</span><br><span class="line">    <span class="comment">//使用useTransition创建过渡动画</span></span><br><span class="line">    <span class="keyword">const</span> transitions = useTransition(items, item =&gt; item.key, &#123;</span><br><span class="line">        <span class="keyword">from</span>: &#123; <span class="attr">transform</span>: <span class="string">'translate3d(0,-40px,0)'</span> &#125;,</span><br><span class="line">        enter: &#123; <span class="attr">transform</span>: <span class="string">'translate3d(0,0px,0)'</span> &#125;,</span><br><span class="line">        leave: &#123; <span class="attr">transform</span>: <span class="string">'translate3d(0,-40px,0)'</span> &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; setItems(state =&gt; [&#123; text: 'zhaoliu', key: 12 &#125;, ...state]) &#125;&#125;&gt;增加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;</span></span><br><span class="line"><span class="xml">            transitions.map((&#123; item, props, key &#125;) =&gt;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">animated.div</span> <span class="attr">key</span>=<span class="string">&#123;key&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">...props</span>, <span class="attr">display:</span> "<span class="attr">inline-block</span>", <span class="attr">marginLeft:</span> "<span class="attr">20px</span>" &#125;&#125;&gt;</span>&#123;item.text&#125;<span class="tag">&lt;/<span class="name">animated.div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            )</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2.使用useTransition还可以两个组件的切换动画、以及单个组件的切换动画</span></span><br><span class="line">    <span class="keyword">const</span> [toggle, setToggle] = useState(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建一个transition动画</span></span><br><span class="line">    <span class="keyword">const</span> transitions = useTransition(toggle, <span class="literal">null</span>, &#123;</span><br><span class="line">        <span class="keyword">from</span>: &#123; <span class="attr">position</span>: <span class="string">'absolute'</span>, <span class="attr">opacity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">        enter: &#123; <span class="attr">opacity</span>: <span class="number">1</span> &#125;,</span><br><span class="line">        leave: &#123; <span class="attr">opacity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; setToggle(state =&gt; !state) &#125;&#125;&gt;切换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;</span></span><br><span class="line"><span class="xml">            transitions.map((&#123; item, key, props &#125;) =&gt;</span></span><br><span class="line">                &lt;React.Fragment key=&#123;key&#125;&gt;</span><br><span class="line">                    &#123;/* &#123;item &amp;&amp; &lt;animated.div key=&#123;key&#125; style=&#123;props&#125;&gt;切换单个组件&lt;/animated.div&gt;&#125; */&#125;</span><br><span class="line">                    &#123;item ? &lt;animated.div style=&#123;props&#125;&gt;组件1&lt;/animated.div&gt; : &lt;animated.div style=&#123;props&#125;&gt;组件2&lt;/animated.div&gt;&#125;</span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">React.Fragment</span>&gt;</span></span></span><br><span class="line"><span class="xml">            )</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用useTransition切换路由</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//App2.jsx</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> About <span class="keyword">from</span> <span class="string">'@/components2/About'</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'@/components2/Home'</span></span><br><span class="line"><span class="keyword">import</span> Search <span class="keyword">from</span> <span class="string">'@/components2/Search'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; useTransition, animated &#125; <span class="keyword">from</span> <span class="string">'react-spring'</span></span><br><span class="line"><span class="keyword">import</span> &#123; HashRouter, Route, Link, Switch, useLocation &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App2 = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//1.获取当前的location位置，useLocation这个方法必须要在被HashRouter包裹的节点/子节点中才可以使用</span></span><br><span class="line">    <span class="keyword">const</span> location = useLocation();</span><br><span class="line">    <span class="comment">//2.创建一个过渡动画</span></span><br><span class="line">    <span class="keyword">const</span> transitions = useTransition(location, location =&gt; location.pathname, &#123;</span><br><span class="line">        <span class="keyword">from</span>: &#123; <span class="attr">position</span>: <span class="string">'absolute'</span>, <span class="attr">opacity</span>: <span class="number">0</span>, <span class="attr">transform</span>: <span class="string">'translate3d(0,-40px,0)'</span> &#125;,</span><br><span class="line">        enter: &#123; <span class="attr">opacity</span>: <span class="number">1</span>, <span class="attr">transform</span>: <span class="string">'translate3d(0,0px,0)'</span> &#125;,</span><br><span class="line">        leave: &#123; <span class="attr">opacity</span>: <span class="number">0</span>, <span class="attr">transform</span>: <span class="string">'translate3d(0,-40px,0)'</span> &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;Link to=<span class="string">"/"</span>&gt;来到首页&lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">            &lt;Link to="/</span>about<span class="string">"&gt;来到About&lt;/Link&gt;</span></span><br><span class="line"><span class="string">            &lt;Link to="</span>/search<span class="string">"&gt;来到Search&lt;/Link&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            &#123;/*路由切换动画*/&#125;</span></span><br><span class="line"><span class="string">            &#123;transitions.map((&#123; item, props, key &#125;) =&gt; (</span></span><br><span class="line"><span class="string">                &lt;animated.div key=&#123;key&#125; style=&#123;props&#125;&gt;</span></span><br><span class="line"><span class="string">                    &lt;Switch&gt;</span></span><br><span class="line"><span class="string">                        &lt;Route path='/' exact component=&#123;Home&#125; /&gt;</span></span><br><span class="line"><span class="string">                        &lt;Route path='/about' component=&#123;About&#125; /&gt;</span></span><br><span class="line"><span class="string">                        &lt;Route path='/search' strict component=&#123;Search&#125; /&gt;</span></span><br><span class="line"><span class="string">                    &lt;/Switch&gt;</span></span><br><span class="line"><span class="string">                &lt;/animated.div&gt;</span></span><br><span class="line"><span class="string">            ))&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export default App2;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//main.js</span></span><br><span class="line"><span class="string">//这边必须要用HashRouter包裹App2，以便在App2中能使用useLocation方法</span></span><br><span class="line"><span class="string">ReactDom.render(&lt;HashRouter&gt;&lt;App2&gt;&lt;/App2&gt;&lt;/HashRouter&gt;,document.getElementById("</span>app<span class="string">"))</span></span><br></pre></td></tr></table></figure>

<h1 id="10-useChain使用"><a href="#10-useChain使用" class="headerlink" title="10.   useChain使用"></a>10.   useChain使用</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">useChain可以创建动画链，让多个动画按照顺序执行</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123; useState,useRef &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; useSpring ,useTransition,useChain, animated &#125; <span class="keyword">from</span> <span class="string">'react-spring'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'@/styles/demo14.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Demo14 = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//transition动画的数据源</span></span><br><span class="line">    <span class="keyword">const</span> data = [&#123; <span class="attr">name</span>: <span class="number">1</span>, <span class="attr">css</span>: <span class="string">"red"</span> &#125;, &#123; <span class="attr">name</span>: <span class="number">2</span>, <span class="attr">css</span>: <span class="string">"blue"</span> &#125;, &#123; <span class="attr">name</span>: <span class="number">3</span>, <span class="attr">css</span>: <span class="string">"yellow"</span> &#125;, &#123; <span class="attr">name</span>: <span class="number">4</span>, <span class="attr">css</span>: <span class="string">"pink"</span> &#125;];</span><br><span class="line">    <span class="comment">//定义一个open state用于控制窗口是否被打开</span></span><br><span class="line">    <span class="keyword">const</span> [open, setOpen] = useState(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//useRef()方法可以创建一个引用,这边使用useRef()创建一个spring动画的引用</span></span><br><span class="line">    <span class="keyword">const</span> springRef = useRef()</span><br><span class="line">    <span class="comment">//创建Spring动画,作用是当open为true的时候，让父盒子变大</span></span><br><span class="line">    <span class="keyword">const</span> &#123; size, background &#125; = useSpring(&#123;</span><br><span class="line">        ref: springRef,</span><br><span class="line">        <span class="keyword">from</span>: &#123; <span class="attr">size</span>: <span class="string">'30%'</span>, <span class="attr">background</span>: <span class="string">'hotpink'</span> &#125;,</span><br><span class="line">        to: &#123; <span class="attr">size</span>: open ? <span class="string">'100%'</span> : <span class="string">'30%'</span>, <span class="attr">background</span>: open ? <span class="string">'white'</span> : <span class="string">'hotpink'</span> &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建一个transRef的引用</span></span><br><span class="line">    <span class="keyword">const</span> transRef = useRef()</span><br><span class="line">    <span class="comment">//创建过渡动画(当父盒子打开后，若干子盒子呈现)</span></span><br><span class="line">    <span class="keyword">const</span> transitions = useTransition(open ? data : [], item =&gt; item.name, &#123;</span><br><span class="line">        ref: transRef,</span><br><span class="line">        unique: <span class="literal">true</span>, <span class="comment">//动画进入和离开使用相同的key</span></span><br><span class="line">        trail: <span class="number">400</span>/data.length,  <span class="comment">//动画的延迟时间</span></span><br><span class="line">        <span class="keyword">from</span>: &#123; <span class="attr">opacity</span>: <span class="number">0</span>, <span class="attr">transform</span>: <span class="string">'scale(0)'</span> &#125;,</span><br><span class="line">        enter: &#123; <span class="attr">opacity</span>: <span class="number">1</span>, <span class="attr">transform</span>: <span class="string">'scale(1)'</span> &#125;,</span><br><span class="line">        leave: &#123; <span class="attr">opacity</span>: <span class="number">0</span>, <span class="attr">transform</span>: <span class="string">'scale(0)'</span> &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建动画链  当open是true，先执行springRef动画；否则先执行transRef动画</span></span><br><span class="line">    <span class="comment">// 当open为true，0~0.1执行springRef动画，0.1之后执行transRef动画</span></span><br><span class="line">    <span class="comment">// 当open为false，0~0.6执行transRef动画，0.6之后执行springRef动画</span></span><br><span class="line">    useChain(open ? [springRef, transRef] : [transRef, springRef], [<span class="number">0</span>, open ? <span class="number">0.1</span> : <span class="number">0.6</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;animated.div className=<span class="string">"parent"</span> style=&#123;&#123; <span class="attr">width</span>: size, <span class="attr">height</span>: size, background &#125;&#125; onClick=&#123;() =&gt; setOpen(<span class="function"><span class="params">open</span> =&gt;</span> !open)&#125;&gt;</span><br><span class="line">            &#123;transitions.map(<span class="function">(<span class="params">&#123; item, key, props &#125;</span>) =&gt;</span> (</span><br><span class="line">                &lt;animated.div className=<span class="string">"item"</span> key=&#123;key&#125; style=&#123;&#123; ...props, <span class="attr">background</span>: item.css &#125;&#125; /&gt;</span><br><span class="line">            ))&#125;</span><br><span class="line">        &lt;<span class="regexp">/animated.div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Demo14;</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/26/18.拓展-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/26/18.拓展-5/" itemprop="url">18.拓展-(5)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-26T16:45:57+08:00">
                2019-11-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1、将A、B、C、D四个元素次序进栈（中间可能有出栈操作，例如A进栈后出栈，B再进栈），则可能的出栈系列是-B"><a href="#1、将A、B、C、D四个元素次序进栈（中间可能有出栈操作，例如A进栈后出栈，B再进栈），则可能的出栈系列是-B" class="headerlink" title="1、将A、B、C、D四个元素次序进栈（中间可能有出栈操作，例如A进栈后出栈，B再进栈），则可能的出栈系列是(B)"></a>1、将A、B、C、D四个元素次序进栈（中间可能有出栈操作，例如A进栈后出栈，B再进栈），则可能的出栈系列是(B)</h3><p>A. C A D B    B. B D C A    C. C D A B     D. D A B C</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">栈是先进后出  次序进栈  出栈的顺序应该是 D C B A（方便理解 命名为倒序）</span><br><span class="line">因为有提前出栈的可能，所以出现的可能有三种：</span><br><span class="line">①单个字母 + 倒序      ② 顺序 + 倒序    ③ 顺序</span><br></pre></td></tr></table></figure>



<h3 id="2、JavaScript怎样添加、移除、移动、复制、创建和查找节点？"><a href="#2、JavaScript怎样添加、移除、移动、复制、创建和查找节点？" class="headerlink" title="2、JavaScript怎样添加、移除、移动、复制、创建和查找节点？"></a>2、JavaScript怎样添加、移除、移动、复制、创建和查找节点？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）创建新节点</span><br><span class="line">      createDocumentFragment()    <span class="comment">//创建一个DOM片段</span></span><br><span class="line">      createElement()   <span class="comment">//创建一个具体的元素</span></span><br><span class="line">      createTextNode()   <span class="comment">//创建一个文本节点</span></span><br><span class="line">（<span class="number">2</span>）添加、移除、替换、插入</span><br><span class="line">      appendChild()</span><br><span class="line">      removeChild()</span><br><span class="line">      replaceChild()</span><br><span class="line">      insertBefore()</span><br><span class="line">（<span class="number">3</span>）查找</span><br><span class="line">      getElementsByTagName()    <span class="comment">//通过标签名称</span></span><br><span class="line">      getElementsByName()    <span class="comment">//通过元素的Name属性的值</span></span><br><span class="line">      getElementById()    <span class="comment">//通过元素Id，唯一性</span></span><br></pre></td></tr></table></figure>

<h3 id="3、请写出Jquery-Ajax简单调用方法"><a href="#3、请写出Jquery-Ajax简单调用方法" class="headerlink" title="3、请写出Jquery Ajax简单调用方法"></a>3、请写出Jquery Ajax简单调用方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">　　type: <span class="string">"post"</span>,　　　　　　　　　　<span class="comment">//以POST的方式发送请求</span></span><br><span class="line">　　url: url,　　　　　　　　　　　　<span class="comment">//拼凑的链接及参数</span></span><br><span class="line">　　contentType: <span class="string">"application/json"</span>,</span><br><span class="line">　　dataType: <span class="string">"json"</span>,</span><br><span class="line">　　success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>)</span></span><br><span class="line"><span class="function">　　</span>&#123;</span><br><span class="line">　　　　<span class="comment">//成功获取一般处理程序响应后执行的代码</span></span><br><span class="line">　　&#125;,</span><br><span class="line">　　error: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>)</span></span><br><span class="line"><span class="function">　　</span>&#123;</span><br><span class="line">　　　　<span class="comment">//收到一般处理程序响应失败后执行的代码</span></span><br><span class="line">　　&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="4、请你谈一谈你是如何理解前端模块化"><a href="#4、请你谈一谈你是如何理解前端模块化" class="headerlink" title="4、请你谈一谈你是如何理解前端模块化"></a>4、请你谈一谈你是如何理解前端模块化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">前端模块化侧重代码的功能封装，方便代码的分层开发，保证每个功能模块的职能单一，降低了代码的耦合度，减少重复代码，提高代码重用性</span><br></pre></td></tr></table></figure>



<h3 id="5、请描述下cookies，sessionStorage和localStorage的区别？"><a href="#5、请描述下cookies，sessionStorage和localStorage的区别？" class="headerlink" title="5、请描述下cookies，sessionStorage和localStorage的区别？"></a>5、请描述下cookies，sessionStorage和localStorage的区别？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">共同点：都是保存在浏览器端</span><br><span class="line">cookies：在浏览器和服务器间来回传递，数据不能超过4k，只在设置的cookie过期时间之前一直有效，即使窗口或浏览器关闭，在所有同浏览器窗口中都是共享的。</span><br><span class="line">sessionStorage：不会自动把数据发给服务器，仅在本地保存，存储可以达到5M，仅在当前浏览器窗口关闭前有效，不能持久保持，且仅在当前页面中有效，不能共享。</span><br><span class="line">localStorage也不会自动把数据发给服务器，仅在本地保存，存储可以达到20M，存储在硬盘上，即使窗口或浏览器关闭也一直保存，用作持久保持，在所有同浏览器窗口中都是共享的。</span><br></pre></td></tr></table></figure>



<h3 id="6、什么是跨域？解决跨域的方法有哪些？"><a href="#6、什么是跨域？解决跨域的方法有哪些？" class="headerlink" title="6、什么是跨域？解决跨域的方法有哪些？"></a>6、什么是跨域？解决跨域的方法有哪些？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">跨域问题只有在前端的ajax和后台交互的过程中才会产生，当使用ajax从一个url向另外一个url发送请求时，只要两个url的协议、域名、端口号中任何一个不一样，就构成了跨域</span><br><span class="line"></span><br><span class="line">解决跨域<span class="number">9</span>种办法：</span><br><span class="line"><span class="number">1</span>、 JSONP：</span><br><span class="line">jsonp的原理就是利用&lt;script&gt;标签没有跨域限制，通过&lt;script&gt;标签src属性，发送带有callback参数的GET请求，服务端将接口返回数据拼凑到callback函数中，返回给浏览器，浏览器解析执行，从而前端拿到callback函数返回的数据。</span><br><span class="line">jsonp的缺点：只能发送<span class="keyword">get</span>一种请求。</span><br><span class="line"></span><br><span class="line">2、 跨域资源共享（CORS）</span><br><span class="line">它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。</span><br><span class="line">CORS需要浏览器和服务器同时支持。目前，所有浏览器都支持该功能，IE浏览器不能低于IE10。</span><br><span class="line">浏览器将CORS跨域请求分为简单请求和非简单请求。</span><br><span class="line"></span><br><span class="line">3、 nginx代理跨域</span><br><span class="line">nginx代理跨域，实质和CORS跨域原理一样，通过配置文件设置请求响应头Access-Control-Allow-Origin…等字段。</span><br><span class="line"></span><br><span class="line">4、nodejs中间件代理跨域</span><br><span class="line">1）非vue框架的跨域</span><br><span class="line">使用node + express + http-proxy-middleware搭建一个proxy服务器。</span><br><span class="line">2）vue框架的跨域</span><br><span class="line">node + vue + webpack + webpack-dev-server搭建的项目，跨域请求接口，直接修改webpack.config.js配置。开发环境下，vue渲染服务和接口代理服务都是webpack-dev-server同一个，所以页面与代理接口之间不再跨域。</span><br><span class="line"></span><br><span class="line">5、 document.domain + iframe跨域</span><br><span class="line">此方案仅限主域相同，子域不同的跨域应用场景。实现原理：两个页面都通过js强制设置document.domain为基础主域，就实现了同域。</span><br><span class="line"></span><br><span class="line">父窗口：(http://www.domain.com/a.html)</span><br><span class="line">子窗口：(http://child.domain.com/a.html)</span><br><span class="line">document.domain = 'domain.com';</span><br><span class="line">     </span><br><span class="line">6、location.hash + iframe跨域</span><br><span class="line">实现原理： a欲与b跨域相互通信，通过中间页c来实现。 三个页面，不同域之间利用iframe的location.hash传值，相同域之间直接js访问来通信。</span><br><span class="line"></span><br><span class="line">具体实现：A域：a.html -&gt; B域：b.html -&gt; A域：c.html，a与b不同域只能通过hash值单向通信，b与c也不同域也只能单向通信，但c与a同域，所以c可通过parent.parent访问a页面所有对象。</span><br><span class="line"></span><br><span class="line">7、window.name + iframe跨域</span><br><span class="line">window.name属性的独特之处：name值在不同的页面（甚至不同域名）加载后依旧存在，并且可以支持非常长的 name 值（2MB）。</span><br><span class="line"></span><br><span class="line">8、跨文档通信 API：window.postMessage()</span><br><span class="line">postMessage是HTML5 XMLHttpRequest Level 2中的API，且是为数不多可以跨域操作的window属性之一。</span><br><span class="line">主要包括接受信息的”message”事件和发送消息的”postMessage”方法。</span><br><span class="line"></span><br><span class="line">9、WebSocket协议跨域</span><br><span class="line">WebSocket protocol是HTML5一种新的协议。它实现了浏览器与服务器全双工通信，同时允许跨域通讯，是server push技术的一种很好的实现。</span><br><span class="line"></span><br><span class="line">http://www.imooc.com/article/291931</span><br></pre></td></tr></table></figure>



<h3 id="8、写出一条Sql语句：查询User表中第11条到第30条记录（以自动增长的ID作为主键，注意：ID可能不是连续的）"><a href="#8、写出一条Sql语句：查询User表中第11条到第30条记录（以自动增长的ID作为主键，注意：ID可能不是连续的）" class="headerlink" title="8、写出一条Sql语句：查询User表中第11条到第30条记录（以自动增长的ID作为主键，注意：ID可能不是连续的）"></a>8、写出一条Sql语句：查询User表中第11条到第30条记录（以自动增长的ID作为主键，注意：ID可能不是连续的）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">解1: select top 20 * from User where id not in (select top 10 id from User) </span><br><span class="line">解2: select top 20 * from User where id &gt; (select max(id) from (select top 10 id from User )as</span><br></pre></td></tr></table></figure>



<h3 id="9、请问在JavaScript程序中，alert-undefined-null-的输出结果是？（C）"><a href="#9、请问在JavaScript程序中，alert-undefined-null-的输出结果是？（C）" class="headerlink" title="9、请问在JavaScript程序中，alert(undefined == null)的输出结果是？（C）"></a>9、请问在JavaScript程序中，alert(undefined == null)的输出结果是？（C）</h3><p>  A. null   B. undefined   C. true    D. false</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ECMAScript认为undefined是从null派生出来的，因此将它们定义为不严格意义上的相等，即undefined==null。</span><br><span class="line"></span><br><span class="line">console.log( undefined === null ) //false</span><br><span class="line">typeof null          //object</span><br><span class="line">typeof undefined    //undefined</span><br></pre></td></tr></table></figure>

<h3 id="10、下面JavaScript代码显示结果是？（A）"><a href="#10、下面JavaScript代码显示结果是？（A）" class="headerlink" title="10、下面JavaScript代码显示结果是？（A）"></a>10、下面JavaScript代码显示结果是？（A）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> Bollean(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">If(x)&#123;</span><br><span class="line"></span><br><span class="line">alert(‘hi’);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> y = <span class="built_in">Boolean</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">If(y)&#123;</span><br><span class="line"></span><br><span class="line">Alert(‘hello’);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>A. Hi   B. hi hello   C. hello   D.不显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Boolean对象与Boolean原始值的区别   当一个值为false的Boolean对象放到条件语句当中的时候，Boolean对象的值会被当作true来计算   Boolean(0)强制转化成布尔值而不是布尔对象，仅返回一个为false的值</span><br></pre></td></tr></table></figure>



<h3 id="11、分析下面这两行JavaScript代码的作用（C）"><a href="#11、分析下面这两行JavaScript代码的作用（C）" class="headerlink" title="11、分析下面这两行JavaScript代码的作用（C）"></a>11、分析下面这两行JavaScript代码的作用（C）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">01</span>  &lt;a href=<span class="string">"javascript:history.back()"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="number">02</span>  &lt;a href=<span class="string">"javascript:history.forward()"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>A. 代码第1行的作用相当于前进按钮</p>
<p>B. 代码第2行的作用相当于后退按钮</p>
<p>C. 代码第1行的作用相当于后退按钮</p>
<p>D. 以上表述都不正确</p>
<h3 id="12、关于HTTP协议，下列说法错误的是（C）"><a href="#12、关于HTTP协议，下列说法错误的是（C）" class="headerlink" title="12、关于HTTP协议，下列说法错误的是（C）"></a>12、关于HTTP协议，下列说法错误的是（C）</h3><p>A. HTTP是无状态协议           B.HTTP是应用层协议</p>
<p>C. HTTP是基于二进制的协议     D. HTTP状态码200表示成功</p>
<h3 id="13、在HTML页面上包含如下所示的层对象，则JavaScript语句document-getElementById-“info”-innerHTML-的值是（B）"><a href="#13、在HTML页面上包含如下所示的层对象，则JavaScript语句document-getElementById-“info”-innerHTML-的值是（B）" class="headerlink" title="13、在HTML页面上包含如下所示的层对象，则JavaScript语句document.getElementById(“info”).innerHTML 的值是（B）"></a>13、在HTML页面上包含如下所示的层对象，则JavaScript语句document.getElementById(“info”).innerHTML 的值是（B）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=”info”</span><br><span class="line">style=”display:block”&gt;&lt;p&gt;请填写&lt;/p&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A. 请填写</span><br><span class="line"></span><br><span class="line">B. &lt;p&gt;请填写&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">C. id=”info” style=”display:block”</span><br><span class="line"></span><br><span class="line">D. &lt;div id=&quot;info&quot; style=&quot;display:block&quot;&gt;&lt;p&gt;请填写&lt;/p&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>






          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Dong Wenbin</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dong Wenbin</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
