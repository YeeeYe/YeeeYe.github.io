<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="DWBBlog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="DWBBlog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DWBBlog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/">





  <title>DWBBlog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DWBBlog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/26/17.拓展-课外问题总结-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/26/17.拓展-课外问题总结-4/" itemprop="url">17.拓展-课外问题总结(4)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-26T16:44:57+08:00">
                2019-11-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.分别一句话介绍，Cookie和session是什么，两者的关系和区别</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cookie   位于用户的计算机上，用来维护用户计算机中的信息，直到用户删除。   (比如我们在网页上登录某个软件时输入用户名及密码时如果保存为cookie，则每次我们访问的时候就不需要登录网站了。我们可以在浏览器上保存任何文本，而且我们还可以随时随地的去阻止它或者删除。我们同样也可以禁用或者编辑cookie，但是有一点需要注意不要使用cookie来存储一些隐私数据，以防隐私泄露。)   session   session称为会话信息，位于web服务器上，主要负责访问者与网站之间的交互，当访问浏览器请求http地址时，将传递到web服务器上并与访问信息进行匹配， 当关闭网站时就表示会话已经结束，网站无法访问该信息了，所以它无法保存永久数据，我们无法访问以及禁用网站   session与cookie的区别   Cookie数据存在客户端本地，Session数据存在服务器   Cookie数据可以被客户端随意修改，Session因为数据在服务器，所以用户不可以随意修改,因此session更安全   Cookie的存储是有限制的(每个站点cookie不超过50个，每个cookie不超过4kb，cookie只能存储非中文的字符串)，Session没有限制   设置cookie时间可以使cookie过期。但是使用session-destory（），我们将会销毁会话。           如果我们需要经常登录一个站点时，最好用cookie来保存信息，要不然每次登陆都特别麻烦，如果对于需要安全性高的站点以及控制数据的能力时需要用会话效果更佳，当然我们也可以结合两者，使网站按照我们的想法进行运行</span><br></pre></td></tr></table></figure>

<p>2一句话解释Bootstrap的栅格系统。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">Bootstrap 提供了一套响应式、移动设备优先的流式栅格系统，随着屏幕或视口（viewport）尺寸的增加，系统会自动分为最多<span class="number">12</span>列。</span><br><span class="line">栅格系统用于通过一系列的行（row）与列（column）的组合来创建页面布局，你的内容就可以放入这些创建好的布局中。</span><br><span class="line">（<span class="number">1</span>）第一步：创建栅格系统的容器　　　 </span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"container-fluid"</span>&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"row"</span>&gt;</span><br><span class="line">    ...</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line"></span><br><span class="line">.container是固定宽度，居中显示:下面是Bootstrap中.container类的代码</span><br><span class="line"></span><br><span class="line">.container-fluid是 <span class="number">100</span>% 宽度：下面是Bootstrap中.container-fluid类的代码</span><br><span class="line"></span><br><span class="line">(<span class="number">2</span>)第二步：创建合适的栅格系统</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"row"</span>&gt;</span><br><span class="line">　　&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-md-1"</span>&gt;.col-md<span class="number">-1</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  　&lt;div class="col-md-1"&gt;.col-md-1&lt;/</span>div&gt;</span><br><span class="line">　　&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-md-1"</span>&gt;.col-md<span class="number">-1</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">　　&lt;div class="col-md-1"&gt;.col-md-1&lt;/</span>div&gt;</span><br><span class="line">　　&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-md-1"</span>&gt;.col-md<span class="number">-1</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">　　&lt;div class="col-md-1"&gt;.col-md-1&lt;/</span>div&gt;</span><br><span class="line">　　&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-md-1"</span>&gt;.col-md<span class="number">-1</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">　　&lt;div class="col-md-1"&gt;.col-md-1&lt;/</span>div&gt;</span><br><span class="line">　　&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-md-1"</span>&gt;.col-md<span class="number">-1</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">　　&lt;div class="col-md-1"&gt;.col-md-1&lt;/</span>div&gt;</span><br><span class="line">　　&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-md-1"</span>&gt;.col-md<span class="number">-1</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">　　&lt;div class="col-md-1"&gt;.col-md-1&lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;div class="row"&gt;</span></span><br><span class="line"><span class="regexp">　　&lt;div class="col-md-8"&gt;.col-md-8&lt;/</span>div&gt;</span><br><span class="line">　　&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-md-4"</span>&gt;.col-md<span class="number">-4</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"row"</span>&gt;</span><br><span class="line">　　&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-md-4"</span>&gt;.col-md<span class="number">-4</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">　　&lt;div class="col-md-4"&gt;.col-md-4&lt;/</span>div&gt;</span><br><span class="line">　　&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-md-4"</span>&gt;.col-md<span class="number">-4</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"row"</span>&gt;</span><br><span class="line">　　&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-md-6"</span>&gt;.col-md<span class="number">-6</span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">　　&lt;div class="col-md-6"&gt;.col-md-6&lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">每一个“row”代表一行，而内部的“col-md-数字”代表一个单元格；</span></span><br><span class="line"><span class="regexp">Bootstrap把每一行分成12等份，“col-md-数字”中的“数字”从1-12中取，数字等于几，就占几份；</span></span><br><span class="line"><span class="regexp">合理的选择单元格的数字配置，再往单元格中添加我们想要的内容，这样一个栅格系统就完成了！</span></span><br></pre></td></tr></table></figure>





<p>  3一句话介绍Vuex是什么?用于哪些场景?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。（vuex是一个全局单例模式管理。）</span><br><span class="line">使用场景：当应用遇到多个组件共享状态的时候，使用vuex。即：多个视图依赖于同一个状态，不同视图的行为需要变更同一个状态。</span><br><span class="line"></span><br><span class="line">拓展内容：</span><br><span class="line">如果您不打算开发大型单页应用，使用 Vuex 可能是繁琐冗余的。如果您的应用够简单，您最好不要使用 Vuex。一个简单的 store模式就足够您所需了。但是，如果您需要构建一个中大型单页应用，您很可能会考虑如何更好地在组件外部管理状态，Vuex 将会成为自然而然的选择。</span><br><span class="line">什么是单页应用</span><br><span class="line">在应用整个使用流程里浏览器由始至终没有刷新，所有的数据交互由ajax完成。但是用户体验起来和app一样，有明确的页面区分，即所谓的web app，整个webapp就一个html文件，里面的各个功能页面是javascript通过hash,或者history api来进行路由，并通过ajax拉取数据来实现响应功能。因为整个webapp就一个html，所以叫单页面。</span><br><span class="line">在我们以前开发web程序的时候，都是通过不同的html，js，css进行控制。网站就是网页的集合，但是如今react，angular，vue的诞生，产生了单页面应用（single page application），构建web应用可能只有一个页面，这个页面不再是简单地把内容进行布局排序，它已经成为web应用的容器。</span><br></pre></td></tr></table></figure>




<p> 4分别一句话介绍，父子组件怎么传值?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">父传子</span><br><span class="line">1.在子组件中声明props，这边的数据表示来自父亲的数据</span><br><span class="line">2.在父组件中使用子组件的时候给子组件绑定值</span><br><span class="line">3.在页面上使用父亲传递过来的值</span><br><span class="line">子传父</span><br><span class="line">1.在父亲中声明一个方法用于接收子组件的数据</span><br><span class="line">2.在创建子组件的时候把父亲中的函数传递给子组件</span><br><span class="line">3.点击子组件按钮执行子组件的方法，在子组件的方法中触发父组件传递过来的函数</span><br></pre></td></tr></table></figure>

<p> 5 Vue router如何实现跳转，跳转后的view是否更新了，如果不能，怎样触发更新?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">首先在页面中引入VueJS以及vue-router模块，使用router-link可以把文字设置成超链接的形式，而to则是指要跳转到哪个路由，当路由跳转后所有的数据都会在router-view中呈现，在script中创建router实例，将创建的组件与路由绑定即可。</span><br><span class="line"></span><br><span class="line">&lt;!-- :key=&quot;$route.fullPath&quot; 解决同路由但不同查询参数跳转后数据不更新 --&gt; &lt;router-view :key=&quot;$route.fullPath&quot; /&gt;</span><br><span class="line">（：key=“一个具有唯一值的 key 属性即可”）</span><br></pre></td></tr></table></figure>










          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/26/16.拓展-课外问题总结-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/26/16.拓展-课外问题总结-3/" itemprop="url">16.拓展-课外问题总结(3)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-26T16:43:57+08:00">
                2019-11-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1、以下代码的输出结果是    10     </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">	a[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(i);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">a[<span class="number">6</span>]();</span><br></pre></td></tr></table></figure>

<p>解析：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var声明的变量i ，没有形成一个块级的作用域，所以里面的funciton不能形成一个闭包，每次也不会保存i的值。只有当a[i]（）这个函数执行的时候，funciton会沿着作用域链查找i的值，父级作用域就是window，这个时候i已经加到了10。</span><br></pre></td></tr></table></figure>

<p>2.以下代码的输出结果是    6     </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">	a[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(i);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">a[<span class="number">6</span>]();</span><br></pre></td></tr></table></figure>

<p>解析：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let声明的变量，属于块级作用域，声明周期就在大括号中，在外部是不可以打印的，所以funciton在内部就形成了一个闭包，funciton里面可以引用父级作用域的变量，引用的就是funciton被定义时的父作用域的变量值，所以在执行a[i] = function () &#123; console.log(i);&#125;的时候 fucniton都保存了当时的i值</span><br></pre></td></tr></table></figure>

<p>3.以下代码的输出结果是   George,John,Thomas,James,Adrew,Martin     </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">6</span>)</span><br><span class="line">arr[<span class="number">0</span>] = <span class="string">"George"</span></span><br><span class="line">arr[<span class="number">1</span>] = <span class="string">"John"</span></span><br><span class="line">arr[<span class="number">2</span>] = <span class="string">"Thomas"</span></span><br><span class="line">arr[<span class="number">3</span>] = <span class="string">"James"</span></span><br><span class="line">arr[<span class="number">4</span>] = <span class="string">"Adrew"</span></span><br><span class="line">arr[<span class="number">5</span>] = <span class="string">"Martin"</span></span><br><span class="line">arr.splice = (<span class="number">2</span>,<span class="number">3</span>,<span class="string">"William"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(arr.toString());</span><br></pre></td></tr></table></figure>

<p>解析：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">splice 方法可以移除从start 位置开始的指定个数的元素并插入新元素，从而修改 arrayObj。返回值是一个由所移除的元素组成的新的Array 对象。</span><br><span class="line">只是作用于数组，不能作用于字符串，ToString方法不受影响。</span><br></pre></td></tr></table></figure>

<p>4、以下代码的输出结果是      0,4,16,36,64     </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>];</span><br><span class="line"><span class="keyword">let</span> newArray = array</span><br><span class="line">.filter(<span class="function">(<span class="params">v</span>) =&gt;</span> v % <span class="number">2</span> === <span class="number">0</span>) <span class="comment">//0，2，4，6，8			 .map((v) =&gt; Math.pow(v,2)); //pow返回v的2次幂的值</span></span><br><span class="line"><span class="built_in">console</span>.log(newArray.toString());</span><br></pre></td></tr></table></figure>

<p>5、以下代码的输出结果是      {“a”:1,”b”:2,”c”:3}    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> target = &#123;</span><br><span class="line">	  a:<span class="number">1</span>,</span><br><span class="line">	  b:<span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> source1 = &#123;</span><br><span class="line">	  b:<span class="number">2</span>,</span><br><span class="line">	  c:<span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> source2 = &#123;</span><br><span class="line">	  c:<span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(target,source1,source2);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(target));</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object.assign可以用来处理数组，但是会把数组视为对象。第一个参数是目标对象，后面的参数都是源对象。如果目标对象与源对象有同名属性，或多个源对象有同名属性，则后面的属性会覆盖前面的属性。</span><br></pre></td></tr></table></figure>

<p>6、以下代码的功能是 ：  <u>解决异步问题</u>    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">ms</span>)</span>&#123;</span><br><span class="line">	  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">			setTimeout(resolve,ms);</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">			</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">print</span>(<span class="params">message,ms</span>)</span>&#123;</span><br><span class="line">	  <span class="keyword">await</span> foo(ms);</span><br><span class="line">	  <span class="built_in">console</span>.log(message);</span><br><span class="line">&#125;</span><br><span class="line">			</span><br><span class="line">print(<span class="string">'hello world'</span>,<span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解决异步问题的方案：</span></span><br><span class="line"><span class="comment">//1.可以使用回调来解决</span></span><br><span class="line"><span class="comment">//2.可以使用promise来解决</span></span><br><span class="line"><span class="comment">//3.可以使用await和async来解决   （最简单）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//async是用来修饰方法的,加上async修饰的方法有三个作用</span></span><br><span class="line"><span class="comment">//1.在该方法内部可以使用await关键字</span></span><br><span class="line"><span class="comment">//2.该方法需要会默认返回一个Promise</span></span><br><span class="line"><span class="comment">//3.加async修饰的方法表示异步方法，不会堵塞当前线程的执行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//await是用来等待Promise执行的结果的，await后面需要跟一个Promise</span></span><br><span class="line"><span class="comment">//1.可以将原来的异步变成同步任务</span></span><br><span class="line"><span class="comment">//2.只可以在async修饰的方法中使用</span></span><br></pre></td></tr></table></figure>

<p>7、以下代码的输出结果是 </p>
<p>object<br>string  object  object<br>number  Boolean  function    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="literal">null</span>;                   </span><br><span class="line"><span class="keyword">let</span> b = <span class="string">''</span>;</span><br><span class="line"><span class="keyword">let</span> c = [];</span><br><span class="line"><span class="keyword">let</span> d = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> e = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> f = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> g = <span class="function"><span class="params">a</span> =&gt;</span> a+<span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> c);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> d);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> e);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> f);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> g);</span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span>运算符的返回类型为字符串，值包括如下几种：</span><br><span class="line"><span class="number">1.</span><span class="literal">undefined</span> --未定义的变量或值</span><br><span class="line"><span class="number">2.</span>boolean    --布尔类型的变量或值</span><br><span class="line"><span class="number">3</span>．string   --字符串类型的变量或值</span><br><span class="line"><span class="number">4.</span>number   --数字类型的变量或值</span><br><span class="line"><span class="number">5.</span>object    --对象类型的变量或值，或者<span class="literal">null</span></span><br><span class="line"><span class="number">6.</span><span class="function"><span class="keyword">function</span>  --函数类型的变量或值</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/26/15.拓展-课外问题总结-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/26/15.拓展-课外问题总结-2/" itemprop="url">15.拓展-课外问题总结(2)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-26T16:42:57+08:00">
                2019-11-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.console.log([] == ![])</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">答案：true</span><br><span class="line">![] 会变成 false，false会变成0；也就是==右侧 是 0；</span><br><span class="line">Number([]) == 0</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>打印如下：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'world'</span>;</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span>(<span class="keyword">typeof</span> name === <span class="string">'undefined'</span>)&#123;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">var</span> name = <span class="string">'Jake'</span>;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'hi'</span> + name)</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'hello'</span>_name)</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<p>答案：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">答案：hiJake</span><br><span class="line">(function()&#123;&#125;)是个闭包函数，name属于局部变量，无法获取到全局变量，所以name是undefined</span><br></pre></td></tr></table></figure>

<p>3.打印</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> k=<span class="number">0</span>;k&lt;<span class="number">3</span>;k++)&#123;</span><br><span class="line"></span><br><span class="line">   data[k] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">console</span>.log(k)</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data[<span class="number">2</span>]()</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">答案：3</span><br><span class="line"></span><br><span class="line">输出的data = [3,3,3]</span><br></pre></td></tr></table></figure>

<p>4.不使用第三个变量交换两个数的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1)利用两数之和减去另一个数 </span><br><span class="line">a=a+b</span><br><span class="line">  b=a-b</span><br><span class="line">  a=a-b</span><br><span class="line">2)利用位运算符^</span><br><span class="line">a= a^b   </span><br><span class="line">b= a^b</span><br></pre></td></tr></table></figure>

<p>5.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = (<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.a = a  ---<span class="number">-1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">b</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">this</span>.a+b   ---<span class="number">-1</span>+<span class="number">4</span> </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a  ----返回a是<span class="number">1</span></span><br><span class="line"></span><br><span class="line">&#125;(<span class="number">1</span>,<span class="number">2</span>)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(test(<span class="number">4</span>)) 输出多少</span><br></pre></td></tr></table></figure>

<p>答案：5</p>
<p>6.打印</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x =<span class="number">1</span>,y=z=<span class="number">0</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">		n = n+<span class="number">1</span></span><br><span class="line">		<span class="keyword">return</span> n</span><br><span class="line">	&#125;</span><br><span class="line">	y = add(x)</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">		n = n+<span class="number">3</span></span><br><span class="line">	&#125;</span><br><span class="line">	z = add(x)</span><br><span class="line">	<span class="built_in">console</span>.log(x,y,z)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">答案：1 undefined undefined</span><br><span class="line">函数add() 没有返回值，如果同时加上return n，同名函数会调用最后的一个函数</span><br></pre></td></tr></table></figure>

<p>7.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> foo</span><br><span class="line"></span><br><span class="line">      foo = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">var</span> foo = <span class="number">11</span>     </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    alert(<span class="keyword">typeof</span> bar())</span><br></pre></td></tr></table></figure>

<p>答案：function</p>
<p>8.数组去重</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> ES6</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr))</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 利用indexOf去重</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(arr)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'type error!'</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> array = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (array .indexOf(arr[i]) === <span class="number">-1</span>) &#123;</span><br><span class="line">            array .push(arr[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>利用sort()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(arr)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'type error!'</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    arr = arr.sort()</span><br><span class="line">    <span class="keyword">var</span> arrry= [arr[<span class="number">0</span>]];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] !== arr[i<span class="number">-1</span>]) &#123;</span><br><span class="line">            arrry.push(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arrry;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">4.</span>利用includes</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(arr)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'type error!'</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> array =[];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>( !array.includes( arr[i]) ) &#123;    <span class="comment">//includes 检测数组是否有某个值</span></span><br><span class="line">                    array.push(arr[i]);</span><br><span class="line">              &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>利用filter</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">item, index, arr</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//当前元素，在原始数组中的第一个索引==当前索引值，否则返回当前元素</span></span><br><span class="line">    <span class="keyword">return</span> arr.indexOf(item, <span class="number">0</span>) === index;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>9.打印</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">3</span></span><br><span class="line">	<span class="keyword">var</span> foo = &#123;</span><br><span class="line">		x:<span class="number">2</span>,</span><br><span class="line">		baz:&#123;</span><br><span class="line">			x:<span class="number">1</span>,</span><br><span class="line">			bar:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">this</span>.x  </span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> go = foo.baz.bar;</span><br><span class="line">	alert(go());</span><br><span class="line">	alert(foo.baz.bar())</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">答案：3,1</span><br><span class="line"></span><br><span class="line">alert(go()); 这个函数执行的上下文为所以结果为这个函数是对象的方法指向该对象所以结果为答案：3,1</span><br><span class="line"></span><br><span class="line">alert(go()); 这个函数执行的上下文为所以结果为这个函数是对象的方法指向该对象所以结果为1</span><br></pre></td></tr></table></figure>

<ol start="10">
<li>[1,2]+[2,1]</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">答案：1,22,1</span><br><span class="line">把数组转换成字符串，然后在字符串上进行 + 运算</span><br></pre></td></tr></table></figure>

<p>11.判断是否为回文(写一段命令行)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">若一个数从左到右读与从右到左读都是一样，这个数就叫做回文数。</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPalindrome</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> str !== <span class="string">'string'</span> || str.constructor !== <span class="built_in">String</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> len = <span class="built_in">parseInt</span>((str.length+<span class="number">1</span>)/<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">	<span class="keyword">if</span> (str[i] !== str[str.length-i<span class="number">-1</span>]) &#123;</span><br><span class="line">	    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/26/14.react路由/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/26/14.react路由/" itemprop="url">14.react路由</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-26T16:24:56+08:00">
                2019-11-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-react路由基本使用"><a href="#1-react路由基本使用" class="headerlink" title="1.   react路由基本使用"></a>1.   react路由基本使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//react-router的使用步骤:</span></span><br><span class="line"><span class="comment">//1.npm install react-router-dom</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.引入HashRouter Route Link</span></span><br><span class="line"><span class="comment">//HashRouter 表示使用hash模式的路由</span></span><br><span class="line"><span class="comment">//Route 表示一个路由规则</span></span><br><span class="line"><span class="comment">//Link 表示点击跳转路由</span></span><br><span class="line"><span class="keyword">import</span> &#123; HashRouter, Route, Link &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="comment">/*3.配置路由规则  Route同时会占坑*/</span>&#125;</span><br><span class="line">&#123;<span class="comment">/*路由默认会使用模糊匹配</span></span><br><span class="line"><span class="comment">比如：访问路径 /movie  能够匹配 / 和 /movie */</span>&#125;</span><br><span class="line">&#123;<span class="comment">/* exact表示精确匹配 ：访问路径需要和路由的路径完全一致才能匹配 */</span>&#125;  ★</span><br><span class="line">&lt;Route path=<span class="string">"/"</span> component=&#123;Home&#125; exact&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/* strict : 如果路由规则中的路径有/，则要求访问路径中也要有/才能匹配(只看/) */</span>&#125; </span><br><span class="line">&lt;Route path=<span class="string">"/about/:name/:id"</span> component=&#123;About&#125; strict&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">&lt;Route path=<span class="string">"/movie"</span> component=&#123;Movie&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/*4.点击Link去访问路由*/</span>&#125;</span><br><span class="line">&lt;Link to=<span class="string">"/"</span>&gt;来到首页&lt;<span class="regexp">/Link&gt; </span></span><br><span class="line"><span class="regexp">&lt;Link to="/</span>about/zhangsan/<span class="number">13</span><span class="string">"&gt;来到关于我们&lt;/Link&gt;  &lt;Link to="</span>/movie<span class="string">"&gt;来到电影&lt;/Link&gt;</span></span><br><span class="line"><span class="string">&lt;br/&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; withRouter &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.props.history.push(<span class="string">"/"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withRouter (RTab);</span><br><span class="line"></span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line">      &lt;RNav&gt;<span class="xml"><span class="tag">&lt;/<span class="name">RNav</span>&gt;</span></span></span><br><span class="line">      &lt;RouterMap&gt;<span class="xml"><span class="tag">&lt;/<span class="name">RouterMap</span>&gt;</span></span></span><br><span class="line">      &lt;Button type=<span class="string">'primary'</span>&gt;按钮&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;RTab&gt;&lt;/</span>RTab&gt;  </span><br><span class="line">&lt;<span class="regexp">/HashRouter&gt;</span></span><br></pre></td></tr></table></figure>

<p>hashrouter 只建议套一个，一般套在最前面</p>
<h3 id="2-switch和redirect和组件懒加载"><a href="#2-switch和redirect和组件懒加载" class="headerlink" title="2.  switch和redirect和组件懒加载"></a>2.  switch和redirect和组件懒加载</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="comment">/*当使用组件懒加载的时候，往往是和Suspense结合使用，fallback表示组件没有加载完毕的时候显示的信息*/</span>&#125;</span><br><span class="line">&lt;Suspense fallback=&#123;&lt;div&gt;Loading...&lt;<span class="regexp">/div&gt;&#125;&gt;</span></span><br><span class="line"><span class="regexp">                    </span></span><br><span class="line"><span class="regexp">                    </span></span><br><span class="line"><span class="regexp">&#123;/</span>*Switch表示路由互斥，我们使用Switch之后，只会匹配一个路由规则*<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp">&lt;Switch&gt;</span></span><br><span class="line"><span class="regexp">    </span></span><br><span class="line"><span class="regexp">    </span></span><br><span class="line"><span class="regexp">&#123;/</span>*我们需要给根路径的路由加上exact属性来精确匹配，否则所有的访问路径都会匹配Home组件*<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp">&lt;Route path="/</span><span class="string">" component=&#123;Home&#125; exact&gt;&lt;/Route&gt;</span></span><br><span class="line"><span class="string">&lt;Route path="</span>/about/:name/:id<span class="string">" component=&#123;About&#125; strict&gt;&lt;/Route&gt;</span></span><br><span class="line"><span class="string">&lt;Route path="</span>/movie<span class="string">" component=&#123;Movie&#125;&gt;&lt;/Route&gt;</span></span><br><span class="line"><span class="string">&lt;Route path="</span>/search<span class="string">" component=&#123;Search&#125;&gt;&lt;/Route&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#123;/*当没有匹配的路由的时候来到跟路由*/&#125; 重定向</span></span><br><span class="line"><span class="string">&lt;Redirect to="</span>/<span class="string">" /&gt;</span></span><br><span class="line"><span class="string">&lt;/Switch&gt;</span></span><br><span class="line"><span class="string">&lt;/Suspense&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-路由的传参"><a href="#3-路由的传参" class="headerlink" title="3.路由的传参"></a>3.路由的传参</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>  <span class="comment">/*通过params方式传参</span></span><br><span class="line"><span class="comment">  获取参数:props.match.params  </span></span><br><span class="line"><span class="comment">  参数只能是字符串，而且参数会在浏览器地址栏中显示*/</span></span><br><span class="line">&lt;Link to=<span class="string">"/about/zhangsan/13"</span>&gt;来到关于我们-params方式传参&lt;<span class="regexp">/Link&gt; &lt;br /</span>&gt;</span><br><span class="line">  <span class="comment">//获取路由中的参数信息</span></span><br><span class="line"> <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>About组件&#123;props.match.params.id&#125;&#123;props.match.params.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    </span><br><span class="line"><span class="number">2.</span> <span class="comment">/*通过search方式传参</span></span><br><span class="line"><span class="comment">  获取参数:props.location.search </span></span><br><span class="line"><span class="comment">  参数只能是字符串，而且参数会在浏览器地址栏中显示*/</span></span><br><span class="line">&lt;Link to=<span class="string">"/movie?name=xiaoming"</span>&gt;来到电影-search方式传参&lt;<span class="regexp">/Link&gt; &lt;br /</span>&gt;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="number">3.</span> <span class="comment">/*通过query方式传参  </span></span><br><span class="line"><span class="comment">   获取参数:props.location.query </span></span><br><span class="line"><span class="comment">   好处参数可以是对象，参数信息不会在浏览器的地址栏中显示，所以一刷新页面参数就没了*/</span></span><br><span class="line">&lt;Link to=&#123;&#123; <span class="attr">pathname</span>: <span class="string">'/movie'</span>, <span class="attr">query</span>: &#123; <span class="attr">name</span>: <span class="string">'sunny'</span> &#125; &#125;&#125;&gt;来到电影<span class="number">2</span>-query方式传参&lt;<span class="regexp">/Link&gt; &lt;br /</span>&gt;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="number">4.</span> <span class="comment">/*通过state方式传参</span></span><br><span class="line"><span class="comment">  获取参数:props.location.state   </span></span><br><span class="line"><span class="comment">  好处参数可以是对象，参数信息不会在浏览器的地址栏中显示，</span></span><br><span class="line"><span class="comment">  参数是加密的，所以一刷新页面参数就没了*/</span></span><br><span class="line">&lt;Link to=&#123;&#123; <span class="attr">pathname</span>: <span class="string">'/movie'</span>, <span class="attr">state</span>: &#123; <span class="attr">name</span>: <span class="string">'haha'</span> &#125; &#125;&#125;&gt;来到电影<span class="number">3</span>-state方式传参&lt;<span class="regexp">/Link&gt; &lt;br /</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-编程式导航"><a href="#4-编程式导航" class="headerlink" title="4.编程式导航"></a>4.编程式导航</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用Route包裹的组件会自动将location  history  match注入到组件的props中</span></span><br><span class="line"><span class="comment">//所以在组件中直接可以使用props.location  props.history这些信息</span></span><br><span class="line"><span class="comment">// console.log(props)</span></span><br><span class="line">&lt;Route path=<span class="string">"/movie"</span> component=&#123;Movie&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">props.history.push(&#123;<span class="attr">pathname</span>:<span class="string">"/search"</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//如果组件没有使用Route包裹，那么不能使用props的location history match这三个参数</span></span><br><span class="line"><span class="comment">//如果此时我们想要用这三个参数，我们可以将当前组件使用withRouter来包裹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//withRouter可以包装任何自定义组件，将react-router 的 history,location,match 三个对象传入</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withRouter(MovieDetail);</span><br></pre></td></tr></table></figure>

<h3 id="5-ReactCSSTransitionGroup"><a href="#5-ReactCSSTransitionGroup" class="headerlink" title="5.ReactCSSTransitionGroup"></a>5.ReactCSSTransitionGroup</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ReactCSSTransitionGroup 使用步骤</span></span><br><span class="line"><span class="comment">//1.通过npm install react-addons-css-transition-group 安装并引入</span></span><br><span class="line"><span class="keyword">var</span> ReactCSSTransitionGroup = <span class="built_in">require</span>(<span class="string">'react-addons-css-transition-group'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &#123;<span class="comment">/*2.给需要动画的元素包裹ReactCSSTransitionGroup，可以对一组元素进行过渡动画*/</span>&#125;</span><br><span class="line">&lt;ReactCSSTransitionGroup</span><br><span class="line">component=<span class="string">"ul"</span> </span><br><span class="line">transitionName=<span class="string">"example"</span>  </span><br><span class="line">transitionEnterTimeout=&#123;<span class="number">500</span>&#125; </span><br><span class="line">transitionLeaveTimeout=&#123;<span class="number">300</span>&#125; </span><br><span class="line">transitionAppear=&#123;<span class="literal">true</span>&#125; </span><br><span class="line">transitionAppearTimeout=&#123;<span class="number">500</span>&#125;&gt;</span><br><span class="line">&#123;<span class="keyword">this</span>.getItems()&#125;</span><br><span class="line">&lt;<span class="regexp">/ReactCSSTransitionGroup&gt;  </span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/3.写动画的样式 (入场动画 出场动画的样式)</span></span><br><span class="line"><span class="regexp">import './</span>demo1.css<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/*指定入场动画的开始状态*/</span></span><br><span class="line"><span class="string">.example-enter &#123;</span></span><br><span class="line"><span class="string">    opacity: 0.01;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/*指定入场动画的整个过程*/</span></span><br><span class="line"><span class="string">.example-enter.example-enter-active &#123;</span></span><br><span class="line"><span class="string">    opacity: 1;</span></span><br><span class="line"><span class="string">    transition: opacity 500ms ease-in;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/*指定出场动画的开始状态*/</span></span><br><span class="line"><span class="string">.example-leave &#123;</span></span><br><span class="line"><span class="string">    opacity: 1;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/*指定出场动画的整个过程*/</span></span><br><span class="line"><span class="string">.example-leave.example-leave-active &#123;</span></span><br><span class="line"><span class="string">    opacity: 0.01;</span></span><br><span class="line"><span class="string">    transition: opacity 300ms ease-in;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/*指定初始动画的样式*/</span></span><br><span class="line"><span class="string">.example-appear &#123;</span></span><br><span class="line"><span class="string">    opacity: 0.01;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/*指定初始动画的整个过程*/</span></span><br><span class="line"><span class="string">.example-appear.example-appear-active &#123;</span></span><br><span class="line"><span class="string">    opacity: 1;</span></span><br><span class="line"><span class="string">    transition: opacity .5s ease-in;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-Hook"><a href="#6-Hook" class="headerlink" title="6. Hook"></a>6. Hook</h3><h4 id="6-1-hook的基本使用"><a href="#6-1-hook的基本使用" class="headerlink" title="6.1 hook的基本使用"></a>6.1 hook的基本使用</h4><p><strong><em>Hook</em></strong> <strong>是</strong> <strong>React 16.8</strong> <strong>的新增特性。它可以让你在不编写</strong> <strong>class</strong> <strong>的情况下使用</strong> <strong>state</strong> <strong>以及其他的</strong> <strong>React</strong> <strong>特性。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Demo1</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//count代表state的变量</span></span><br><span class="line">    <span class="comment">//setCount是一个function，如果我们要修改count变量，需要通过setCount来修改</span></span><br><span class="line">    <span class="keyword">let</span> [count, setCount] = useState(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">let</span> [count2, setCount2] = useState(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">let</span> [count3, setCount3] = useState(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;count&#125;</span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; setCount(++count) &#125;&#125;&gt;点我修改count<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;count2&#125;</span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; setCount2(++count2) &#125;&#125;&gt;点我修改count2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;count3&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; setCount3(++count3) &#125;&#125;&gt;点我修改count3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Demo1;</span><br></pre></td></tr></table></figure>

<ul>
<li>不要在循环，条件或嵌套函数中调用Hook，确保总是在你的 React 函数的最顶层调用他们。遵守这条规则，你就能确保<br>Hook 在每一次渲染中都按照同样的顺序被调用。这让 React 能够在多次的 <code>useState</code> 和 <code>useEffect</code> 调用之间保持 hook 状态的正确</li>
</ul>
<h4 id="6-2-effectHook"><a href="#6-2-effectHook" class="headerlink" title="6.2 effectHook"></a>6.2 effectHook</h4><p><em>Effect Hook</em> 可以让你在函数组件中执行副作用操作</p>
<p>副作用：函数内部的代码不对函数外部的代码产生任何影响</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState,useEffect  &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Child <span class="keyword">from</span> <span class="string">'./Child.jsx'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Demo2</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//count代表state的变量</span></span><br><span class="line">    <span class="comment">//setCount是一个function，如果我们要修改count变量，需要通过setCount来修改</span></span><br><span class="line">    <span class="keyword">let</span> [count, setCount] = useState(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">let</span> [count2, setCount2] = useState(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//useEffect函数可以来模拟class组件的中指定生命周期的钩子函数 componentDidMount，componentDidUpdate，componentWillUnmount</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//相当于componentDidMount 、componentDidUpdate</span></span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"xxxxxxxxxxx"</span>,count)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//相当于componentDidMount</span></span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"yyyyyyyyy"</span>)</span><br><span class="line">    &#125;,[])</span><br><span class="line"></span><br><span class="line">    <span class="comment">//当count2的值被改变之后执行当前的useEffect，其他值改变不会执行这个useEffect</span></span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"zzzzzzzzzzzzz"</span>)</span><br><span class="line">    &#125;,[count2])</span><br><span class="line"></span><br><span class="line">    <span class="comment">//useEffect函数中return的function会在组件重新渲染的时候以及组件卸载的时候执行</span></span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'hello Hook'</span>)    </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;count&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; setCount(++count) &#125;&#125;&gt;点我修改count<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; setCount2(++count2) &#125;&#125;&gt;点我修改count2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Child</span>&gt;</span><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Demo2;</span><br></pre></td></tr></table></figure>

<h4 id="6-3-useContext-的使用"><a href="#6-3-useContext-的使用" class="headerlink" title="6.3 useContext 的使用"></a>6.3 useContext 的使用</h4><p>作用：可以向子孙组件发布数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.在App.jsx</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">MyContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;name:</span>"<span class="attr">zhangsan</span>"&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="xml">        App</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Demo2</span>&gt;</span><span class="tag">&lt;/<span class="name">Demo2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">MyContext.Provider</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.Child.jsx</span></span><br><span class="line"><span class="keyword">import</span> React,&#123;useContext&#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> MyContext <span class="keyword">from</span> <span class="string">'@/context.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//在子组件中获取父组件发布的数据</span></span><br><span class="line">    <span class="keyword">const</span> contextValue = useContext(MyContext);</span><br><span class="line">    <span class="built_in">console</span>.log(contextValue)</span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>xx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//定义context.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">const</span> MyContext = React.createContext();</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> MyContext;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/25/13.拓展-课外问题总结-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/25/13.拓展-课外问题总结-1/" itemprop="url">13.拓展-课外问题总结(1)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-25T16:18:44+08:00">
                2019-11-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.打印如下的函数的值:</p>
<p>function Foo(){</p>
<p>​           getName = function(){alter(1);};</p>
<p>​           return this;</p>
<p>​       }</p>
<p>​       Foo.getName = function(){alert(2)};</p>
<p>​       Foo.prototype.getName = function(){alert(3)};</p>
<p>​       var getName = function(){alert(4)};</p>
<p>​       function getName(){alert(5)};</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Foo.getName()  ;  //2   是调用方式2的函数代码块，结果为“2”！</span><br><span class="line"> getName();  // 4    预解析，函数声明提前于变量声明，但是最终会被变量覆盖</span><br><span class="line"> Foo().getName();1   普通函数this指向,首先结果是&quot;this&quot; 并指向window,第二个就是this.getName(),全局getName指向的匿名函数</span><br><span class="line"> getName();   //1方式1执行出来的那个全局变量getName 指针指向的匿名函数,方式4已经被覆盖了,所以结果为 “1”.</span><br><span class="line">(new Foo()).getName();  //3  首先产生一个新的实例对象, 继承了Foo()这个构造函数中的getName方法, 再执行方式3函数块</span><br><span class="line">	优先级:	new Foo() &gt;  Foo() &gt; new Foo</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">new Foo.getName()</span><br><span class="line">等价于new (Foo.getName())，先执行Foo.getName()，输出2，再创建Foo.getName()方法的实例。</span><br><span class="line">new new Foo().getName()</span><br><span class="line">相当于new (new Foo().getName())，即先执行new Foo().getName()，由第六步可知，输出3，再创建Foo.prototype.getName()这个函数的实例返回。</span><br></pre></td></tr></table></figure>

<p><em>2.**</em>打印出了什么<strong>?</strong>该题考察了什么知识点**?</p>
<p><strong>for(var i=0;i&lt;5;i++){</strong></p>
<p>​                     <strong>setTimeout(function(){</strong></p>
<p>​                            <strong>console.log(i);</strong></p>
<p>​                     <strong>},i*1000)</strong></p>
<p>​              <strong>}</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5-5</span><br><span class="line">setTimeout是异步执行，也即每一次for循环执行一次，settimeout都会执行一次，但是里面的settimeout并没有立即被执行，而是等到for循环结束，再执行；for循环了5次，就放了5次，当主线程执行完成后，才进入任务队列里面执行。</span><br></pre></td></tr></table></figure>

<p><em>3.*什么是时间委托</em>?*请写代码举例说明</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">事件代理，JavaScript高级程序设计上讲：事件委托就是利用事件冒泡，只指定一个事件处理程序，就可以管理某一类型的所有事件。</span><br><span class="line">举例: 有一个节点树div&gt;ul&gt;li&gt;a;比如给最里面的a加一个click点击事件，那么这个事件就会一层一层的往外执行，执行顺序a&gt;li&gt;ul&gt;div，有这样一个机制，那么我们给最外面的div加点击事件，那么里面的ul，li，a做点击事件的时候，都会冒泡到最外层的div上，所以都会触发，这就是事件委托，委托它们父级代为执行事件。</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=<span class="string">"ul1"</span>&gt;</span><br><span class="line">    &lt;li&gt;<span class="number">111</span>&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">    &lt;li&gt;222&lt;/</span>li&gt;</span><br><span class="line">    &lt;li&gt;<span class="number">333</span>&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">    &lt;li&gt;444&lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">window.onload = function()&#123;</span></span><br><span class="line"><span class="regexp">    var oUl = document.getElementById("ul1");</span></span><br><span class="line"><span class="regexp">    var aLi = oUl.getElementsByTagName('li');</span></span><br><span class="line"><span class="regexp">    for(var i=0;i&lt;aLi.length;i++)&#123;</span></span><br><span class="line"><span class="regexp">        aLi[i].onclick = function()&#123;</span></span><br><span class="line"><span class="regexp">            alert(123);</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125; /</span><span class="regexp">/原来的方法</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　<span class="keyword">var</span> oUl = <span class="built_in">document</span>.getElementById(<span class="string">"ul1"</span>);</span><br><span class="line">　　oUl.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">　　　　<span class="keyword">var</span> ev = ev || <span class="built_in">window</span>.event;</span><br><span class="line">　　　　<span class="keyword">var</span> target = ev.target || ev.srcElement;</span><br><span class="line">　　　　<span class="keyword">if</span>(target.nodeName.toLowerCase() == <span class="string">'li'</span>)&#123;</span><br><span class="line">　 　　　　　　 alert(<span class="number">123</span>);</span><br><span class="line">　　　　　　　  alert(target.innerHTML);</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　&#125;</span><br><span class="line">&#125;<span class="comment">//优化后的方法</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Event对象提供了一个属性叫target，可以返回事件的目标节点，我们成为事件源，也就是说，target就可以表示为当前的事件操作的dom，但是不是真正操作dom，当然，这个是有兼容性的，标准浏览器用ev.target，IE浏览器用event.srcElement，此时只是获取了当前节点的位置，并不知道是什么节点名称，这里我们用nodeName来获取具体是什么标签名，这个返回的是一个大写的，我们需要转成小写再做比较（习惯问题）：</span><br></pre></td></tr></table></figure>

<p>4.jquery或者zepto中调用接口,请求数据,使用ajax方法,请写代码举例说明</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form id=<span class="string">"form"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"file"</span> name=<span class="string">"file"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"button"</span> value=<span class="string">"按钮"</span> id=<span class="string">"btn"</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">   $(<span class="string">'#btn'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> fd = <span class="keyword">new</span> FormData($(<span class="string">'form'</span>)[<span class="number">0</span>])</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            method: <span class="string">'post'</span>,</span><br><span class="line">            url: <span class="string">''</span>,</span><br><span class="line">            data: fd,</span><br><span class="line">            contentType: <span class="literal">false</span>,</span><br><span class="line">            processData: <span class="literal">false</span>,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'res'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将jsonp的发送方式设置在了$ajax中</span></span><br><span class="line">$(<span class="string">'#btn'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        method : <span class="string">'POST'</span></span><br><span class="line">        url : <span class="string">'http://localhost/Ajax_day4/demo1.php'</span>,</span><br><span class="line">        success : <span class="function"><span class="keyword">function</span> (<span class="params">datas</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(datas);</span><br><span class="line">        &#125;,</span><br><span class="line">            <span class="comment">// 如果在dataType中设置'jsonp'，表示当前请求以jsonp形式发送，与dataType的原始功能无关</span></span><br><span class="line">        dataType : <span class="string">'jsonp'</span></span><br><span class="line">    &#125;);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ajax设置请求头</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">         type: type,</span><br><span class="line">         headers: &#123;</span><br><span class="line">            <span class="string">'token'</span>:<span class="string">'token_value'</span></span><br><span class="line">         &#125;,</span><br><span class="line">         url: url,</span><br><span class="line">         data: data,</span><br><span class="line">         success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">         &#125;,</span><br><span class="line">         error: <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">         &#125;,</span><br><span class="line">         complete: <span class="function"><span class="keyword">function</span>(<span class="params">XMLHttpRequest, status</span>) </span>&#123; <span class="comment">//请求完成后最终执行参数　</span></span><br><span class="line">         &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>5.怎么检测一个变量不是数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、从原型入手，Array.prototype.isPrototypeOf(obj);</span><br><span class="line">利用isPrototypeOf()方法，判定Array是不是在obj的原型链中，如果是，则返回true,否则false。</span><br><span class="line">2. Array.isArray()方法。</span><br></pre></td></tr></table></figure>

<p>6.decodeURI的好处</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用于对 <span class="built_in">encodeURI</span>() 函数编码过的 URI 进行解码。</span><br><span class="line">参数中如果出现#，/,&amp;这些字符，就必须要用decodeURIComponent了，不然这些特殊字符会导致我们接收参数的错误</span><br></pre></td></tr></table></figure>

<p>7.解析字符串得到(<a href="http://www.baidu.com/?a=1&amp;b=2)**,得出{a:1,b:2}" target="_blank" rel="noopener">http://www.baidu.com/?a=1&amp;b=2)**,得出{a:1,b:2}</a>**</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> param = url.split(<span class="string">"?"</span>)[<span class="number">1</span>];            <span class="comment">//获取param</span></span><br><span class="line"><span class="keyword">let</span> arr = param.split(<span class="string">"&amp;"</span>);</span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">		<span class="keyword">let</span> arr_param = arr[i].split(<span class="string">"="</span>);</span><br><span class="line">		obj[arr_param[<span class="number">0</span>]] = arr_param[<span class="number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(obj);</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/25/12-拓展-GraphQL简介/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/25/12-拓展-GraphQL简介/" itemprop="url">12.拓展-GraphQL简介</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-25T16:17:41+08:00">
                2019-11-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-GraphQL"><a href="#1-GraphQL" class="headerlink" title="1.GraphQL"></a>1.GraphQL</h1><h2 id="1-1-介绍"><a href="#1-1-介绍" class="headerlink" title="1.1 介绍"></a>1.1 介绍</h2><p>GraphQL 是一种 API 查询语言<br>GraphQL 是一种为 API 接口和查询已有数据运行时环境的查询语言. 它提供了一套完整的和易于理解的 API 接口数据描述, 给客户端权力去精准查询他们需要的数据, 而不用再去实现其他更多的代码, 使 API 接口开发变得更简单高效, 支持强大的开发者工具.</p>
<p>友情链接：</p>
<p><a href="https://graphql.org/" target="_blank" rel="noopener">https://graphql.org</a></p>
<p><a href="https://graphql.js.cool/" target="_blank" rel="noopener">https://graphql.js.cool/</a></p>
<h3 id="1-1-1-What-is-GraphQL"><a href="#1-1-1-What-is-GraphQL" class="headerlink" title="1.1.1 What is GraphQL?"></a>1.1.1 What is GraphQL?</h3><p>正如副标题所说，GraphQL 是由 Facebook 创造的用于描述复杂数据模型的一种查询语言。这里查询语言所指的并不是常规意义上的类似 sql 语句的查询语言，而是一种用于前后端数据查询方式的规范。</p>
<h3 id="1-1-2-Why-using-GraphQL"><a href="#1-1-2-Why-using-GraphQL" class="headerlink" title="1.1.2 Why using GraphQL?"></a>1.1.2 Why using GraphQL?</h3><p>当今客户端和服务端主要的交互方式有 2 种，分别是 REST 和 ad hoc 端点。GraphQL 官网指出了它们的不足之处主要在于：当需求或数据发生变化时，它们都需要建立新的接口来适应变化，而不断添加的接口，会造成服务器代码的不断增长，即使通过增加接口版本，也并不能够完全限制服务器代码的增长。</p>
<h5 id="GraphQL-特性"><a href="#GraphQL-特性" class="headerlink" title="GraphQL 特性"></a>GraphQL 特性</h5><ul>
<li>首先，它是<strong>声明式的</strong>。查询的结果格式由请求方（即客户端）决定而非响应方（即服务器端）决定，也就是说，一个 GraphQL 查询结果的返回是同客户端请求时的结构一样的，不多不少，不增不减。</li>
<li>其次，它是<strong>可组合的</strong>。一个 GraphQL 的查询结构是一个有层次的字段集，它可以任意层次地进行嵌套或组合，也就是说它可以通过对字段进行组合、嵌套来满足需求。</li>
<li>第三，它是<strong>强类型的</strong>。强类型保证，只有当一个 GraphQL 查询满足所设定的查询类型，那么查询的结果才会被执行。</li>
</ul>
<p><img src="/2019/11/25/12-拓展-GraphQL简介/3.png" alt="BP"></p>
<h2 id="1-2-Node-js-环境简单用法"><a href="#1-2-Node-js-环境简单用法" class="headerlink" title="1.2  Node.js 环境简单用法"></a>1.2  Node.js 环境简单用法</h2><h3 id="1-下载"><a href="#1-下载" class="headerlink" title="1.下载"></a>1.下载</h3><p>GraphQL 规范的参考实现, 专为在 Node.js 环境中运行 GraphQL 而设计.</p>
<p>通过 命令行 执行 <code>GraphQL.js</code> hello world 脚本:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install graphql</span><br></pre></td></tr></table></figure>

<h3 id="2-创建-hello-js"><a href="#2-创建-hello-js" class="headerlink" title="2.创建 hello.js"></a>2.创建 hello.js</h3><p>然后执行 <code>node hello.js</code>.</p>
<p><code>hello.js</code>源码:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> &#123; graphql, buildSchema &#125; = <span class="built_in">require</span>(<span class="string">'graphql'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> schema = buildSchema(<span class="string">`</span></span><br><span class="line"><span class="string">  type Query &#123;</span></span><br><span class="line"><span class="string">    hello: String</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> root = &#123; <span class="attr">hello</span>: <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">'Hello world!'</span> &#125;;</span><br><span class="line"></span><br><span class="line">graphql(schema, <span class="string">'&#123; hello &#125;'</span>, root).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(response);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="1-3-Express-运行"><a href="#1-3-Express-运行" class="headerlink" title="1.3 Express 运行"></a>1.3 Express 运行</h2><p>通过 Express 实现的 GraphQL 参考实现, 你可以联合 Express 运行或独立运行.</p>
<p>为了方便下面的步骤，我们在graphql文件夹中手动创建下面的目录结构，并安装指定的依赖</p>
<p><img src="/2019/11/25/12-拓展-GraphQL简介/1.png" alt="BP"></p>
<p>运行一个 <code>express-graphql</code> 安装项目依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express express-graphql graphql</span><br></pre></td></tr></table></figure>

<h3 id="1-index-js代码"><a href="#1-index-js代码" class="headerlink" title="1.index.js代码"></a>1.index.js代码</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> expressGraphql = <span class="built_in">require</span>(<span class="string">'express-graphql'</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"><span class="comment">// 配置路由</span></span><br><span class="line">app.use(<span class="string">'/graphql'</span>, expressGraphql(<span class="function"><span class="params">req</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    schema: <span class="built_in">require</span>(<span class="string">'./schema'</span>), <span class="comment">// graphql相关代码主目录</span></span><br><span class="line">    graphiql: <span class="literal">true</span> <span class="comment">// 是否开启可视化工具</span></span><br><span class="line">    <span class="comment">// ... 此处还有很多参数，为了简化文章，此处就一一举出, 具体可以看 刚才开篇提到的 express文档,</span></span><br><span class="line">    <span class="comment">// 也可以在文章末尾拉取项目demo进行查阅</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;))</span><br><span class="line"><span class="comment">// 服务使用3000端口</span></span><br><span class="line">app.listen(<span class="number">3000</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"graphql server is ok open http://localhost:3000/graphql"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="2-graphql-schema-js代码"><a href="#2-graphql-schema-js代码" class="headerlink" title="2.graphql/schema.js代码"></a>2.graphql/schema.js代码</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  GraphQLSchema,</span><br><span class="line">  GraphQLObjectType</span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">'graphql'</span>)</span><br><span class="line"><span class="comment">// 规范写法，声明query(查询类型接口) 和 mutation(修改类型接口)</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">new</span> GraphQLSchema(&#123;</span><br><span class="line">  query: <span class="keyword">new</span> GraphQLObjectType(&#123;</span><br><span class="line">    name: <span class="string">'Query'</span>,</span><br><span class="line">    description: <span class="string">'查询数据'</span>,</span><br><span class="line">    fields: <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">      <span class="comment">// 查询类型接口方法名称</span></span><br><span class="line">      fetchObjectData: <span class="built_in">require</span>(<span class="string">'./queries/fetchObjectData'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;),</span><br><span class="line">  mutation: <span class="keyword">new</span> GraphQLObjectType(&#123;</span><br><span class="line">    name: <span class="string">'Mutation'</span>,</span><br><span class="line">    description: <span class="string">'修改数据'</span>,</span><br><span class="line">    fields: <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">      <span class="comment">// 修改类型接口方法名称</span></span><br><span class="line">      updateData: <span class="built_in">require</span>(<span class="string">'./mutations/updateData'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3-graphql-queries-fetchObjectData-js代码"><a href="#3-graphql-queries-fetchObjectData-js代码" class="headerlink" title="3.graphql/queries/fetchObjectData.js代码"></a>3.graphql/queries/fetchObjectData.js代码</h3><p>先在graphql/queries文件夹下创建fetchObjectData.js文件, 并填入以下代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  GraphQLID,</span><br><span class="line">  GraphQLInt,</span><br><span class="line">  GraphQLFloat,</span><br><span class="line">  GraphQLString,</span><br><span class="line">  GraphQLBoolean,</span><br><span class="line">  GraphQLNonNull,</span><br><span class="line">  GraphQLObjectType</span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">'graphql'</span>)</span><br><span class="line"><span class="comment">// 定义接口返回的数据结构</span></span><br><span class="line"><span class="keyword">const</span> userType = <span class="keyword">new</span> GraphQLObjectType(&#123;</span><br><span class="line">  name: <span class="string">'userItem'</span>,</span><br><span class="line">  description: <span class="string">'用户信息'</span>,</span><br><span class="line">  fields: <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">    id: &#123;</span><br><span class="line">      type: GraphQLID,</span><br><span class="line">      description: <span class="string">'数据唯一标识'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    username: &#123;</span><br><span class="line">      type: GraphQLString,</span><br><span class="line">      description: <span class="string">'用户名'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    age: &#123;</span><br><span class="line">      type: GraphQLInt,</span><br><span class="line">      description: <span class="string">'年龄'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    height: &#123;</span><br><span class="line">      type: GraphQLFloat,</span><br><span class="line">      description: <span class="string">'身高'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    isMarried: &#123;</span><br><span class="line">      type: GraphQLBoolean,</span><br><span class="line">      description: <span class="string">'是否已婚'</span>,</span><br><span class="line">      deprecationReason: <span class="string">"这个字段现在不需要了"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 定义接口</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  type: userType,</span><br><span class="line">  description: <span class="string">'object类型数据例子'</span>,</span><br><span class="line">  <span class="comment">// 定义接口传参的数据结构</span></span><br><span class="line">  args: &#123;</span><br><span class="line">    isReturn: &#123;</span><br><span class="line">      type: <span class="keyword">new</span> GraphQLNonNull(GraphQLBoolean),</span><br><span class="line">      description: <span class="string">'是否返回数据'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  resolve: <span class="function">(<span class="params">root, params, context</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; isReturn &#125; = params</span><br><span class="line">    <span class="keyword">if</span> (isReturn) &#123;</span><br><span class="line">      <span class="comment">// 返回的数据与前面定义的返回数据结构一致</span></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="string">"id"</span>: <span class="string">"110000199811259999"</span>,</span><br><span class="line">          <span class="string">"username"</span>: <span class="string">"DongWenbin"</span>,</span><br><span class="line">          <span class="string">"age"</span>: <span class="number">21</span>,</span><br><span class="line">          <span class="string">"height"</span>: <span class="number">182.5</span>,</span><br><span class="line">          <span class="string">"isMarried"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-graphql-mutations-updateData-js代码"><a href="#4-graphql-mutations-updateData-js代码" class="headerlink" title="4.graphql/mutations/updateData.js代码"></a>4.graphql/mutations/updateData.js代码</h3><p>先在graphql/mutations文件夹下创建updateData.js文件, 并填入以下代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  GraphQLInt</span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">'graphql'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  type: GraphQLInt,  <span class="comment">// 定义返回的数据类型</span></span><br><span class="line">  description: <span class="string">'修改例子'</span>,</span><br><span class="line">  args: &#123;  <span class="comment">// 定义传参的数据结构</span></span><br><span class="line">    num: &#123;</span><br><span class="line">      type: GraphQLInt,</span><br><span class="line">      description: <span class="string">'数量'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  resolve: <span class="function">(<span class="params">root, params</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; num &#125; = params</span><br><span class="line">    count += num</span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>好了，到此为止，简单的GraphQL服务器就搭建好了，让我们来启动看看</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node index.js  // 启动项目</span><br></pre></td></tr></table></figure>

<p>然后我们在浏览器打开 <a href="http://localhost:3000/graphql" target="_blank" rel="noopener">http://localhost:3000/graphql</a> 如下图所示</p>
<p><img src="/2019/11/25/12-拓展-GraphQL简介/2.png" alt="BP"></p>
<p>我们可以看到页面分为3栏，左边的是调用api用的，中间是调用api返回的结果 右边实际上就是我们刚才定义接口相关的东西，也就是api文档。<br>我们在左边粘贴以下代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">query fetchObjectData &#123;</span><br><span class="line">  fetchObjectData(</span><br><span class="line">    isReturn: <span class="literal">true</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    id</span><br><span class="line">    username</span><br><span class="line">    age</span><br><span class="line">    height</span><br><span class="line">    isMarried</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mutation updateData &#123;</span><br><span class="line">  updateData(</span><br><span class="line">    num: <span class="number">2</span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-4-语法规范"><a href="#1-4-语法规范" class="headerlink" title="1.4 语法规范"></a>1.4 语法规范</h2><h3 id="1、导入GraphQL-js及类型"><a href="#1、导入GraphQL-js及类型" class="headerlink" title="1、导入GraphQL.js及类型"></a>1、导入GraphQL.js及类型</h3><p>graphql 无论在定义接口参数和接口返回结果时, 都需要先定义好其中所包含数据结构的类型, 这不难理解，可以理解为我们定义的就是数据模型，其中常用的类型如下。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">    GraphQLList,  <span class="comment">// 数组列表</span></span><br><span class="line">    GraphQLObjectType, <span class="comment">// 对象</span></span><br><span class="line">    GraphQLString, <span class="comment">// 字符串</span></span><br><span class="line">    GraphQLInt,  <span class="comment">// int类型</span></span><br><span class="line">    GraphQLFloat,  <span class="comment">// float类型</span></span><br><span class="line">    GraphQLEnumType,  <span class="comment">// 枚举类型</span></span><br><span class="line">    GraphQLNonNull,  <span class="comment">// 非空类型</span></span><br><span class="line">    GraphQLSchema <span class="comment">// schema(定义接口时使用)</span></span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">'graphql'</span>)</span><br></pre></td></tr></table></figure>

<h3 id="2、定义schema"><a href="#2、定义schema" class="headerlink" title="2、定义schema"></a>2、定义schema</h3><p>schema实例中，一般规范为<br>query: 定义查询类的接口<br>mutation: 定义修改类的接口</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> GraphQLSchema(&#123;</span><br><span class="line">  query: <span class="keyword">new</span> GraphQLObjectType(&#123;</span><br><span class="line">    name: <span class="string">'Query'</span>, <span class="comment">// 查询实例名称</span></span><br><span class="line">    description: <span class="string">'查询数据'</span>, <span class="comment">// 接口描述</span></span><br><span class="line">    fields: <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">      <span class="comment">// 查询类型接口方法名称</span></span><br><span class="line">      fetchDataApi1: <span class="built_in">require</span>(<span class="string">'./queries/fetchDataApi1'</span>),</span><br><span class="line">      fetchDataApi2: <span class="built_in">require</span>(<span class="string">'./queries/fetchDataApi2'</span>),</span><br><span class="line">      fetchDataApi3: <span class="built_in">require</span>(<span class="string">'./queries/fetchDataApi3'</span>),</span><br><span class="line">      ...</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;),</span><br><span class="line">  mutation: <span class="keyword">new</span> GraphQLObjectType(&#123;</span><br><span class="line">    name: <span class="string">'Mutation'</span>,</span><br><span class="line">    description: <span class="string">'修改数据'</span>,</span><br><span class="line">    fields: <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">      <span class="comment">// 修改类型接口方法名称</span></span><br><span class="line">      updateDataApi1: <span class="built_in">require</span>(<span class="string">'./mutations/updateDataApi1'</span>),</span><br><span class="line">      updateDataApi2: <span class="built_in">require</span>(<span class="string">'./mutations/updateDataApi2'</span>),</span><br><span class="line">      ...</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3、接口方法定义"><a href="#3、接口方法定义" class="headerlink" title="3、接口方法定义"></a>3、接口方法定义</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引用需要用到的数据类型</span></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  GraphQLID,</span><br><span class="line">  GraphQLString,</span><br><span class="line">  GraphQLNonNull,</span><br><span class="line">  GraphQLObjectType</span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">'graphql'</span>)</span><br><span class="line"><span class="comment">// 第一部分 定义接口返回的数据结构</span></span><br><span class="line"><span class="comment">// 不难看出来，下面定义的是</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   &#123;</span></span><br><span class="line"><span class="comment">      id</span></span><br><span class="line"><span class="comment">      username</span></span><br><span class="line"><span class="comment">   &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> userType = <span class="keyword">new</span> GraphQLObjectType(&#123;</span><br><span class="line">  name: <span class="string">'userItem'</span>,</span><br><span class="line">  description: <span class="string">'用户信息'</span>,</span><br><span class="line">  fields: <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">    id: &#123;</span><br><span class="line">      type: GraphQLID,</span><br><span class="line">      description: <span class="string">'数据唯一标识'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    username: &#123;</span><br><span class="line">      type: GraphQLString,</span><br><span class="line">      description: <span class="string">'用户名'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 第二部分 定义接口</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  type: userType,</span><br><span class="line">  description: <span class="string">'object类型数据例子'</span>,</span><br><span class="line">  <span class="comment">// 定义接口传参的数据结构</span></span><br><span class="line">  args: &#123;</span><br><span class="line">    isReturn: &#123;</span><br><span class="line">      type: <span class="keyword">new</span> GraphQLNonNull(GraphQLBoolean),</span><br><span class="line">      description: <span class="string">'是否返回数据'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  resolve: <span class="function">(<span class="params">root, params, context</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; isReturn &#125; = params</span><br><span class="line">    <span class="comment">// 返回的数据与前面定义的返回数据结构一致</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">       <span class="string">"id"</span>: <span class="string">"5bce2b8c7fde05hytsdsc12c"</span>,</span><br><span class="line">       <span class="string">"username"</span>: <span class="string">"Davis"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-5-前后端交互（入门）"><a href="#1-5-前后端交互（入门）" class="headerlink" title="1.5 前后端交互（入门）"></a>1.5 前后端交互（入门）</h2><h3 id="1、准备"><a href="#1、准备" class="headerlink" title="1、准备"></a>1、准备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save express express-graphql graphql cors</span><br></pre></td></tr></table></figure>

<h3 id="2-服务器端代码app-js"><a href="#2-服务器端代码app-js" class="headerlink" title="2.服务器端代码app.js"></a>2.服务器端代码app.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> graphqlHTTP = <span class="built_in">require</span>(<span class="string">'express-graphql'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; buildSchema &#125; = <span class="built_in">require</span>(<span class="string">'graphql'</span>);</span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">'cors'</span>); <span class="comment">// 用来解决跨域问题</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建 schema，需要注意到：</span></span><br><span class="line"><span class="comment">// 1. 感叹号 ！ 代表 not-null</span></span><br><span class="line"><span class="comment">// 2. rollDice 接受参数</span></span><br><span class="line"><span class="keyword">const</span> schema = buildSchema(<span class="string">`</span></span><br><span class="line"><span class="string">  type Query &#123;</span></span><br><span class="line"><span class="string">    username: String</span></span><br><span class="line"><span class="string">    age: Int!</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>)</span><br><span class="line"><span class="keyword">const</span> root = &#123;</span><br><span class="line">    username: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'董文斌'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    age: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(<span class="built_in">Math</span>.random() * <span class="number">100</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line">app.use(cors());</span><br><span class="line">app.use(<span class="string">'/graphql'</span>, graphqlHTTP(&#123;</span><br><span class="line">    schema: schema,</span><br><span class="line">    rootValue: root,</span><br><span class="line">    graphiql: <span class="literal">true</span></span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3300</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Running a GraphQL API server at http://localhost:3300/graphql'</span>)</span><br></pre></td></tr></table></figure>

<h3 id="3-客户端代码index-html"><a href="#3-客户端代码index-html" class="headerlink" title="3. 客户端代码index.html"></a>3. 客户端代码index.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>graphql demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>获取当前用户数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"age"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> test = <span class="built_in">document</span>.querySelector(<span class="string">'.test'</span>);</span></span><br><span class="line"><span class="javascript">    test.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> username = <span class="built_in">document</span>.querySelector(<span class="string">'.username'</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> age = <span class="built_in">document</span>.querySelector(<span class="string">'.age'</span>);</span></span><br><span class="line"><span class="javascript">        fetch(<span class="string">'http://localhost:3300/graphql'</span>, &#123;</span></span><br><span class="line">            headers: &#123;</span><br><span class="line"><span class="javascript">                <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,</span></span><br><span class="line"><span class="javascript">                <span class="string">'Accept'</span>: <span class="string">'application/json'</span></span></span><br><span class="line">            &#125;,</span><br><span class="line"><span class="javascript">            method: <span class="string">'POST'</span>,</span></span><br><span class="line"><span class="javascript">            body: <span class="built_in">JSON</span>.stringify(&#123;</span></span><br><span class="line">                query: `&#123;</span><br><span class="line">                    username,</span><br><span class="line">                    age,</span><br><span class="line">            &#125;`</span><br><span class="line">            &#125;),</span><br><span class="line"><span class="javascript">            mode: <span class="string">'cors'</span> <span class="comment">// no-cors, cors, *same-origin</span></span></span><br><span class="line">        &#125;)</span><br><span class="line"><span class="javascript">            .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> response.json();</span></span><br><span class="line">            &#125;)</span><br><span class="line"><span class="javascript">            .then(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'返回结果'</span>, res);</span></span><br><span class="line"><span class="javascript">                username.innerHTML = <span class="string">`姓名：<span class="subst">$&#123;res.data.username&#125;</span>`</span>;</span></span><br><span class="line"><span class="javascript">                age.innerHTML = <span class="string">`年龄：<span class="subst">$&#123;res.data.age&#125;</span>`</span></span></span><br><span class="line">            &#125;)</span><br><span class="line"><span class="javascript">            .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.error(<span class="string">'错误'</span>, err);</span></span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="1-6-总结"><a href="#1-6-总结" class="headerlink" title="1.6 总结"></a>1.6 总结</h2><p>目前前后端的结构大概如下图。后端通过 DAO 层与数据库连接，服务于主要处理业务逻辑的 Service 层，为 Controller 层提供数据源并产出 API；前端通过浏览器 URL 进行路由命中获取目标视图状态，而页面视图是由组件嵌套组成，每个组件维护着各自的组件级状态，一些稍微复杂的应用还会使用集中式状态管理的工具，比如 Vuex、Redux、Mobx 等。前后端只通过 API 来交流，这也是现在前后端分离开发的基础。</p>
<p><img src="/2019/11/25/12-拓展-GraphQL简介/4.png" alt="BP"></p>
<p>如果使用 GraphQL，那么后端将不再产出 API，而是将 Controller 层维护为 Resolver，和前端约定一套 Schema，这个 Schema 将用来生成接口文档，前端直接通过 Schema 或生成的接口文档来进行自己期望的请求。</p>
<p>经过几年一线开发者的填坑，已经有一些不错的工具链可以使用于开发与生产，很多语言也提供了对 GraphQL 的支持，比如 Java/Nodejs、Java、PHP、Ruby、Python、Go、C# 等。</p>
<p>一些比较有名的公司比如 Twitter、IBM、Coursera、Airbnb、Facebook、Github、携程等，内部或外部 API 从 RESTful 转为了 GraphQL 风格，特别是 Github，它的 v4 版外部 API 只使用 GraphQL。据一位在 Twitter 工作的大佬说硅谷不少一线二线的公司都在想办法转到 GraphQL 上，但是同时也说了 GraphQL 还需要时间发展，因为将它使用到生产环境需要前后端大量的重构，这无疑需要高层的推动和决心。</p>
<p>正如尤雨溪所说，为什么 GraphQL 两三年前没有广泛使用起来呢，可能有下面两个原因：</p>
<blockquote>
<ol>
<li>GraphQL 的 field resolve 如果按照 naive 的方式来写，每一个 field 都对数据库直接跑一个 query，会产生大量冗余 query，虽然网络层面的请求数被优化了，但数据库查询可能会成为性能瓶颈，这里面有很大的优化空间，但并不是那么容易做。FB 本身没有这个问题，因为他们内部数据库这一层也是抽象掉的，写 GraphQL 接口的人不需要顾虑 query 优化的问题。</li>
<li>GraphQL 的利好主要是在于前端的开发效率，但落地却需要服务端的全力配合。如果是小公司或者整个公司都是全栈，那可能可以做，但在很多前后端分工比较明确的团队里，要推动 GraphQL 还是会遇到各种协作上的阻力。</li>
</ol>
</blockquote>
<p>大约可以概括为性能瓶颈和团队分工的原因，希望随着社区的发展，基础设施的完善，会渐渐有完善的解决方案提出，让广大前后端开发者们可以早日用上此利器。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/25/11.react生命周期/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/25/11.react生命周期/" itemprop="url">11.react生命周期</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-25T16:16:07+08:00">
                2019-11-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-React父子组件通信"><a href="#1-React父子组件通信" class="headerlink" title="1. React父子组件通信"></a>1. React父子组件通信</h3><h4 id="1-1-父亲给孩子传递参数"><a href="#1-1-父亲给孩子传递参数" class="headerlink" title="1.1 父亲给孩子传递参数"></a>1.1 父亲给孩子传递参数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        App</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">CMTItem</span> <span class="attr">name</span>=<span class="string">&#123;</span>'<span class="attr">zhangsan</span>'&#125; &#123;<span class="attr">...obj</span>&#125;&gt;</span><span class="tag">&lt;/<span class="name">CMTItem</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br></pre></td></tr></table></figure>

<h4 id="1-2-孩子给父亲传递参数"><a href="#1-2-孩子给父亲传递参数" class="headerlink" title="1.2 孩子给父亲传递参数"></a>1.2 孩子给父亲传递参数</h4><blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment">// 父亲中用来接收参数的函数 </span></span><br><span class="line">&gt; getChild = <span class="function">(<span class="params">obj</span>) =&gt;</span> &#123;</span><br><span class="line">&gt;         <span class="keyword">const</span> id = <span class="keyword">this</span>.state.CommentList.length + <span class="number">1</span>;</span><br><span class="line">&gt;         <span class="built_in">console</span>.log()</span><br><span class="line">&gt;         obj.id = id;</span><br><span class="line">&gt;         <span class="built_in">console</span>.log(<span class="string">"父亲接收数据的方法"</span>,obj);</span><br><span class="line">&gt;         <span class="keyword">this</span>.setState(<span class="function">(<span class="params">state</span>) =&gt;</span>(&#123;</span><br><span class="line">&gt;             CommentList :[obj,...this.state.CommentList] ★★</span><br><span class="line">&gt;             <span class="comment">// 用来添加到数组，</span></span><br><span class="line">&gt;         &#125;))</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt; <span class="comment">// 父亲中的子组件的使用</span></span><br><span class="line">&gt;      <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">&gt;         App</span></span><br><span class="line"><span class="xml">&gt;         <span class="tag">&lt;<span class="name">CMTItem</span> <span class="attr">func</span>=<span class="string">&#123;reload&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">CMTItem</span>&gt;</span></span></span><br><span class="line"><span class="xml">&gt;     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">&gt; </span><br><span class="line">&gt; <span class="comment">// 按钮绑定的函数用来传递数据</span></span><br><span class="line">&gt; postComment = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">&gt;         <span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line">&gt;         obj.user = <span class="keyword">this</span>.refs.user.value</span><br><span class="line">&gt;         obj.content = <span class="keyword">this</span>.refs.content.value</span><br><span class="line">&gt;         <span class="built_in">console</span>.log(obj)</span><br><span class="line">&gt;         <span class="keyword">if</span>(<span class="keyword">this</span>.refs.user.value&amp;&amp; <span class="keyword">this</span>.refs.content.value)&#123;</span><br><span class="line">&gt;             <span class="keyword">this</span>.props.func(obj); ★</span><br><span class="line">&gt;         &#125;</span><br><span class="line">&gt;         <span class="keyword">this</span>.refs.user.value = <span class="keyword">this</span>.refs.content.value =<span class="string">""</span></span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="1-3-Context的跨层传递"><a href="#1-3-Context的跨层传递" class="headerlink" title="1.3 Context的跨层传递"></a>1.3 Context的跨层传递</h4><ul>
<li>使用要点：1.保证父子组件必须是类组件 ★</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个方法用于给子孙组件传递数据 (数据的跨层传递)</span></span><br><span class="line">    getChildContext() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            color: <span class="keyword">this</span>.state.color</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>定义向子孙组件传递的数据的类型</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> childContextTypes = &#123;</span><br><span class="line">    color: PropTypes.string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>子组件在使用父组件context数据的时候首先需要对父组件传递过来的数据做类型校验</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">render()&#123;</span><br><span class="line">    <span class="comment">//从this.context中获取跨层传递的数据</span></span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>这是CMTChild组件 &#123;this.context.color&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-react-组件的生命周期"><a href="#2-react-组件的生命周期" class="headerlink" title="2. react 组件的生命周期"></a>2. react 组件的生命周期</h3><h4 id="2-1-对比-vue-的生命周期"><a href="#2-1-对比-vue-的生命周期" class="headerlink" title="2.1 对比 vue 的生命周期"></a>2.1 对比 vue 的生命周期</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vue生命周期：</span><br><span class="line"><span class="number">1.</span>	beforeCreate     组件创建之前，此时method和state还不可以使用</span><br><span class="line"><span class="number">2.</span>	created         组件创建完毕，此时method和state可以使用</span><br><span class="line"><span class="number">3.</span>	beforeMount    在内存中创建虚拟dom，此时页面还没有挂载</span><br><span class="line"><span class="number">4.</span>	mounted        内存中虚拟dom已经渲染到页面，此时页面是最新的</span><br><span class="line"><span class="number">5.</span>	beforeUpdate    页面更新之前，此时页面还是旧的</span><br><span class="line"><span class="number">6.</span>	updated        页面更新之后，此时页面是最新的</span><br><span class="line"><span class="number">7.</span>	beforeDestory    组件销毁之前</span><br><span class="line"><span class="number">8.</span>	destroyed       组件销毁之后</span><br></pre></td></tr></table></figure>

<h4 id="2-2-react-生命周期的介绍"><a href="#2-2-react-生命周期的介绍" class="headerlink" title="2.2 react 生命周期的介绍"></a>2.2 react 生命周期的介绍</h4><ul>
<li>React组件的生命周期分为三个阶段：组件的创建阶段、组件的运行阶段、组件的销毁阶段</li>
</ul>
<h5 id="a-创建阶段"><a href="#a-创建阶段" class="headerlink" title="a. 创建阶段"></a>a. 创建阶段</h5><h6 id="1-static-defaultProps"><a href="#1-static-defaultProps" class="headerlink" title="1. static defaultProps"></a>1. static defaultProps</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在封装一个组件的时候，组件内部肯定有一些数据是必须的，哪怕用户没有传递一些相关的启动参数，这时候组件内部尽量给自己提供一个默认值；</span></span><br><span class="line"> <span class="comment">// 在 React 中使用静态的defaultProps属性来设置组件的默认属性值；</span></span><br><span class="line"> <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">   initcount: <span class="number">0</span> <span class="comment">// 如果外界没有传递 initcount  那么自己初始化一个 数值为0</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> ReactTypes <span class="keyword">from</span> <span class="string">"prop-types"</span></span><br><span class="line"><span class="comment">// 这是创建一个 静态的 propTypes 对象，可以对外界传递过来的属性做类型校验；</span></span><br><span class="line"><span class="comment">// 注意： 如果要为传递过来的属性做类型校验，必须安装 React 提供的 第三方包叫做 prop-types ;</span></span><br><span class="line"><span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    <span class="comment">// 使用 prop-types 包 来定义 initcount 为 number 类型</span></span><br><span class="line">    <span class="comment">// isRequired 表示这个props属性是必须要传递的 </span></span><br><span class="line">    initcount: ReactTypes.number.isRequired </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果有些数据是必须的，必须要有初始值，但是没有传递，就可以使用 static</li>
</ul>
<h6 id="2-constructor"><a href="#2-constructor" class="headerlink" title="2.constructor"></a>2.constructor</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2.生命周期第二个执行的是constructor 构造函数 (执行一次)</span></span><br><span class="line">   <span class="comment">// 在创建组件对象的时候会自动调用构造函数</span></span><br><span class="line">   <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">"constructor"</span>)</span><br><span class="line">       <span class="keyword">super</span>(props)</span><br><span class="line">       <span class="comment">//在构造函数中指定组件的私有数据</span></span><br><span class="line">       <span class="keyword">this</span>.state = &#123;</span><br><span class="line">           count: props.initcount</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">this</span>.divRef = React.createRef()</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h6 id="3-componentWillMount"><a href="#3-componentWillMount" class="headerlink" title="3.   componentWillMount"></a>3.   componentWillMount</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//3.当子组件接收到新的props会执行,在react16.4版本以后，setState修改state数据之后也会触发这个方法(执行多次)</span></span><br><span class="line">    <span class="comment">// 在该方法中不能通过this.setSate来修改state数据,因为在staic修饰的方法中就没有this</span></span><br><span class="line">    <span class="comment">//作用：将传递的props映射到state里面</span></span><br><span class="line">    <span class="comment">//参数： nextProps 外部传递过来的props属性</span></span><br><span class="line">    <span class="comment">//      prevState 之前的state状态</span></span><br><span class="line">    <span class="keyword">static</span> getDerivedStateFromProps(nextProps, prevState) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"getDerivedStateFromProps"</span>, nextProps, prevState)</span><br><span class="line">        <span class="comment">//获取到父组件中传递过来的initcount值</span></span><br><span class="line">        <span class="keyword">const</span> &#123; initcount &#125; = nextProps;</span><br><span class="line">        <span class="comment">//当父组件中传递过来的initcount发生改变了</span></span><br><span class="line">        <span class="keyword">if</span> (initcount != prevState.prevCount) &#123;</span><br><span class="line">            <span class="comment">//在方法中返回&#123;count:initcount&#125; 替换掉当前state中的 count值</span></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                count: initcount,</span><br><span class="line">                prevCount:initcount</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果父组件中传递过来的initcount没有变化，就返回一个空对象(此时不对当前的state做任何修改)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h6 id="4-render"><a href="#4-render" class="headerlink" title="4.render (){}"></a>4.render (){}</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//4.创建虚拟dom，但是虚拟dom还没有挂载到页面 (执行多次)</span></span><br><span class="line">   <span class="comment">// render函数中不能使用setState()来修改state的数据，因为会死循环</span></span><br><span class="line">   render() &#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">"render"</span>, <span class="keyword">this</span>.divRef.current)  <span class="comment">//null</span></span><br><span class="line">       <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;this.divRef&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">           哈哈Counter &#123;this.state.count&#125;</span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h6 id="5-componentDidMount"><a href="#5-componentDidMount" class="headerlink" title="5.componentDidMount"></a>5.componentDidMount</h6><p>虚拟 dom 已经挂载到页面，此时可以获取到最新的页面（执行一次）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//5.虚拟dom已经挂载到页面，此时可以获取到最新的页面 (执行一次)</span></span><br><span class="line">   componentDidMount() &#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">"componentDidMount"</span>, <span class="keyword">this</span>.divRef.current, <span class="keyword">this</span>.state)  <span class="comment">//null</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h5 id="b-运行阶段"><a href="#b-运行阶段" class="headerlink" title="b.  运行阶段"></a>b.  运行阶段</h5><h6 id="1-static-getDerivedStateFromProps"><a href="#1-static-getDerivedStateFromProps" class="headerlink" title="1.static getDerivedStateFromProps"></a>1.static getDerivedStateFromProps</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">第一个会执行：<span class="keyword">static</span> getDerivedStateFromProps</span><br><span class="line">当父组件给子组件传递的props发生变化的时候，会执行该方法。</span><br><span class="line">在react16<span class="number">.4</span>版本以后，当前组件的state发生变化，会触发forceUpdate方法，然后还是会触发该方法</span><br></pre></td></tr></table></figure>

<h6 id="2-shouldComponentUpdate"><a href="#2-shouldComponentUpdate" class="headerlink" title="2.shouldComponentUpdate"></a>2.shouldComponentUpdate</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第二个会执行: shouldComponentUpdate</span></span><br><span class="line">    <span class="comment">// 在这个函数中，我们可以设置指定条件下去更新页面，指定条件下不更新页面。这个函数中入参props和state都是最新的</span></span><br><span class="line">    <span class="comment">// 在该方法中不能通过this.setSate来修改state数据</span></span><br><span class="line">    shouldComponentUpdate(nextProps, nextState) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"shouldComponentUpdate"</span>, nextProps, nextState)</span><br><span class="line">        <span class="comment">// 在 shouldComponentUpdate 中要求必须返回一个布尔值</span></span><br><span class="line">        <span class="comment">// 在 shouldComponentUpdate 中，如果返回的值是 false，则不会继续执行后续的生命周期函数，而是直接退回到了运行中的状态，此时后续的render函数并没有被调用，因此页面不会被更新，但是组件的 state 状态，却被修改了；</span></span><br><span class="line">        <span class="comment">// return nextState.count % 2 == 0 ? true : false;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h6 id="3-render"><a href="#3-render" class="headerlink" title="3.render"></a>3.render</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第三个会执行:render  此时会重新构建虚拟dom，但是新的虚拟dom还没有渲染到页面</span></span><br></pre></td></tr></table></figure>

<h6 id="4-getSnapshotBeforeUpdate"><a href="#4-getSnapshotBeforeUpdate" class="headerlink" title="4.getSnapshotBeforeUpdate"></a>4.getSnapshotBeforeUpdate</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第四个会执行getSnapshotBeforeUpdate 函数</span></span><br><span class="line">  <span class="comment">// 在该方法中不能通过this.setSate来修改state数据</span></span><br><span class="line">  getSnapshotBeforeUpdate() &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"getSnapshotBeforeUpdate"</span>)</span><br><span class="line">      <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h6 id="5-componentDidUpdate-★★"><a href="#5-componentDidUpdate-★★" class="headerlink" title="5.componentDidUpdate ★★"></a>5.componentDidUpdate ★★</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 在该方法中不能通过this.setSate来修改state数据</span></span><br><span class="line">    <span class="comment">//表示组件已经更新完毕  此时可以获取到最新的页面</span></span><br><span class="line">    componentDidUpdate() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"componentDidUpdate"</span>, <span class="keyword">this</span>.state)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//只有在 componentDidMount 这个生命周期钩子函数中才可以写 setState， 其他钩子函数统统不可以写 ★</span></span><br></pre></td></tr></table></figure>

<h5 id="c-销毁阶段"><a href="#c-销毁阶段" class="headerlink" title="c . 销毁阶段"></a>c . 销毁阶段</h5><h6 id="1-componentWillUnmount"><a href="#1-componentWillUnmount" class="headerlink" title="1. componentWillUnmount()"></a>1. componentWillUnmount()</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//很关键的，我们获取当前rootNode的scrollHeight，传到componentDidUpdate 的参数perScrollHeight</span></span><br><span class="line">  <span class="comment">//在render方法调用之后，在componentDidUpdate之前执行，我们可以在这个方法中获取到元素的滚动位置的信息</span></span><br><span class="line">  <span class="comment">//还可以在该方法中做一些样式的微调</span></span><br><span class="line">  getSnapshotBeforeUpdate() &#123;</span><br><span class="line">      <span class="comment">//console.log(this.rootNode.clientHeight)</span></span><br><span class="line">      <span class="comment">//this.rootNode.style.backgroundColor = "red";</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.rootNode.scrollHeight;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/22/10.react进阶(二)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/22/10.react进阶(二)/" itemprop="url">十、react进阶(事件处理和条件渲染)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-22T20:00:50+08:00">
                2019-11-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-条件渲染"><a href="#1-条件渲染" class="headerlink" title="1. 条件渲染"></a>1. 条件渲染</h3><h4 id="（1）if-else-条件渲染"><a href="#（1）if-else-条件渲染" class="headerlink" title="（1）if - else 条件渲染"></a>（1）if - else 条件渲染</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Greeting</span> (<span class="params">props</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> flag = props.flag;</span><br><span class="line">    <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>登录成功<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>登录失败<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="（2）-amp-amp-逻辑与条件渲染"><a href="#（2）-amp-amp-逻辑与条件渲染" class="headerlink" title="（2）&amp;&amp; 逻辑与条件渲染"></a>（2）&amp;&amp; 逻辑与条件渲染</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Greeting</span> (<span class="params">props</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> props.flag.length &gt;<span class="number">0</span> &amp;&amp; (props.flag.map(<span class="function"><span class="params">item</span> =&gt;</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">key</span>=<span class="string">&#123;item&#125;</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">   &#125;))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>需要注意的是数组的函数传值是 通过 <greeting name="{arr}"></greeting>进行的，而不是把数组展开，那样子就会变成一个对象</li>
</ul>
<h4 id="（3）三元表达式渲染"><a href="#（3）三元表达式渲染" class="headerlink" title="（3）三元表达式渲染"></a>（3）三元表达式渲染</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Greeting</span> (<span class="params">props</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> props.flag==<span class="literal">true</span>?<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>登录成功<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>:<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>登陆失败<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="（4）阻止组件渲染"><a href="#（4）阻止组件渲染" class="headerlink" title="（4）阻止组件渲染"></a>（4）阻止组件渲染</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Greeting</span> (<span class="params">props</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> flag = props.flag;</span><br><span class="line">    <span class="keyword">if</span>(flag == <span class="literal">false</span>)&#123;</span><br><span class="line">      </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>; ★★</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>登录成功<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-列表渲染"><a href="#2-列表渲染" class="headerlink" title="2. 列表渲染"></a>2. 列表渲染</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">List</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> numbers = props.numbers;</span><br><span class="line">    <span class="keyword">const</span> listItem = numbers.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item&#125;</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> listItem.length &gt; <span class="number">0</span> ? <span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>&#123;listItem&#125;<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span> : <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-1-Fragment-的使用-★"><a href="#2-1-Fragment-的使用-★" class="headerlink" title="2.1 Fragment 的使用 ★"></a>2.1 Fragment 的使用 ★</h4><table>
<thead>
<tr>
<th>n.</th>
<th>碎片; 片段;</th>
</tr>
</thead>
<tbody><tr>
<td>v.</td>
<td>(使) 碎裂，破裂，分裂</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">List</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> numbers = props.numbers;</span><br><span class="line">    <span class="keyword">const</span> liItems = numbers.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">React.Fragment</span> <span class="attr">key</span>=<span class="string">&#123;item.title&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">dt</span>&gt;</span>&#123;item.title&#125;<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">dd</span>&gt;</span>&#123;item.msg&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">React.Fragment</span>&gt;</span></span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> liItems.length&gt;<span class="number">0</span>?(<span class="xml"><span class="tag">&lt;<span class="name">dl</span>&gt;</span>&#123;liItems&#125;<span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span>):<span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>jsx 表达式必须在一个根节点里面，使用 &lt;React.Fragment&gt;将其包裹在里面 。</p>
<h4 id="2-2-react组合（类似vue中slot）"><a href="#2-2-react组合（类似vue中slot）" class="headerlink" title="2.2 react组合（类似vue中slot）"></a>2.2 react组合（类似vue中slot）</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">FancyBorder</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"child"</span>&gt;</span></span></span><br><span class="line">        &lt;div className="SplitPane-left"&gt;</span><br><span class="line">            &#123;props.left&#125;</span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        &lt;div className="SplitPane-right"&gt;</span><br><span class="line">            &#123;props.right&#125;</span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;props.children&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ReactDom.render(<span class="xml"><span class="tag">&lt;<span class="name">FancyBorder</span> <span class="attr">left</span>=<span class="string">&#123;</span>&lt;<span class="attr">div</span>&gt;</span>左边内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125; right=&#123;<span class="tag">&lt;<span class="name">div</span>&gt;</span>右边内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>这是span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">FancyBorder</span>&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">"app"</span>))</span><br></pre></td></tr></table></figure>

<h3 id="3-style-的使用"><a href="#3-style-的使用" class="headerlink" title="3. style 的使用"></a>3. style 的使用</h3><h4 id="3-1-style-js"><a href="#3-1-style-js" class="headerlink" title="3.1 style.js"></a>3.1 style.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">render()&#123;</span><br><span class="line">       <span class="keyword">return</span> </span><br><span class="line">       &lt;h1 style=	  &#123;&#123;<span class="attr">color</span>:<span class="string">'red'</span>,<span class="attr">fontSize</span>:<span class="string">"18px"</span>,<span class="attr">marginTop</span>:<span class="string">"100px"</span>&#125;&#125;&gt; </span><br><span class="line">        这是评论列表组件</span><br><span class="line">       &lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">   &#125;   </span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/   user: &#123; fontSize: '14px' &#125;,</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/  为什么两个&#123;&#123;&#125;&#125; ，可以理解成第一个&#123;&#125;为赋值已给一个 user 对象的括号 ， </span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/  再把这个 user 对象赋值给 style 即可 ，所以有两个 &#123;&#123; &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//写成 style.js 样式 ， 变成独立的文件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    item: &#123; <span class="attr">border</span>: <span class="string">'1px dashed #ccc'</span>, <span class="attr">margin</span>: <span class="string">'10px'</span>, <span class="attr">padding</span>: <span class="string">'10px'</span>, <span class="attr">boxShadow</span>: <span class="string">'0 0 10px #ccc'</span> &#125;,</span><br><span class="line">    user: &#123; <span class="attr">fontSize</span>: <span class="string">'14px'</span>, <span class="attr">paddingLeft</span>:<span class="string">"10px"</span>&#125;,</span><br><span class="line">    content: &#123; <span class="attr">fontSize</span>: <span class="string">'12px'</span>,<span class="attr">float</span>:<span class="string">"right"</span> &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-css-样式表-★"><a href="#3-2-css-样式表-★" class="headerlink" title="3.2  css 样式表 ★"></a>3.2  css 样式表 ★</h4><p>1.安装 css 加载器 ★</p>
<p>修改 <code>webpack.config.js</code>这个配置文件，为 <code>css-loader</code> 添加参数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install  style-loader  css-loader -D</span><br><span class="line"></span><br><span class="line">&#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>] &#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>导入样式表</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import   "./cmtlist.css"</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.title</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">200</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span>&#123;</span><br><span class="line">  <span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> css 模块化只针对类选择器 和 Id选择器生效， 不会对标签选择器模块化</p>
<p>3.开启模块作用域 ★</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#1. webpack.config.js  修改css的rules规则，开启css的模块化</span><br><span class="line">&#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [<span class="string">'style-loader'</span>, <span class="string">'css-loader?modules'</span>] &#125;       <span class="comment">//modules表示为css启动模块化(启动模块化之后就有模块作用域)</span></span><br></pre></td></tr></table></figure>

<p>4.css 模块化的注意点 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*默认情况下，所有的类和id样式都会被模块化*/</span></span><br><span class="line"><span class="comment">/*使用:local()包裹的样式会被模块化，但是对于标签名的样式无效   :local默认可以省略*/</span></span><br><span class="line"><span class="comment">/*使用:global包裹的样式不会被模块化*/</span></span><br><span class="line"><span class="comment">/*但是标签名的样式不会被模块化*/</span></span><br></pre></td></tr></table></figure>

<p>一般在开发过程中，我们需要引入很多的第三方css文件，为了让第三方css文件能够被友好的使用，我们一般不会对css文件开启模块化，一般都会给自己写的less 、 sass文件开启模块化。★★★</p>
<p>5.用 :global()包裹的样式不会被模块化 ， 使用：local() 包裹的样式会被模块化，但是对于标签名的样式无效，还有默认就是local，可以省略。</p>
<h3 id="4-react的事件处理"><a href="#4-react的事件处理" class="headerlink" title="4.   react的事件处理"></a>4.   react的事件处理</h3><ul>
<li>如果handleClick2是箭头函数，则函数中的this默认指向当前组件对象</li>
<li>如果handleClick2是普通函数，则函数中的this默认指向undefine     </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;this.handleClick2&#125;&gt;点我3&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<h4 id="4-1-this-的问题"><a href="#4-1-this-的问题" class="headerlink" title="4.1 this 的问题"></a>4.1 this 的问题</h4><p>修改事件函数中this指向问题：<br>               1.直接声明函数为箭头函数，此时函数中的this指向当前组件对象<br>               2.绑定事件的时候，通过bind方法来修改this指向</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onClick=&#123;this.handleClick2.bind(this,&apos;xx&apos;)&#125;</span><br></pre></td></tr></table></figure>

<p>​               3.在构造函数中通过bind修改this指向     </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">constructor</span>() &#123;</span><br><span class="line"> <span class="keyword">super</span>();</span><br><span class="line"> <span class="comment">//在构造函数中改变this.handleClick2函数的this指向</span></span><br><span class="line"> <span class="keyword">this</span>.handleClick2 = <span class="keyword">this</span>.handleClick2.bind(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-传参的问题★★"><a href="#4-2-传参的问题★★" class="headerlink" title="4.2 传参的问题★★"></a>4.2 传参的问题★★</h4><p>1.使用箭头函数传递参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onClick=&#123;() =&gt; <span class="keyword">this</span>.handleClick(<span class="string">"click"</span>)</span><br><span class="line">onClick=&#123;(e)=&gt;<span class="keyword">this</span>.handleClick2(e,<span class="string">"参数信息"</span>)&#125;</span><br></pre></td></tr></table></figure>

<p>差别在于第二个写法会传递一个事件对象过去，然后我们可以通过该事件对象阻止</p>
<p>默认事件等等  ， e.preventDefault 阻止默认事件 。★</p>
<p>2.通过bind来传递参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onClick=&#123;<span class="keyword">this</span>.handleClick2.bind(<span class="keyword">this</span>,<span class="string">'xx'</span>)&#125;</span><br></pre></td></tr></table></figure>

<p>缺陷是不能传递事件对象</p>
<h3 id="5-受控组件和非受控组件"><a href="#5-受控组件和非受控组件" class="headerlink" title="5.   受控组件和非受控组件"></a>5.   受控组件和非受控组件</h3><h4 id="5-1-受控组件"><a href="#5-1-受控组件" class="headerlink" title="5.1 受控组件"></a>5.1 受控组件</h4><p>受控组件又称为智能组件，顾名思义受控组件就是受到控制的组件，受控组件是数据的所有者，它拥有数据、且拥有操作数据的action。它可以使用自己的state数据，也可以将数据和操作action传递给子组件，让子组件来完成UI或者功能。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"text"</span> value=&#123;<span class="keyword">this</span>.state.age&#125; onChange = &#123;<span class="keyword">this</span>.handleChange&#125;/&gt; 改不动的 value</span><br><span class="line"></span><br><span class="line"> handleChange = <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;<span class="attr">age</span>:e.target.value&#125;)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.age,<span class="string">"受控组件"</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-非受控组件"><a href="#5-2-非受控组件" class="headerlink" title="5.2 非受控组件"></a>5.2 非受控组件</h4><p>非受控组件不同于受控组件，它自身并不能拥有可改变的数据。因为函数组件只负责接收 props 并返回 UI，在真实的 React 应用开发场景下，我们经常尽可能的使用函数组件，将整个应用的 UI 拆分成尽可能小的视觉单元。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; ref=&quot;txt&quot; defaultValue=&#123;this.state.age&#125; onChange = &#123;this.handleChange2&#125;/&gt;</span><br><span class="line"></span><br><span class="line"> handleChange2 = (e)=&gt;&#123;</span><br><span class="line">        console.log(e.target.value,&quot;这是非受控组件&quot;)</span><br><span class="line">        console.log(this.refs.txt.value,&quot;这是ref绑定的值&quot;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-ref的用法"><a href="#6-ref的用法" class="headerlink" title="6.   ref的用法"></a>6.   ref的用法</h3><h4 id="6-1-普通的用法"><a href="#6-1-普通的用法" class="headerlink" title="6.1 普通的用法"></a>6.1 普通的用法</h4><ul>
<li>ref 绑定一个普通的字符串</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123; ref绑定一个普通字符串*<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp">&lt;input type="text" ref="txt" defaultValue=&#123;this.props.default&#125; onChange=&#123;this.handleChange2&#125; /</span>&gt;</span><br><span class="line">    </span><br><span class="line">handleChange2 = <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(e.target.value,<span class="string">"这是非受控组件"</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.refs.txt.value,<span class="string">"这是ref绑定的值"</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-2-React-createRef方法"><a href="#6-2-React-createRef方法" class="headerlink" title="6.2 React.createRef方法"></a>6.2 React.createRef方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>()&#123;</span><br><span class="line">       <span class="keyword">super</span>()</span><br><span class="line">       <span class="keyword">this</span>.state = &#123;</span><br><span class="line">           age:<span class="string">"21"</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">this</span>.textInput = React.createRef(); ★</span><br><span class="line">       <span class="comment">//在构造器中</span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">handleChange3 =<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.textInput.current.value) ★★</span><br><span class="line">      <span class="comment">//使用的方法 this.textInput.current.value</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-3-ref绑定回调函数"><a href="#6-3-ref绑定回调函数" class="headerlink" title="6.3 ref绑定回调函数"></a>6.3 ref绑定回调函数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ref绑定回调函数</span></span><br><span class="line">&lt;input type=<span class="string">"text"</span> </span><br><span class="line">ref=&#123;input=&gt;&#123;<span class="keyword">this</span>.input = input&#125;&#125; ★★★</span><br><span class="line"><span class="comment">// ref=&#123;input=&gt;&#123;this.input = input&#125;&#125;  使用箭头函数进行构造</span></span><br><span class="line">defaultValue=&#123;<span class="keyword">this</span>.props.default&#125; </span><br><span class="line">onChange=&#123;<span class="keyword">this</span>.handleChange4&#125; /&gt;</span><br><span class="line"></span><br><span class="line">handleChange4 = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.input.value) ★</span><br><span class="line">    <span class="comment">// 输出使用的方法</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-4-ref-的转发"><a href="#6-4-ref-的转发" class="headerlink" title="6.4 ref 的转发"></a>6.4 ref 的转发</h4><p>Ref 转发是一个可选特性，其允许某些组件接收 ref，并将其向下传递（换句话说，“转发”它）给子组件。</p>
<p>简单解释：就是通过传递参数赋值的思想把父组件的 ref 赋值给子组件的 ref</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> FancyButton = React.forwardRef(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> (</span><br><span class="line">  &lt;button ref=&#123;ref&#125; className=<span class="string">"FancyButton"</span>&gt;</span><br><span class="line">    &#123;props.children&#125;</span><br><span class="line">  &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">));</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 你可以直接获取 DOM button 的 ref：</span></span><br><span class="line"><span class="regexp">const ref = React.createRef();</span></span><br><span class="line"><span class="regexp">&lt;FancyButton ref=&#123;ref&#125;&gt;点击我！&lt;/</span>FancyButton&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    以下是对上述示例发生情况的逐步解释：</span></span><br><span class="line"><span class="comment">1.我们通过调用 React.createRef 创建了一个 React ref 并将其赋值给 ref 变量。</span></span><br><span class="line"><span class="comment">2.我们通过指定 ref 为 JSX 属性，将其向下传递给 &lt;FancyButton ref=&#123;ref&#125;&gt;。</span></span><br><span class="line"><span class="comment">3.React 传递 ref 给 fowardRef 内函数 (props, ref) =&gt; ...，作为其第二个参数。</span></span><br><span class="line"><span class="comment">4.我们向下转发该 ref 参数到 &lt;button ref=&#123;ref&#125;&gt;，将其指定为 JSX 属性。</span></span><br><span class="line"><span class="comment">5.当 ref 挂载完成，ref.current 将指向 &lt;button&gt; DOM 节点。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/21/9.react起始简介/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/21/9.react起始简介/" itemprop="url">九.react起始简介</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-21T18:25:33+08:00">
                2019-11-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-MVC的简介"><a href="#1-MVC的简介" class="headerlink" title="1. MVC的简介"></a>1. MVC的简介</h3><p><a href="https://baike.baidu.com/item/MVC" target="_blank" rel="noopener">MVC</a>全名是Model View Controller，是模型(model)－视图(view)－控制器(controller)的缩写，一种软件设计典范，用一种业务逻辑、数据、界面显示分离的方法组织代码，将业务逻辑聚集到一个部件里面，在改进和个性化定制界面及用户交互的同时，不需要重新编写业务逻辑。MVC被独特的发展起来用于映射传统的输入、处理和输出功能在一个逻辑的图形化用户界面的结构中。</p>
<p>M是指业务模型，V是指用户界面，C则是控制器，使用MVC的目的是将M和V的实现代码分离，从而使同一个程序可以使用不同的表现形式。</p>
<h3 id="2-Vuex-和-Redux-的区别"><a href="#2-Vuex-和-Redux-的区别" class="headerlink" title="2.Vuex 和 Redux 的区别"></a>2.Vuex 和 Redux 的区别</h3><p>Redux 使用的是不可变数据，而Vuex的数据是可变的。Redux每次都是用新的state替换旧的state，而Vuex是直接修改</p>
<p>Redux 在检测数据变化的时候，是通过的方式比较差异的，而其实和的原理一样，是通过来比较的（如果看源码会知道，其实他内部直接创建一个实例用来跟踪数据变化）</p>
<h3 id="3-vue-和-react-监听数据的原理"><a href="#3-vue-和-react-监听数据的原理" class="headerlink" title="3. vue 和 react 监听数据的原理"></a>3. vue 和 react 监听数据的原理</h3><ul>
<li><p>vue中借助Object.defineProperty(getter  setter) 做数据劫持</p>
</li>
<li><p>react很大程度上是通过比较对象的引用地址是否一致来看数据有没有变化(react中大量使用了不可变对象)</p>
</li>
</ul>
<h3 id="4-react-安装的目录"><a href="#4-react-安装的目录" class="headerlink" title="4. react 安装的目录"></a>4. react 安装的目录</h3><h4 id="4-1-全局安装-webpack"><a href="#4-1-全局安装-webpack" class="headerlink" title="4.1 全局安装 webpack"></a>4.1 全局安装 webpack</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">2.1	构建webpack应用</span><br><span class="line">运行npm init -y 快速初始化项目</span><br><span class="line">npm install webpack@4.27.1 -d</span><br><span class="line">npm install webpack-cli -d       提供一些基本命令(比如webpack命令)</span><br><span class="line">npm install  webpack-dev-server –d</span><br><span class="line">npm i html-webpack-plugin@3.2.0 --save-dev</span><br></pre></td></tr></table></figure>

<h4 id="4-2-创建webpack-应用"><a href="#4-2-创建webpack-应用" class="headerlink" title="4.2 创建webpack 应用"></a>4.2 创建webpack 应用</h4><p>   1.src文件夹 目录下的 index.html 、main.js</p>
<ol start="2">
<li><p>dist 文件夹 ， webpack.config.js 配置如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>)</span><br><span class="line"><span class="keyword">var</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="comment">//webpack基于node构建的，所有用的是CommonJS模块化规范</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode:<span class="string">"development"</span>,</span><br><span class="line">    entry: path.join(__dirname, <span class="string">'./src/main.js'</span>),</span><br><span class="line">    output: &#123; </span><br><span class="line">        path: path.join(__dirname, <span class="string">'./dist'</span>), </span><br><span class="line">        filename: <span class="string">'bundle.js'</span> </span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [ </span><br><span class="line">        <span class="comment">// 添加plugins节点配置插件</span></span><br><span class="line">        <span class="keyword">new</span> htmlWebpackPlugin(&#123;</span><br><span class="line">            template:path.resolve(__dirname, <span class="string">'src/index.html'</span>),<span class="comment">//模板路径</span></span><br><span class="line">            filename:<span class="string">'index.html'</span><span class="comment">//自动生成的HTML文件的名称</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装webpack和webpack-cli</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack@4.27.1 -d</span><br><span class="line">npm install webpack-cli -d       提供一些基本命令(比如webpack命令)</span><br></pre></td></tr></table></figure>

<p>4.index.html</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script src=&quot;../dist/bundle.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>webpack</li>
</ol>
<h4 id="4-3-配置webpack-dev-serve"><a href="#4-3-配置webpack-dev-serve" class="headerlink" title="4.3.配置webpack-dev-serve"></a>4.3.配置webpack-dev-serve</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#1.安装webpack-dev-serve</span><br><span class="line">npm install  webpack-dev-server -d</span><br><span class="line"></span><br><span class="line">#2.package.json的scripts添加dev</span><br><span class="line"> <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"webpack-dev-server --open --port 3000 --hot --host 127.0.0.1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">#3.npm run dev     webpack-dev-server将打包后的bundle.js托管到项目根路径下(内存中)，所以可以通过下面路径访问</span><br><span class="line">  http:<span class="comment">//localhost:8080/bundle.js    </span></span><br><span class="line"></span><br><span class="line">#4.修改index.html中引入bundle.js的路径</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">	&lt;!--使用webpack-dev-server打包后内存中的bundle.js--&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script src="../</span>bundle.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4-4-配置到内存中"><a href="#4-4-配置到内存中" class="headerlink" title="4.4. 配置到内存中"></a>4.4. 配置到内存中</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#1.安装html-webpack-plugin</span><br><span class="line">npm i html-webpack-plugin@<span class="number">3.2</span><span class="number">.0</span> --save-dev</span><br><span class="line"></span><br><span class="line">#2.修改webpack.config.js配置 ★☆★☆★☆★</span><br><span class="line"><span class="comment">// 导入自动生成HTMl文件的插件  ★☆★☆★☆★</span></span><br><span class="line"><span class="keyword">var</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">     mode:<span class="string">"development"</span>,</span><br><span class="line">    entry: path.join(__dirname, <span class="string">'./src/main.js'</span>),</span><br><span class="line">    output: &#123; </span><br><span class="line">        path: path.join(__dirname, <span class="string">'./dist'</span>), </span><br><span class="line">        filename: <span class="string">'bundle.js'</span> </span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [ </span><br><span class="line">        <span class="comment">// 添加plugins节点配置插件</span></span><br><span class="line">        <span class="keyword">new</span> htmlWebpackPlugin(&#123;</span><br><span class="line">            template:path.resolve(__dirname, <span class="string">'src/index.html'</span>),<span class="comment">//模板路径</span></span><br><span class="line">            filename:<span class="string">'index.html'</span><span class="comment">//自动生成的HTML文件的名称</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-遇到问题报错如下"><a href="#5-遇到问题报错如下" class="headerlink" title="5. 遇到问题报错如下"></a>5. 遇到问题报错如下</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack-dev-server  不是内部或外部命令，也不是可运行 的程序 或批处理文件。</span><br></pre></td></tr></table></figure>

<p>解决方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-dev-server -d</span><br></pre></td></tr></table></figure>

<h3 id="6-在-webpack-中使用-react"><a href="#6-在-webpack-中使用-react" class="headerlink" title="6.在 webpack 中使用 react"></a>6.在 webpack 中使用 react</h3><p>​        1.运行 npm install react react-dom -S 安装包</p>
<ul>
<li><p>react： 专门用于创建组件和虚拟DOM的，同时组件的生命周期都在这个包中</p>
</li>
<li><p>react-dom： 专门进行DOM操作的，最主要的应用场景，就是`ReactDOM.render()</p>
<p>2.在html页面上准备一个容器</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 容器，将来，使用 React 创建的虚拟DOM元素，都会被渲染到这个指定的容器中 --&gt;</span><br><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>​        3.main.js 中引入包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;                        // 创建组件、虚拟DOM元素，生命周期</span><br><span class="line">import ReactDOM from &apos;react-dom&apos;      // 把创建好的 组件 和 虚拟DOM 放到页面上展示的</span><br></pre></td></tr></table></figure>

<p>​       4.创建虚拟 dom ，并且渲染到页面上去</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>                        <span class="comment">// 创建组件、虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>      <span class="comment">// 把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这是 创建虚拟DOM元素的 API    &lt;h1 title="啊，五环" id="myh1"&gt;你比四环多一环&lt;/h1&gt;</span></span><br><span class="line"><span class="comment">//  第一个参数： 字符串类型的参数，表示要创建的标签的名称</span></span><br><span class="line"><span class="comment">//  第二个参数：对象类型的参数， 表示 创建的元素的属性节点</span></span><br><span class="line"><span class="comment">//  第三个参数： 子节点（包括 其它 虚拟DOM 获取 文本子节点）</span></span><br><span class="line"><span class="comment">//  参数n :  其它子节点</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myh3 = React.createElement(<span class="string">'h2'</span>,&#123;<span class="attr">title</span>:<span class="string">'这是title'</span>,<span class="attr">id</span>:<span class="string">'myh3'</span>&#125;,<span class="string">'这是myh3，下面没有子元素'</span>)</span><br><span class="line"><span class="keyword">const</span> mydiv = React.createElement(<span class="string">'div'</span>,&#123;<span class="attr">className</span>:<span class="string">'color'</span>&#125;,<span class="string">'这是一个div1的容器,下面有子元素'</span>,myh3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">// 3. 渲染虚拟DOM元素</span></span><br><span class="line"><span class="comment">// 参数1： 表示要渲染的虚拟DOM对象</span></span><br><span class="line"><span class="comment">// 参数2： 指定容器,注意：这里不能直接放 容器元素的Id字符串，需要放一个容器的DOM对象</span></span><br><span class="line">ReactDOM.render(myh1, <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//class使用 className</span></span><br></pre></td></tr></table></figure>



<h3 id="7-虚拟-dom的介绍（提高性能）"><a href="#7-虚拟-dom的介绍（提高性能）" class="headerlink" title="7. 虚拟 dom的介绍（提高性能）"></a>7. 虚拟 dom的介绍（提高性能）</h3><p>React.creatElement()相当于在内存中去构建 dom 。 当页面将要呈现的时候：</p>
<p>1.浏览器会获取整个页面的内容</p>
<p>2.构建dom树 document文档对象 (将页面上的标签，属性，文本转换成 dom 对象）</p>
<p>3.在内存就好像如下的形式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    tagName:<span class="string">"div"</span>,</span><br><span class="line">    attrs:[</span><br><span class="line">        &#123; <span class="attr">id</span> : <span class="string">"box"</span>&#125;,</span><br><span class="line">        &#123; <span class="attr">name</span> : <span class="string">"dongwenbin"</span>&#125;</span><br><span class="line">        &#123; <span class="attr">class</span>: <span class="string">""</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    children:[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.新旧的dom进行差异对比，产生出差异dom，更新真实的dom，最后视图的更新</p>
<h3 id="8-JSX-语法"><a href="#8-JSX-语法" class="headerlink" title="8.JSX 语法"></a>8.JSX 语法</h3><p>1.jsx语法：是一种符合 xml 规范的js语法 extend markup language 可拓展标记语言</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>安装babel：</span><br><span class="line">npm i babel-core@<span class="number">6.26</span><span class="number">.3</span> babel-loader@<span class="number">7.1</span><span class="number">.5</span> babel-plugin-transform-runtime --save-dev</span><br><span class="line"></span><br><span class="line">npm i babel-preset-env babel-preset-stage<span class="number">-0</span> --save-dev</span><br></pre></td></tr></table></figure>

<p>2.安装能够识别转换jsx语法的包 <code>babel-preset-react</code> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i babel-preset-react -D</span><br></pre></td></tr></table></figure>

<p>3.添加 .babelrc 文件配置文件如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [&quot;env&quot;, &quot;stage-0&quot;, &quot;react&quot;],</span><br><span class="line">  &quot;plugins&quot;: [&quot;transform-runtime&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.在 webpack.config.js中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">module: &#123; //要打包的第三方模块</span><br><span class="line">    rules: [</span><br><span class="line">      &#123; test: /\.js|jsx$/, use: &apos;babel-loader&apos;, exclude: /node_modules/ &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>优点：不仅帮助我们创建虚拟dom，还允许我们在jsx中嵌入js表达式，js语法</p>
<p>缺点：其本质依然是借助React.createElement()来创建虚拟dom</p>
<p>在jsx中嵌入js代码 ， 需要用{} ， 数组里的 需要 key = “1”</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;arrStr.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">key</span>=<span class="string">&#123;item&#125;</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#125;)&#125;</span><br><span class="line"><span class="comment">//数组的遍历 ， 然后转换成指定的内容，也需要key 和 &#123;&#125; 进行才可以。</span></span><br><span class="line"></span><br><span class="line">&lt;label htmlFor=<span class="string">"name"</span>&gt;label&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&#123;/</span>*  注释  *<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">只能有一个根标签，所有标签必须闭合</span></span><br></pre></td></tr></table></figure>

<h3 id="9-组件-amp-Props"><a href="#9-组件-amp-Props" class="headerlink" title="9.组件&amp;Props"></a>9.组件&amp;Props</h3><ol>
<li><h5 id="纯函数"><a href="#纯函数" class="headerlink" title="纯函数"></a>纯函数</h5><p>函数内部的代码不会对函数的入参以及函数外部的代码有任何的影响</p>
</li>
<li><h5 id="React-的组件"><a href="#React-的组件" class="headerlink" title="React 的组件"></a>React 的组件</h5><p>2.1 函数组件（纯函数）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>                        <span class="comment">// 创建组件、虚拟DOM元素，生命周期</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>      <span class="comment">// 把创建好的 组件 和 虚拟DOM 放到页面上展示的</span></span><br><span class="line"><span class="comment">//react 中创建组件的第一种方式：使用纯函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hello</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(props)</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.name&#125;&#123;props.age&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Hello;</span><br><span class="line"><span class="comment">//导出到外部的main.js中去接收</span></span><br></pre></td></tr></table></figure>

<p>2.2//展开运算符{…obj}，节省了代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Hello</span> <span class="attr">name</span>=<span class="string">&#123;obj.name&#125;</span> <span class="attr">age</span>=<span class="string">&#123;obj.age&#125;</span> <span class="attr">gender</span>=<span class="string">&#123;obj.gender&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>));</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Hello</span> &#123;<span class="attr">...obj</span>&#125;&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>));</span><br></pre></td></tr></table></figure>

<p>2.2 类组件</p>
<p>2.2.1 react中给我们了一个可以继承的类</p>
</li>
</ol>
   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Movie</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="comment">//super()需要是构造函数的第一行代码</span></span><br><span class="line">        <span class="keyword">super</span>()</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用class方式创建的组件允许组件有自己的state数据和action</span></span><br><span class="line">        <span class="comment">//函数的形式不可以的有自己的数据</span></span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            msg: <span class="string">'大家好，我是 class 创建的 Movie组件'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.state.msg&#125;&#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//静态对象只属于类， 不属于创建new的对象</span></span><br><span class="line"><span class="comment">//静态方法，也是属于类，通过类名直接调用</span></span><br><span class="line"><span class="comment">//继承可以把公共的类放在Animal中 es6</span></span><br><span class="line"><span class="comment">//继承：class Dog extends Anmial</span></span><br><span class="line">  <span class="keyword">constructor</span>(name,age,gender)&#123;</span><br><span class="line">     <span class="keyword">super</span>(name,age);</span><br><span class="line">    <span class="comment">//super调用父类的方法来初始化成员的信息</span></span><br><span class="line">    <span class="comment">//继承的情况下必须使用super在第一行的创建，才可以创建</span></span><br><span class="line">     <span class="keyword">this</span>.gender = gender;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="9-1-两种创建的对比"><a href="#9-1-两种创建的对比" class="headerlink" title="9.1 两种创建的对比"></a>9.1 两种创建的对比</h5><ul>
<li>函数组件：又叫无状态组件、木偶组件、非受控组件 (只有props，没有state，没有生命周期钩子函数)</li>
</ul>
<ul>
<li>Class组件：有状态组件、智能组件、受控组件（有state，有生命周期钩子函数）</li>
</ul>
<h3 id="10-state-的数据更改问题"><a href="#10-state-的数据更改问题" class="headerlink" title="10. state 的数据更改问题"></a>10. state 的数据更改问题</h3><p>借助 this.setState 来修改 ，可以入参两个参数 ；</p>
<p>如果要立刻获取到更改完之后的数据，利用setState()函数指定第二个箭头参数    ,() =&gt; {}</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果我们不基于以前的值来更改当前state的值，我们可以这样下</span></span><br><span class="line">        <span class="comment">// this.setState(&#123;count:2&#125;)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果我们需要根据以前的值来更改当前的state的值，我们可以向下面这样写：</span></span><br><span class="line">        <span class="comment">// this.setState((state,props) =&gt; (&#123;</span></span><br><span class="line">        <span class="comment">//     count : ++state.count</span></span><br><span class="line">        <span class="comment">// &#125;))</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果我们想要修改state之后立马获取最新的数据，我们可以给setState()函数指定第二个参数</span></span><br><span class="line">        <span class="keyword">this</span>.setState(<span class="function">(<span class="params">state,props</span>) =&gt;</span> (&#123;</span><br><span class="line">            count : ++state.count</span><br><span class="line">        &#125;),()=&gt;&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.count)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">         <span class="comment">//state的更新可能是异步的!!!!</span></span><br><span class="line">        <span class="comment">//state的更新既可能是同步的,也可能是异步的。准确地说,在React内部机制能检测到的地方, setState就是异步的;在React检测不到的地方,例如setInterval,setTimeout里,setState就是同步更新的。”</span></span><br><span class="line">        <span class="comment">// setTimeout(() =&gt; &#123;</span></span><br><span class="line">        <span class="comment">//     this.setState(&#123;count:2&#125;)</span></span><br><span class="line">        <span class="comment">//     console.log(this.state.count)  //因为setState()写在了setTimeout()函数里面，所以现在的setState()就是同步更新的</span></span><br><span class="line">        <span class="comment">// &#125;, 1000);</span></span><br></pre></td></tr></table></figure>

<h5 id="10-1-state-更新的原理"><a href="#10-1-state-更新的原理" class="headerlink" title="10.1 state 更新的原理"></a>10.1 state 更新的原理</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> setState本质是通过一个队列机制实现state更新的。 执行setState时，会将需要更新的state合并后放入状态队列，而不会立刻更新state，队列机制可以批量更新state。</span><br><span class="line">如果不通过setState而直接修改this.state，那么这个state不会放入状态队列中，下次调用setState时对状态队列进行合并时，会忽略之前直接被修改的state，这样我们就无法合并了，而且实际也没有把你想要的state更新上去。</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">this.setState(newState)</th>
</tr>
</thead>
<tbody><tr>
<td align="center">newState 存入pending 队列   （待定队列）</td>
</tr>
<tr>
<td align="center">判断是否处于 batch update  （分批更新）</td>
</tr>
<tr>
<td align="center">1.保存在 dirtyComponents 中 (Y)           2.遍历dirtyComponents ，调用updateComponent，更新               pending state or props  (N)</td>
</tr>
</tbody></table>
<p>10.1.1 如何知道已经被更新</p>
<ul>
<li>回调函数</li>
<li>钩子函数</li>
</ul>
<p>10.1.2 需要注意的地方</p>
<ul>
<li>setState可能会引发不必要的渲染(renders)</li>
<li>setState无法完全掌控应用中所有组件的状态</li>
</ul>
<h5 id="10-2-updateComponent-中的-diff"><a href="#10-2-updateComponent-中的-diff" class="headerlink" title="10.2 updateComponent 中的 diff"></a>10.2 updateComponent 中的 diff</h5><h5 id="a-tree-diff"><a href="#a-tree-diff" class="headerlink" title="(a) tree diff"></a>(a) tree diff</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">其实传统diff算法就是对每个节点一一对比，循环遍历所有的子节点，然后判断子节点的更新状态。通过循环递归对节点进行依次对比，算法时间复杂度达到 O(n^3) ，n是树的节点数，这个有多可怕呢？——如果要展示1000个节点，得执行上亿次比较。即便是CPU快能执行30亿条命令，也**很难在一秒内**计算出差异。。</span><br><span class="line"></span><br><span class="line">React 通过制定大胆的策略，将 O(n^3) 复杂度的问题转换成 O(n) 复杂度的问题。react根据自己的特点，实现了部分代码的简化。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">那么问题来了，如果DOM节点出现了跨层级操作,diff会咋办呢？</span><br><span class="line">答：diff只简单考虑同层级的节点位置变换，如果是跨层级的话，只有创建节点和删除节点的操作。</span><br></pre></td></tr></table></figure>

<h5 id="b-component-diff"><a href="#b-component-diff" class="headerlink" title="(b) component diff"></a>(b) component diff</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">React应用是基于组件构建的，对于组件的比较优化侧重于以下几点：</span><br><span class="line">1. 同一类型组件遵从tree diff比较v-dom树</span><br><span class="line">2. 不同类型组件，先将该组件归类为dirty component，替换下整个组件下的所有子节点</span><br><span class="line">3. 同一类型组件Virtual Dom没有变化，React允许开发者使用shouldComponentUpdate（）来判断该组件是否进行diff，运用得当可以节省diff计算时间，提升性能</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如上图，当组件D → 组件G时，diff判断为不同类型的组件，虽然它们的结构相似甚至一样，diff仍然不会比较二者结构，会直接销毁D及其子节点，然后新建一个G相关的子tree，这显然会影响性能，官方虽然认定这种情况极少出现，但是开发中的这种现象造成的影响是非常大的。</span><br></pre></td></tr></table></figure>

<h5 id="c-element-diff"><a href="#c-element-diff" class="headerlink" title="(c) element diff"></a>(c) element diff</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">对于同一层级的element节点，diff提供了以下3种节点操作：</span><br><span class="line">1. INSERT_MARKUP 插入节点</span><br><span class="line">2. MOVE_EXISING 移动节点</span><br><span class="line">3. REMOVE_NODE 移除节点</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">一般diff在比较集合[A,B,C,D]和[B，A，D，C]的时候会进行全部对比，即按对应位置逐个比较，发现每个位置对应的元素都有所更新，则把旧集合全部移除，替换成新的集合，如上图，但是这样的操作在React中显然是复杂、低效、影响性能的操作，因为新集合中所有的元素都可以进行复用，无需删除重新创建，耗费性能和内存，只需要移动元素位置即可。</span><br><span class="line"></span><br><span class="line">React对这一现象做出了一个高效的策略：允许开发者对同一层级的同组子节点添加唯一key值进行区分。意义就是代码上的一小步，性能上的一大步，甚至是翻天覆地的变化！</span><br></pre></td></tr></table></figure>

<p>##### </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/20/8.Git的简单用法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Dong Wenbin">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DWBBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/20/8.Git的简单用法/" itemprop="url">八.Git的简单用法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-20T20:15:28+08:00">
                2019-11-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-秘钥的生成"><a href="#1-秘钥的生成" class="headerlink" title="1.秘钥的生成"></a>1.秘钥的生成</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#1.打开git brash，输入命令 ssh-keygen -t rsa -C &quot;youremail@example.com&quot;</span><br><span class="line">#2.找到用户主目录下的ssh文件夹，复制id_rsa.pub 文件内容</span><br><span class="line">#3.码云后台点击设置，ssh公钥，黏贴id_rsa.pub 文件内容</span><br><span class="line">#4.码云后台创建新项目</span><br><span class="line">#5.配置本地全局的账号和密码</span><br><span class="line">  git config --global user.name &quot;dwbykst&quot;</span><br><span class="line">   git config --global user.email &quot;1491749434@qq.com&quot;</span><br><span class="line">#6.关联远程仓库</span><br><span class="line">  cd project</span><br><span class="line">  git remote add origin git@github.com:dwbskt/myvue.git</span><br><span class="line">  git push -u origin master</span><br></pre></td></tr></table></figure>

<h4 id="1-1-如果已经绑定则解除"><a href="#1-1-如果已经绑定则解除" class="headerlink" title="1.1 如果已经绑定则解除"></a>1.1 如果已经绑定则解除</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote rm origin</span><br></pre></td></tr></table></figure>

<p>理解 ：在同一台电脑上的ssh只能绑定一个github ，之后再用git进行操作。</p>
<h3 id="2-上传步骤"><a href="#2-上传步骤" class="headerlink" title="2.上传步骤"></a>2.上传步骤</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">	修改本地代码，再提交的步骤</span><br><span class="line"><span class="number">1</span>	修改代码</span><br><span class="line"><span class="number">2</span>	git add *     将修改的代码提交到暂存区</span><br><span class="line"><span class="number">3</span>	git commit -m “第一次提交”  将暂存区的代码提交到本地库</span><br><span class="line"><span class="number">4</span>	git push      将本地库的代码提交到远程服务器</span><br></pre></td></tr></table></figure>

<h3 id="3-错误-error"><a href="#3-错误-error" class="headerlink" title="3.错误 error"></a>3.错误 error</h3><p>vue项目 git提交失败 running pre-commit hook:lint-staged</p>
<p>那就是删除掉pre-commit hook，具体在项目文件夹.git\hooks目录下，找到文件pre-commit</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Dong Wenbin</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dong Wenbin</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
